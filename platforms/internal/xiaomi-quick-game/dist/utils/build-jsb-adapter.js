"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=void 0;const babelify=require("babelify"),browserify=require("browserify"),path_1=require("path"),fs_extra_1=require("fs-extra");async function build(e){if(!e.root)throw new Error("Please specify the jsbAdapter path");await createBundle(path_1.join(e.root,"./engine/index.js"),path_1.join(e.dist,"./jsb-engine.js"))}function createBundle(e,n,s){return new Promise((t,i)=>{let r=browserify(e);s&&s.forEach(function(e){r.exclude(e)}),fs_extra_1.ensureDirSync(path_1.dirname(n)),r.transform(babelify,{presets:[require("@babel/preset-env")]}).bundle((e,r)=>{e?(console.error(e),i(e)):(fs_extra_1.writeFileSync(n,r,"utf8"),t())})})}exports.build=build;