"use strict";function checkPackageNameValidity(e){return/^[a-zA-Z]\w*(\.[a-zA-Z]\w*)+$/.test(e)}function translate(e){return Editor.I18n.t("android."+e)}async function verificationFunc(e,r,t){var a={error:"",newValue:r};switch(e){case"packageName":checkIsEmpty(r)?(a.newValue=exports.defaultOptions.packageName,a.error=translate("tips.not_empty")):checkPackageNameValidity(r)||(a.newValue=exports.defaultOptions.packageName,a.error=translate("tips.package_name_error"));break;case"appABIs":if(r&&r.length)break;return a.error=translate("tips.at_least_one"),a;case"renderBackEnd":if(!r)return a.error=translate("tips.not_empty"),a;if(Object.keys(r).every(e=>!r[e]))return a.error=translate("tips.at_least_one"),a;break;case"apiLevel":return checkAndroidAPILevels(r,t);case"keystorePath":t.packages.android.useDebugKeystore||checkIsEmpty(r)&&(a.error=translate("KEYSTORE.error.keystore_path_empty"));break;case"keystorePassword":case"keystoreAlias":case"keystoreAliasPassword":t.packages.android.useDebugKeystore||checkIsEmpty(r)&&(a.error=translate("tips.not_empty"));break;case"remoteUrl":if(!t.packages.android.androidInstant||checkIsEmpty(r))return a;r.startsWith("http")||(a.error="remoteUrl  should start with http")}return a}async function checkAndroidAPILevels(e,r){var t={newValue:e,error:""},e=(checkIsEmpty(e)&&(t.error="API Level"+translate("tips.not_empty")),e.match(/^android-([0-9]*)/));return e?(e=Number(e[1]),r.packages.android.androidInstant&&e<23?(t.error=Editor.I18n.t("android.tips.when_enable_instant")+Editor.I18n.t("android.tips.apilevel_limit",{version:"23"}),t.newValue="android-23"):"tbb"===r.packages.native.JobSystem&&e<21?(t.error=Editor.I18n.t("android.tips.when_enable_tbb")+Editor.I18n.t("android.tips.apilevel_limit",{version:"21"}),t.newValue="android-21"):"5d45ba66-829a-46d3-948e-2ed3fa7ee421"===await Editor.Profile.getProject("project","general.renderPipeline")&&e<21?(t.error=Editor.I18n.t("android.tips.when_enable_deferred")+Editor.I18n.t("android.tips.apilevel_limit",{version:"21"}),t.newValue="android-21"):e<18&&(t.error=Editor.I18n.t("android.tips.apilevel_limit",{version:"18"}),t.newValue="android-18")):t.error="API Level"+translate("tips.not_empty"),t}function getVerifyMap(){const e={};return["packageName","apiLevel","keystorePath","keystorePassword","keystoreAlias","keystoreAliasPassword"].forEach(t=>{e[t]=(e,r)=>verificationFunc(t,e,r)}),e}function checkIsEmpty(e){return null==e||""===e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkIsEmpty=exports.getVerifyMap=exports.checkAndroidAPILevels=exports.verificationFunc=exports.translate=exports.defaultOptions=exports.checkPackageNameValidity=void 0,exports.checkPackageNameValidity=checkPackageNameValidity,exports.defaultOptions={packageName:"",orientation:{portrait:!1,upsideDown:!1,landscapeRight:!0,landscapeLeft:!0},apiLevel:"android-26",appABIs:["arm64-v8a"],useDebugKeystore:!0,keystorePath:"",keystorePassword:"",keystoreAlias:"",keystoreAliasPassword:"",appBundle:!1,androidInstant:!1,remoteUrl:"",sdkPath:"",ndkPath:"",renderBackEnd:{vulkan:!1,gles3:!0,gles2:!0}},exports.translate=translate,exports.verificationFunc=verificationFunc,exports.checkAndroidAPILevels=checkAndroidAPILevels,exports.getVerifyMap=getVerifyMap,exports.checkIsEmpty=checkIsEmpty;