"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.findUpConfig = exports.downloadByUrl = void 0;
const path_1 = require("path");
const fs_extra_1 = require("fs-extra");
const request_1 = require("./../utils/request");
const manager_constant_1 = require("./../manager.constant");
const downloadByUrl = async (config) => {
    return request_1.httpClient.request({
        ...config,
        responseType: 'arraybuffer',
    });
};
exports.downloadByUrl = downloadByUrl;
const findUpConfig = async (folderPath) => {
    let dirPath = (await (0, fs_extra_1.pathExists)(folderPath)) && (await (0, fs_extra_1.stat)(folderPath)).isDirectory() ? folderPath : (0, path_1.dirname)(folderPath);
    while (!(await (0, fs_extra_1.pathExists)((0, path_1.join)(dirPath, manager_constant_1.EXTENSION_CONFIG_FILE)))) {
        if (dirPath === (0, path_1.dirname)(dirPath))
            return undefined;
        dirPath = (0, path_1.dirname)(dirPath);
    }
    return (0, path_1.join)(dirPath, manager_constant_1.EXTENSION_CONFIG_FILE);
};
exports.findUpConfig = findUpConfig;
