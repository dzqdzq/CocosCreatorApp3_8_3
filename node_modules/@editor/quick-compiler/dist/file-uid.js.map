{"version":3,"file":"file-uid.js","sourceRoot":"","sources":["../src/file-uid.ts"],"names":[],"mappings":";;;;;;AAAA,gDAAsB;AAItB,SAAgB,gBAAgB,CAAC,MAAc;IAC3C,OAAO,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;AACvC,CAAC;AAFD,4CAEC;AAED,SAAgB,oBAAoB,CAAC,QAAgB;IACjD,OAAO,KAAK,QAAQ,EAAE,CAAC;AAC3B,CAAC;AAFD,oDAEC;AAED,SAAgB,oBAAoB,CAAC,MAAc;IAC/C,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAC5B,CAAC;AAFD,oDAEC;AAED,SAAgB,qBAAqB,CAAC,OAAe;IACjD,OAAO,OAAO,CAAC;AACnB,CAAC;AAFD,sDAEC;AAED,SAAgB,qBAAqB,CAAC,IAAY;IAC9C,OAAO,IAAI,CAAC;AAChB,CAAC;AAFD,sDAEC;AAED,SAAgB,cAAc,CAAC,IAAY,EAAE,OAAe;IACxD,MAAM,gBAAgB,GAAG,cAAE,CAAC,QAAQ,CAAC,cAAE,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,CAAC;IAC7D,IAAI,gBAAgB,CAAC,MAAM,KAAK,CAAC;QAC7B,gBAAgB,CAAC,UAAU,CAAC,IAAI,CAAC;QACjC,cAAE,CAAC,UAAU,CAAC,gBAAgB,CAAC,EAAE;QACjC,OAAO,IAAI,CAAC;KACf;SAAM;QACH,OAAO,gBAAgB,CAAC;KAC3B;AACL,CAAC;AATD,wCASC","sourcesContent":["import ps from 'path';\n\nexport type FileUid = string;\n\nexport function isVirtualFileUid(fileId: string) {\n    return fileId.codePointAt(0) === 0;\n}\n\nexport function encodeVirtualFileUid(moduleId: string) {\n    return `\\0${moduleId}`;\n}\n\nexport function decodeVirtualFileUid(fileId: string) {\n    return fileId.substr(1);\n}\n\nexport function decodeRegularFilePath(fileUid: string) {\n    return fileUid;\n}\n\nexport function encodeRegularFilePath(path: string) {\n    return path;\n}\n\nexport function encodeFilePath(path: string, rootDir: string) {\n    const relativeFromRoot = ps.relative(ps.join(rootDir), path);\n    if (relativeFromRoot.length === 0 ||\n        relativeFromRoot.startsWith('..') ||\n        ps.isAbsolute(relativeFromRoot)) {\n        return null;\n    } else {\n        return relativeFromRoot;\n    }\n}\n"]}