"use strict";const fs=require("fs"),utils=require("../../utils"),style=fs.readFileSync(`${__dirname}/index.css`,"utf8");let customStyle="",$frames=[];class DockFrame extends window.HTMLElement{static importStyle(t){fs.existsSync(t)&&(customStyle=fs.readFileSync(t,"utf8"),$frames.forEach(e=>{let s=e.shadowRoot.querySelector("#custom-style");if(s){let e=fs.readFileSync(t,"utf-8");s.innerHTML=e}}))}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`\n        <style>${style}</style>\n        <style id="custom-style">${customStyle}</style>\n        <slot></slot>\n        `,this.$layout=null}connectedCallback(){$frames.push(this)}disconnectedCallback(){let t=$frames.indexOf(this);$frames.splice(t,1)}layout(t){let e=t.layout;this.$layout||(this.$layout=document.createElement("dock-layout"),this.shadowRoot.appendChild(this.$layout),this.$layout.$parent=this),1!==e.percent&&(e.percent=1),utils.layout.completion(e),this.$layout.layout(e)}appendPanel(t,e,s){utils.element.appendPanel(this,t,e)}dump(){return{version:1,layout:this.$layout.dump()}}}module.exports=DockFrame;