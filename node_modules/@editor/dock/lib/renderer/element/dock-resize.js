"use strict";const utils=require("../../utils");let $mask=document.createElement("div");$mask.style.position="absolute",$mask.style.top=0,$mask.style.bottom=0,$mask.style.left=0,$mask.style.right=0,$mask.style.width="100%",$mask.style.height="100%",$mask.style.zIndex=999;let switchMask=function(t,e){$mask.style.cursor="column"===e?"ns-resize":"ew-resize",t?!$mask.parentElement&&document.body.appendChild($mask):$mask.parentElement&&document.body.removeChild($mask)};const $dragMask=document.createElement("div");$dragMask.style.background="var(--color-focus-fill)",$dragMask.style.opacity=.4,$dragMask.style.position="absolute",$dragMask.style.zIndex=999;class DockResize extends window.HTMLElement{constructor(){super();const t={direction:"",x:0,y:0,top:0,left:0,width:0,height:0};let e=e=>{this.getBoundingClientRect();if("row"===t.direction){const s=e.pageX-t.x;s>0?($dragMask.style.left=`${t.left}px`,$dragMask.style.width=`${s}px`,this.style.transform=`translate(${s}px, 0px)`):($dragMask.style.left=`${t.left+s}px`,$dragMask.style.width=`${-s}px`,this.style.transform=`translate(${s}px, 0px)`)}else{const s=e.pageY-t.y;s>0?($dragMask.style.top=`${t.top}px`,$dragMask.style.height=`${s}px`,this.style.transform=`translate(0px, ${s}px)`):($dragMask.style.top=`${t.top+s}px`,$dragMask.style.height=`${-s}px`,this.style.transform=`translate(0px, ${s}px)`)}},s=t=>{utils.layout.dragLayout({x:t.pageX,y:t.pageY}),this.style.transform="",$dragMask.parentElement&&document.body.removeChild($dragMask),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",s),switchMask(!1,this.parentElement.direction),utils.layout.clear(),this.removeAttribute("moving","")};this.addEventListener("mousedown",a=>{t.direction=this.parentElement.getAttribute("direction"),document.addEventListener("mousemove",e),document.addEventListener("mouseup",s),switchMask(!0,this.parentElement.direction),t.x=a.pageX,t.y=a.pageY;const i=this.getBoundingClientRect();t.top=i.top,t.left=i.left,t.width=i.width,t.height=i.height,document.body.appendChild($dragMask),$dragMask.style.top=`${t.top}px`,$dragMask.style.left=`${t.left}px`,"row"===t.direction?($dragMask.style.width="0px",$dragMask.style.height=`${t.height}px`):($dragMask.style.width=`${t.width}px`,$dragMask.style.height="0px"),utils.layout.snapshot(this,a.pageX,a.pageY),this.setAttribute("moving","")})}}DockResize.line=2,module.exports=DockResize;