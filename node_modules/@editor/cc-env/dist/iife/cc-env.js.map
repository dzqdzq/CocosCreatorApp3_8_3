{"version":3,"file":"cc-env.js","sources":["../../node_modules/@editor/systemjs/dist/system.js","../../node_modules/@editor/systemjs/dist/extras/named-register.js","../../src/index.ts"],"sourcesContent":["/*\n* SystemJS 1.0.4\n*/\n(function () {\n  const hasSelf = typeof self !== 'undefined';\n\n  const envGlobal = hasSelf ? self : global;\n\n  let baseUrl;\n\n  if (typeof document !== 'undefined') {\n    const baseEl = document.querySelector('base[href]');\n    if (baseEl)\n      baseUrl = baseEl.href;\n  }\n\n  if (!baseUrl && typeof location !== 'undefined') {\n    baseUrl = location.href.split('#')[0].split('?')[0];\n    const lastSepIndex = baseUrl.lastIndexOf('/');\n    if (lastSepIndex !== -1)\n      baseUrl = baseUrl.slice(0, lastSepIndex + 1);\n  }\n\n  const backslashRegEx = /\\\\/g;\n  function resolveIfNotPlainOrUrl (relUrl, parentUrl) {\n    if (relUrl.indexOf('\\\\') !== -1)\n      relUrl = relUrl.replace(backslashRegEx, '/');\n    // protocol-relative\n    if (relUrl[0] === '/' && relUrl[1] === '/') {\n      return parentUrl.slice(0, parentUrl.indexOf(':') + 1) + relUrl;\n    }\n    // relative-url\n    else if (relUrl[0] === '.' && (relUrl[1] === '/' || relUrl[1] === '.' && (relUrl[2] === '/' || relUrl.length === 2 && (relUrl += '/')) ||\n        relUrl.length === 1  && (relUrl += '/')) ||\n        relUrl[0] === '/') {\n      const parentProtocol = parentUrl.slice(0, parentUrl.indexOf(':') + 1);\n      // Disabled, but these cases will give inconsistent results for deep backtracking\n      //if (parentUrl[parentProtocol.length] !== '/')\n      //  throw Error('Cannot resolve');\n      // read pathname from parent URL\n      // pathname taken to be part after leading \"/\"\n      let pathname;\n      if (parentUrl[parentProtocol.length + 1] === '/') {\n        // resolving to a :// so we need to read out the auth and host\n        if (parentProtocol !== 'file:') {\n          pathname = parentUrl.slice(parentProtocol.length + 2);\n          pathname = pathname.slice(pathname.indexOf('/') + 1);\n        }\n        else {\n          pathname = parentUrl.slice(8);\n        }\n      }\n      else {\n        // resolving to :/ so pathname is the /... part\n        pathname = parentUrl.slice(parentProtocol.length + (parentUrl[parentProtocol.length] === '/'));\n      }\n\n      if (relUrl[0] === '/')\n        return parentUrl.slice(0, parentUrl.length - pathname.length - 1) + relUrl;\n\n      // join together and split for removal of .. and . segments\n      // looping the string instead of anything fancy for perf reasons\n      // '../../../../../z' resolved to 'x/y' is just 'z'\n      const segmented = pathname.slice(0, pathname.lastIndexOf('/') + 1) + relUrl;\n\n      const output = [];\n      let segmentIndex = -1;\n      for (let i = 0; i < segmented.length; i++) {\n        // busy reading a segment - only terminate on '/'\n        if (segmentIndex !== -1) {\n          if (segmented[i] === '/') {\n            output.push(segmented.slice(segmentIndex, i + 1));\n            segmentIndex = -1;\n          }\n        }\n\n        // new segment - check if it is relative\n        else if (segmented[i] === '.') {\n          // ../ segment\n          if (segmented[i + 1] === '.' && (segmented[i + 2] === '/' || i + 2 === segmented.length)) {\n            output.pop();\n            i += 2;\n          }\n          // ./ segment\n          else if (segmented[i + 1] === '/' || i + 1 === segmented.length) {\n            i += 1;\n          }\n          else {\n            // the start of a new segment as below\n            segmentIndex = i;\n          }\n        }\n        // it is the start of a new segment\n        else {\n          segmentIndex = i;\n        }\n      }\n      // finish reading out the last segment\n      if (segmentIndex !== -1)\n        output.push(segmented.slice(segmentIndex));\n      return parentUrl.slice(0, parentUrl.length - pathname.length) + output.join('');\n    }\n  }\n\n  /*\n   * Import maps implementation\n   *\n   * To make lookups fast we pre-resolve the entire import map\n   * and then match based on backtracked hash lookups\n   *\n   */\n\n  function resolveUrl (relUrl, parentUrl) {\n    return resolveIfNotPlainOrUrl(relUrl, parentUrl) ||\n        relUrl.indexOf(':') !== -1 && relUrl ||\n        resolveIfNotPlainOrUrl('./' + relUrl, parentUrl);\n  }\n\n  function resolvePackages(pkgs, baseUrl) {\n    var outPkgs = {};\n    for (var p in pkgs) {\n      var value = pkgs[p];\n      // TODO package fallback support\n      if (typeof value !== 'string')\n        continue;\n      outPkgs[resolveIfNotPlainOrUrl(p, baseUrl) || p] = resolveUrl(value, baseUrl);\n    }\n    return outPkgs;\n  }\n\n  function parseImportMap (json, baseUrl) {\n    const imports = resolvePackages(json.imports, baseUrl) || {};\n    const scopes = {};\n    if (json.scopes) {\n      for (let scopeName in json.scopes) {\n        const scope = json.scopes[scopeName];\n        let resolvedScopeName = resolveUrl(scopeName, baseUrl);\n        if (resolvedScopeName[resolvedScopeName.length - 1] !== '/')\n          resolvedScopeName += '/';\n        scopes[resolvedScopeName] = resolvePackages(scope, baseUrl) || {};\n      }\n    }\n\n    return { imports: imports, scopes: scopes };\n  }\n\n  function getMatch (path, matchObj) {\n    if (matchObj[path])\n      return path;\n    let sepIndex = path.length;\n    do {\n      const segment = path.slice(0, sepIndex + 1);\n      if (segment in matchObj)\n        return segment;\n    } while ((sepIndex = path.lastIndexOf('/', sepIndex - 1)) !== -1)\n  }\n\n  function applyPackages (id, packages) {\n    const pkgName = getMatch(id, packages);\n    if (pkgName) {\n      const pkg = packages[pkgName];\n      if (pkg === null) return;\n      if (id.length > pkgName.length && pkg[pkg.length - 1] !== '/')\n        console.warn(\"Invalid package target \" + pkg + \" for '\" + pkgName + \"' should have a trailing '/'.\");\n      return pkg + id.slice(pkgName.length);\n    }\n  }\n\n  function resolveImportMap (id, parentUrl, importMap) {\n    const urlResolved = resolveIfNotPlainOrUrl(id, parentUrl) || id.indexOf(':') !== -1 && id;\n    if (urlResolved)\n      id = urlResolved;\n    const scopeName = getMatch(parentUrl, importMap.scopes);\n    if (scopeName) {\n      const scopePackages = importMap.scopes[scopeName];\n      const packageResolution = applyPackages(id, scopePackages);\n      if (packageResolution)\n        return packageResolution;\n    }\n    return applyPackages(id, importMap.imports) || urlResolved || throwBare(id, parentUrl);\n  }\n\n  function throwBare (id, parentUrl) {\n    throw Error('Unable to resolve bare specifier \"' + id + (parentUrl ? '\" from ' + parentUrl : '\"'));\n  }\n\n  /*\n   * SystemJS Core\n   * \n   * Provides\n   * - System.import\n   * - System.register support for\n   *     live bindings, function hoisting through circular references,\n   *     reexports, dynamic import, import.meta.url, top-level await\n   * - System.getRegister to get the registration\n   * - Symbol.toStringTag support in Module objects\n   * - Hookable System.createContext to customize import.meta\n   * - System.onload(id, err?) handler for tracing / hot-reloading\n   * \n   * Core comes with no System.prototype.resolve or\n   * System.prototype.instantiate implementations\n   */\n\n  const hasSymbol = typeof Symbol !== 'undefined';\n  const toStringTag = hasSymbol && Symbol.toStringTag;\n  const REGISTRY = hasSymbol ? Symbol() : '@';\n\n  function SystemJS () {\n    this[REGISTRY] = {};\n  }\n\n  const systemJSPrototype = SystemJS.prototype;\n  systemJSPrototype.import = function (id, parentUrl) {\n    const loader = this;\n    return Promise.resolve(loader.resolve(id, parentUrl))\n    .then(function (id) {\n      const load = getOrCreateLoad(loader, id);\n      return load.C || topLevelLoad(loader, load);\n    });\n  };\n\n  // Hookable createContext function -> allowing eg custom import meta\n  systemJSPrototype.createContext = function (parentId) {\n    return {\n      url: parentId\n    };\n  };\n\n  // onLoad(id, err) provided for tracing / hot-reloading\n  systemJSPrototype.onload = function () {};\n\n  let lastRegister;\n  systemJSPrototype.register = function (deps, declare) {\n    lastRegister = [deps, declare];\n  };\n\n  /*\n   * getRegister provides the last anonymous System.register call\n   */\n  systemJSPrototype.getRegister = function () {\n    const _lastRegister = lastRegister;\n    lastRegister = undefined;\n    return _lastRegister;\n  };\n\n  function getOrCreateLoad (loader, id, firstParentUrl) {\n    let load = loader[REGISTRY][id];\n    if (load)\n      return load;\n\n    const importerSetters = [];\n    const ns = Object.create(null);\n    if (toStringTag)\n      Object.defineProperty(ns, toStringTag, { value: 'Module' });\n    \n    let instantiatePromise = Promise.resolve()\n    .then(function () {\n      return loader.instantiate(id, firstParentUrl);\n    })\n    .then(function (registration) {\n      if (!registration)\n        throw Error('Module ' + id + ' did not instantiate');\n      function _export (name, value) {\n        // note if we have hoisted exports (including reexports)\n        load.h = true;\n        let changed = false;\n        if (typeof name !== 'object') {\n          if (!(name in ns) || ns[name] !== value) {\n            ns[name] = value;\n            changed = true;\n          }\n        }\n        else {\n          for (let p in name) {\n            let value = name[p];\n            if (!(p in ns) || ns[p] !== value) {\n              ns[p] = value;\n              changed = true;\n            }\n          }\n        }\n        if (changed)\n          for (let i = 0; i < importerSetters.length; i++)\n            importerSetters[i](ns);\n        return value;\n      }\n      const declared = registration[1](_export, registration[1].length === 2 ? {\n        import: function (importId) {\n          return loader.import(importId, id);\n        },\n        meta: loader.createContext(id)\n      } : undefined);\n      load.e = declared.execute || function () {};\n      return [registration[0], declared.setters || []];\n    });\n\n    instantiatePromise = instantiatePromise.catch(function (err) {\n        loader.onload(load.id, err);\n        throw err;\n      });\n\n    const linkPromise = instantiatePromise\n    .then(function (instantiation) {\n      return Promise.all(instantiation[0].map(function (dep, i) {\n        const setter = instantiation[1][i];\n        return Promise.resolve(loader.resolve(dep, id))\n        .then(function (depId) {\n          const depLoad = getOrCreateLoad(loader, depId, id);\n          // depLoad.I may be undefined for already-evaluated\n          return Promise.resolve(depLoad.I)\n          .then(function () {\n            if (setter) {\n              depLoad.i.push(setter);\n              // only run early setters when there are hoisted exports of that module\n              // the timing works here as pending hoisted export calls will trigger through importerSetters\n              if (depLoad.h || !depLoad.I)\n                setter(depLoad.n);\n            }\n            return depLoad;\n          });\n        })\n      }))\n      .then(function (depLoads) {\n        load.d = depLoads;\n      });\n    });\n\n    linkPromise.catch(function (err) {\n      load.e = null;\n      load.er = err;\n    });\n\n    // Capital letter = a promise function\n    return load = loader[REGISTRY][id] = {\n      id: id,\n      // importerSetters, the setters functions registered to this dependency\n      // we retain this to add more later\n      i: importerSetters,\n      // module namespace object\n      n: ns,\n\n      // instantiate\n      I: instantiatePromise,\n      // link\n      L: linkPromise,\n      // whether it has hoisted exports\n      h: false,\n\n      // On instantiate completion we have populated:\n      // dependency load records\n      d: undefined,\n      // execution function\n      // set to NULL immediately after execution (or on any failure) to indicate execution has happened\n      // in such a case, pC should be used, and pLo, pLi will be emptied\n      e: undefined,\n\n      // On execution we have populated:\n      // the execution error if any\n      er: undefined,\n      // in the case of TLA, the execution promise\n      E: undefined,\n\n      // On execution, pLi, pLo, e cleared\n\n      // Promise for top-level completion\n      C: undefined\n    };\n  }\n\n  function instantiateAll (loader, load, loaded) {\n    if (!loaded[load.id]) {\n      loaded[load.id] = true;\n      // load.L may be undefined for already-instantiated\n      return Promise.resolve(load.L)\n      .then(function () {\n        return Promise.all(load.d.map(function (dep) {\n          return instantiateAll(loader, dep, loaded);\n        }));\n      })\n    }\n  }\n\n  function topLevelLoad (loader, load) {\n    return load.C = instantiateAll(loader, load, {})\n    .then(function () {\n      return postOrderExec(loader, load, {});\n    })\n    .then(function () {\n      return load.n;\n    });\n  }\n\n  // the closest we can get to call(undefined)\n  const nullContext = Object.freeze(Object.create(null));\n\n  // returns a promise if and only if a top-level await subgraph\n  // throws on sync errors\n  function postOrderExec (loader, load, seen) {\n    if (seen[load.id])\n      return;\n    seen[load.id] = true;\n\n    if (!load.e) {\n      if (load.er)\n        throw load.er;\n      if (load.E)\n        return load.E;\n      return;\n    }\n\n    // deps execute first, unless circular\n    let depLoadPromises;\n    load.d.forEach(function (depLoad) {\n      {\n        try {\n          const depLoadPromise = postOrderExec(loader, depLoad, seen);\n          if (depLoadPromise)\n            (depLoadPromises = depLoadPromises || []).push(depLoadPromise);\n        }\n        catch (err) {\n          loader.onload(load.id, err);\n          throw err;\n        }\n      }\n    });\n    if (depLoadPromises) {\n      return Promise.all(depLoadPromises)\n        .then(doExec)\n        .catch(function (err) {\n          loader.onload(load.id, err);\n          throw err;\n        });\n    }\n\n    return doExec();\n\n    function doExec () {\n      try {\n        let execPromise = load.e.call(nullContext);\n        if (execPromise) {\n          execPromise = execPromise.then(function () {\n              load.C = load.n;\n              load.E = null; // indicates completion\n              loader.onload(load.id, null);\n            }, function (err) {\n              loader.onload(load.id, err);\n              throw err;\n            });\n          return load.E = load.E || execPromise;\n        }\n        // (should be a promise, but a minify optimization to leave out Promise.resolve)\n        load.C = load.n;\n        loader.onload(load.id, null);\n      }\n      catch (err) {\n        loader.onload(load.id, err);\n        load.er = err;\n        throw err;\n      }\n      finally {\n        load.L = load.I = undefined;\n        load.e = null;\n      }\n    }\n  }\n\n  envGlobal.System = new SystemJS();\n\n  /*\n   * Supports loading System.register via script tag injection\n   */\n\n  const systemRegister = systemJSPrototype.register;\n  systemJSPrototype.register = function (deps, declare) {\n    systemRegister.call(this, deps, declare);\n  };\n\n  systemJSPrototype.fetchScript = function (url, firstParentUrl) {\n      return new Promise(function (resolve, reject) {\n          let err;\n    \n          function windowErrorListener(evt) {\n            if (evt.filename === url)\n              err = evt.error;\n          }\n    \n          window.addEventListener('error', windowErrorListener);\n    \n          const script = document.createElement('script');\n          script.charset = 'utf-8';\n          script.async = true;\n          script.crossOrigin = 'anonymous';\n          script.addEventListener('error', function () {\n            window.removeEventListener('error', windowErrorListener);\n            reject(Error('Error loading ' + url + (firstParentUrl ? ' from ' + firstParentUrl : '')));\n          });\n          script.addEventListener('load', function () {\n              window.removeEventListener('error', windowErrorListener);\n              document.head.removeChild(script);\n              // Note that if an error occurs that isn't caught by this if statement,\n              // that getRegister will return null and a \"did not instantiate\" error will be thrown.\n              if (err) {\n                reject(err);\n              }\n              else {\n                resolve();\n              }\n          });\n          script.src = url;\n          document.head.appendChild(script);\n      });\n  };\n\n  systemJSPrototype.fetchJson = function (url, firstParentUrl) {\n      return fetch(url).then(function (resp) {\n          return resp.text();\n      });\n  };\n\n  systemJSPrototype.instantiate = function (url, firstParentUrl) {\n      const loader = this;\n      if (url.substr(-5) === '.json') {\n          return this.fetchJson(url, firstParentUrl).then(function (source) {\n              return [[], function(_export) {\n                  return {execute: function() {_export('default', JSON.parse(source));}};\n                  }];\n          });\n      } else {\n          return this.fetchScript(url, firstParentUrl).then(function () {\n              return loader.getRegister();\n          });\n      }\n  };\n\n  /*\n   * Supports loading System.register in workers\n   */\n\n  if (hasSelf && typeof importScripts === 'function')\n    systemJSPrototype.instantiate = function (url) {\n      const loader = this;\n      return new Promise(function (resolve, reject) {\n        try {\n          importScripts(url);\n        }\n        catch (e) {\n          reject(e);\n        }\n        resolve(loader.getRegister());\n      });\n    };\n\n  /*\n   * SystemJS global script loading support\n   * Extra for the s.js build only\n   * (Included by default in system.js build)\n   */\n  (function (global) {\n\n  const systemJSPrototype = System.constructor.prototype;\n\n  // safari unpredictably lists some new globals first or second in object order\n  let firstGlobalProp, secondGlobalProp, lastGlobalProp;\n  function getGlobalProp () {\n    let cnt = 0;\n    let lastProp;\n    for (let p in global) {\n      // do not check frames cause it could be removed during import\n      if (!global.hasOwnProperty(p) || (!isNaN(p) && p < global.length))\n        continue;\n      if (cnt === 0 && p !== firstGlobalProp || cnt === 1 && p !== secondGlobalProp)\n        return p;\n      cnt++;\n      lastProp = p;\n    }\n    if (lastProp !== lastGlobalProp)\n      return lastProp;\n  }\n\n  function noteGlobalProps () {\n    // alternatively Object.keys(global).pop()\n    // but this may be faster (pending benchmarks)\n    firstGlobalProp = secondGlobalProp = undefined;\n    for (let p in global) {\n      // do not check frames cause it could be removed during import\n      if (!global.hasOwnProperty(p) || (!isNaN(p) && p < global.length))\n        continue;\n      if (!firstGlobalProp)\n        firstGlobalProp = p;\n      else if (!secondGlobalProp)\n        secondGlobalProp = p;\n      lastGlobalProp = p;\n    }\n    return lastGlobalProp;\n  }\n\n  const impt = systemJSPrototype.import;\n  systemJSPrototype.import = function (id, parentUrl) {\n    noteGlobalProps();\n    return impt.call(this, id, parentUrl);\n  };\n\n  const emptyInstantiation = [[], function () { return {} }];\n\n  const getRegister = systemJSPrototype.getRegister;\n  systemJSPrototype.getRegister = function () {\n    const lastRegister = getRegister.call(this);\n    if (lastRegister)\n      return lastRegister;\n    \n    // no registration -> attempt a global detection as difference from snapshot\n    // when multiple globals, we take the global value to be the last defined new global object property\n    // for performance, this will not support multi-version / global collisions as previous SystemJS versions did\n    // note in Edge, deleting and re-adding a global does not change its ordering\n    const globalProp = getGlobalProp();\n    if (!globalProp)\n      return emptyInstantiation;\n    \n    let globalExport;\n    try {\n      globalExport = global[globalProp];\n    }\n    catch (e) {\n      return emptyInstantiation;\n    }\n\n    return [[], function (_export) {\n      return {\n        execute: function () {\n          _export({ default: globalExport, __useDefault: true });\n        }\n      };\n    }];\n  };\n\n  })(typeof self !== 'undefined' ? self : global);\n\n  /*\n   * Loads WASM based on file extension detection\n   * Assumes successive instantiate will handle other files\n   */\n  const instantiate = systemJSPrototype.instantiate;\n  systemJSPrototype.instantiate = function (url, parent) {\n    if (url.slice(-5) !== '.wasm')\n      return instantiate.call(this, url, parent);\n    \n    return fetch(url)\n    .then(function (res) {\n      if (!res.ok)\n        throw Error(res.status + ' ' + res.statusText + ' ' + res.url + (parent ? ' loading from ' + parent : ''));\n\n      if (WebAssembly.compileStreaming)\n        return WebAssembly.compileStreaming(res);\n      \n      return res.arrayBuffer()\n      .then(function (buf) {\n        return WebAssembly.compile(buf);\n      });\n    })\n    .then(function (module) {\n      const deps = [];\n      const setters = [];\n      const importObj = {};\n\n      // we can only set imports if supported (eg early Safari doesnt support)\n      if (WebAssembly.Module.imports)\n        WebAssembly.Module.imports(module).forEach(function (impt) {\n          const key = impt.module;\n          setters.push(function (m) {\n            importObj[key] = m;\n          });\n          if (deps.indexOf(key) === -1)\n            deps.push(key);\n        });\n\n      return [deps, function (_export) {\n        return {\n          setters: setters,\n          execute: function () {\n            return WebAssembly.instantiate(module, importObj)\n            .then(function (instance) {\n              _export(instance.exports);\n            });\n          }\n        };\n      }];\n    });\n  };\n\n  /*\n   * Import map support for SystemJS\n   * \n   * <script type=\"systemjs-importmap\">{}</script>\n   * OR\n   * <script type=\"systemjs-importmap\" src=package.json></script>\n   * \n   * Only those import maps available at the time of SystemJS initialization will be loaded\n   * and they will be loaded in DOM order.\n   * \n   * There is no support for dynamic import maps injection currently.\n   */\n\n  const baseMap = Object.create(null);\n  baseMap.imports = Object.create(null);\n  baseMap.scopes = Object.create(null);\n  let importMapPromise = Promise.resolve(baseMap);\n  let acquiringImportMaps = typeof document !== 'undefined';\n\n  if (acquiringImportMaps) {\n    Array.prototype.forEach.call(document.querySelectorAll('script[type=\"systemjs-importmap\"][src]'), function (script) {\n      script._j = fetch(script.src).then(function (resp) {\n        return resp.json();\n      });\n    });\n  }\n\n  function mergeImportMap(originalMap, newMap) {\n    for (let i in newMap.imports) {\n      originalMap.imports[i] = newMap.imports[i];\n    }\n    for (let i in newMap.scopes) {\n      originalMap.scopes[i] = newMap.scopes[i];\n    }\n    return originalMap;\n  }\n\n  systemJSPrototype.acquireImportMaps = function () {\n      return document.querySelectorAll('script[type=\"systemjs-importmap\"]')\n  };\n\n  systemJSPrototype.resolve = function (id, parentUrl) {\n    parentUrl = parentUrl || baseUrl;\n\n    if (acquiringImportMaps) {\n      acquiringImportMaps = false;\n      Array.prototype.forEach.call(this.acquireImportMaps(), function (script) {\n        importMapPromise = importMapPromise.then(function (map) {\n          return (script._j || script.src && fetch(script.src).then(function (resp) {return resp.json()}) || Promise.resolve(JSON.parse(script.innerHTML)))\n          .then(function (json) {\n            return mergeImportMap(map, parseImportMap(json, script.src || baseUrl));\n          });\n        });\n      });\n    }\n\n    return importMapPromise\n    .then(function (importMap) {\n      return resolveImportMap(id, parentUrl, importMap);\n    });\n  };\n\n  const toStringTag$1 = typeof Symbol !== 'undefined' && Symbol.toStringTag;\n\n  systemJSPrototype.get = function (id) {\n    const load = this[REGISTRY][id];\n    if (load && load.e === null && !load.E) {\n      if (load.er)\n        return null;\n      return load.n;\n    }\n  };\n\n  systemJSPrototype.set = function (id, module) {\n    let ns;\n    if (toStringTag$1 && module[toStringTag$1] === 'Module') {\n      ns = module;\n    }\n    else {\n      ns = Object.assign(Object.create(null), module);\n      if (toStringTag$1)\n        Object.defineProperty(ns, toStringTag$1, { value: 'Module' });\n    }\n    const done = Promise.resolve(ns);\n    this.delete(id);\n    this[REGISTRY][id] = {\n      id: id,\n      i: [],\n      n: ns,\n      I: done,\n      L: done,\n      h: false,\n      d: [],\n      e: null,\n      er: undefined,\n      E: undefined,\n      C: done\n    };\n    return ns;\n  };\n\n  systemJSPrototype.has = function (id) {\n    const load = this[REGISTRY][id];\n    return load && load.e === null && !load.E;\n  };\n\n  // Delete function provided for hot-reloading use cases\n  systemJSPrototype.delete = function (id) {\n    const load = this.get(id);\n    if (load === undefined)\n      return false;\n    // remove from importerSetters\n    // (release for gc)\n    if (load && load.d)\n      load.d.forEach(function (depLoad) {\n        const importerIndex = depLoad.i.indexOf(load);\n        if (importerIndex !== -1)\n          depLoad.i.splice(importerIndex, 1);\n      });\n    return delete this[REGISTRY][id];\n  };\n\n  const iterator = typeof Symbol !== 'undefined' && Symbol.iterator;\n\n  systemJSPrototype.entries = function () {\n    const loader = this, keys = Object.keys(loader[REGISTRY]);\n    let index = 0, ns, key;\n    const result = {\n      next: function () {\n        while (\n          (key = keys[index++]) !== undefined && \n          (ns = loader.get(key)) === undefined\n        );\n        return {\n          done: key === undefined,\n          value: key !== undefined && [key, ns]\n        };\n      }\n    };\n\n    result[iterator] = function() { return this };\n\n    return result;\n  };\n\n}());\n","/*\n * SystemJS named register extension\n * Supports System.register('name', [..deps..], function (_export, _context) { ... })\n * \n * Names are written to the registry as-is\n * System.register('x', ...) can be imported as System.import('x')\n */\n(function () {\n  const systemJSPrototype = System.constructor.prototype;\n\n  const constructor = System.constructor;\n  const SystemJS = function () {\n    constructor.call(this);\n    this.registerRegistry = Object.create(null);\n  };\n  SystemJS.prototype = systemJSPrototype;\n  System = new SystemJS();\n\n  const register = systemJSPrototype.register;\n  systemJSPrototype.register = function (name, deps, declare) {\n    if (typeof name !== 'string')\n      return register.apply(this, arguments);\n\n    this.registerRegistry[name] = [deps, declare];\n\n    // Provide an empty module to signal success.\n    return register.call(this, [], function () { return {}; });\n  };\n\n  const resolve = systemJSPrototype.resolve;\n  systemJSPrototype.resolve = function (id, parentURL) {\n    if (id[0] === '/' || id[0] === '.' && (id[1] === '/' || id[1] === '.' && id[2] === '/'))\n      return resolve.call(this, id, parentURL);\n    if (id in this.registerRegistry)\n      return id;\n    return resolve.call(this, id, parentURL);\n  };\n\n  const instantiate = systemJSPrototype.instantiate;\n  systemJSPrototype.instantiate = function (url, firstParentUrl) {\n    return this.registerRegistry[url] || instantiate.call(this, url, firstParentUrl);\n  };\n})();","\nimport \"@editor/systemjs/dist/system\";\nimport \"@editor/systemjs/dist/extras/named-register\"\n\nconst urlMappings: Record<string, string> = {};\nconst vendorInstantiate = System.constructor.prototype.instantiate;\nSystem.constructor.prototype.instantiate = function(url: string, firstParentUrl?: string) {\n    const realUrl = (url in urlMappings) ? urlMappings[url] : url;\n    return vendorInstantiate.call(this, realUrl, firstParentUrl);\n};\n\n/**\n * Import a module.\n * @param name \n */\nexport function imp(name: string): Promise<any> {\n    return System.import(name);\n}\n\n/**\n * Delete a module.\n * @param name \n */\nexport function del(name: string) {\n    return System.delete(name);\n}\n\n/**\n * The \"type\" property of the HTML script element which is treated as an import map.\n */\nexport const importMapType: string = 'systemjs-importmap';\n\n/**\n * Set the mapping of the specified url to another url.\n * Note, this function is for private use only.\n * @param url \n * @param mapped \n */\nexport function _setUrlMapping(url: string, mapped: string) {\n    urlMappings[url] = mapped;\n}\n\n/**\n * Delete the mapping of the specified url.\n * Note, this function is for private use only.\n * @param url \n */\nexport function _deleteUrlMapping(url: string) {\n    delete urlMappings[url];\n}\n\n/**\n * Register a module who forward all exports from a commonjs module.\n * Note, this function is for private use only.\n * @param aliasUrl The url the result module having.\n * @param requirer The requirer is called to provide the commonjs module.\n */\nexport function _forwardCommonJsModule(aliasUrl: string, requirer: () => any) {\n    System.register(aliasUrl, [], function (_export, _context) {\n        return {\n            setters: [],\n            execute () {\n                const cjsm = requirer();\n                _export(cjsm);\n            },\n        };\n    });\n}"],"names":["hasSelf","self","envGlobal","global","baseUrl","document","baseEl","querySelector","href","location","split","lastSepIndex","lastIndexOf","slice","backslashRegEx","resolveIfNotPlainOrUrl","relUrl","parentUrl","indexOf","replace","length","parentProtocol","pathname","segmented","output","segmentIndex","i","push","pop","join","resolveUrl","resolvePackages","pkgs","outPkgs","p","value","parseImportMap","json","imports","scopes","scopeName","scope","resolvedScopeName","getMatch","path","matchObj","sepIndex","segment","applyPackages","id","packages","pkgName","pkg","console","warn","resolveImportMap","importMap","urlResolved","scopePackages","packageResolution","throwBare","Error","hasSymbol","Symbol","toStringTag","REGISTRY","SystemJS","systemJSPrototype","prototype","loader","Promise","resolve","then","load","getOrCreateLoad","C","topLevelLoad","createContext","parentId","url","onload","lastRegister","register","deps","declare","getRegister","_lastRegister","undefined","firstParentUrl","importerSetters","ns","Object","create","defineProperty","instantiatePromise","instantiate","registration","_export","name","h","changed","declared","importId","meta","e","execute","setters","err","linkPromise","instantiation","all","map","dep","setter","depId","depLoad","I","n","depLoads","d","er","L","E","instantiateAll","loaded","postOrderExec","nullContext","freeze","seen","depLoadPromises","forEach","depLoadPromise","doExec","execPromise","call","System","systemRegister","fetchScript","reject","windowErrorListener","evt","filename","error","window","addEventListener","script","createElement","charset","async","crossOrigin","removeEventListener","head","removeChild","src","appendChild","fetchJson","fetch","resp","text","substr","source","JSON","parse","importScripts","constructor","firstGlobalProp","secondGlobalProp","lastGlobalProp","getGlobalProp","cnt","lastProp","hasOwnProperty","isNaN","noteGlobalProps","impt","emptyInstantiation","globalProp","globalExport","__useDefault","parent","res","ok","status","statusText","WebAssembly","compileStreaming","arrayBuffer","buf","compile","module","importObj","Module","key","m","instance","exports","baseMap","importMapPromise","acquiringImportMaps","Array","querySelectorAll","_j","mergeImportMap","originalMap","newMap","acquireImportMaps","innerHTML","toStringTag$1","get","set","assign","done","has","importerIndex","splice","iterator","entries","keys","index","result","next","registerRegistry","apply","arguments","parentURL","urlMappings","vendorInstantiate","realUrl","imp","del","importMapType","_setUrlMapping","mapped","_deleteUrlMapping","_forwardCommonJsModule","aliasUrl","requirer","_context","cjsm"],"mappings":"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"}