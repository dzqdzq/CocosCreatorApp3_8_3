<!DOCTYPE html>
<html lang="en" spellcheck="false">
    <head>
        <meta charset="utf-8">
        <title>Packages</title>
        <link href="./style/base.css" rel="stylesheet" />
        <link href="./style/main.css" rel="stylesheet" />
        <style>
            body {
                display: flex;
            }

            panel-frame {
                flex: 1;
            }
        </style>
    </head>

    <body name="simple">
        <!-- 同步任务的遮罩 -->
        <editor-mask id="task-sync-mask"></editor-mask>

        <!-- 实际的插件布局 -->
        <panel-frame id="panel"></panel-frame>

        <!-- 加载 js 运行逻辑 -->
        <script>
            // 禁止 electron 显示安全提示
            window.ELECTRON_DISABLE_SECURITY_WARNINGS = true;
            window.__SIMPLE__ = true;
            const { init, registerFindModulePath } = require('../../index');
            init().then(() => {
                const path = require('path');
                const appModulePath = path.join(Editor.App.path, 'node_modules');
                registerFindModulePath((args) => {
                    switch (args[0]) {
                        case '@electron/remote':
                        case 'cc': {
                            args[1].splice(0, 0, appModulePath);
                        }
                    }
                    return args;
                });
                require('./script/simple');
            });
        </script>
    </body>
</html>
