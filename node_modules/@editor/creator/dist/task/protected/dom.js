"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.show=void 0;const i18n=require("@base/electron-i18n");class EditorMaskElement extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n        <style>\n            :host > .background {\n                position: absolute;\n                top: 0;\n                right: 0;\n                bottom: 0;\n                left: 0;\n                z-index: -1;\n                width: 100%;\n                height: 100%;\n                -webkit-user-drag: none;\n            }\n            :host > .image {\n                display: flex;\n                align-items: center;\n                height: 83.3vh;\n            }\n            :host > .image img{\n                display: block;\n                width: 240px;\n                height: 240px;\n                opacity: 0.7;\n                -webkit-user-drag: none;\n            }\n            :host > .info {\n                width: 33.3vw;\n                min-width: 300px;\n                height: 16.6vh;\n                text-align: center;\n                overflow: hidden;\n            }\n            :host .info > .progress {\n                width: 100%;\n                height: 4px;\n                border-radius: 4px;\n                background: #525252ff;\n            }\n            :host .info > .progress .bar {\n                width: 0%;\n                height: 100%;\n                border-radius: 4px;\n                background: #40aacaff;\n            }\n            :host .info > .describe {\n                margin-top: 14px;\n                margin-bottom: 7px;\n                overflow: hidden;\n                white-space: nowrap;\n                text-overflow: ellipsis;\n            }\n            :host .info > .message {\n                line-height: 16px;\n                color: #525252ff;\n                overflow: hidden;\n                white-space: nowrap;\n                text-overflow: ellipsis;\n            }\n        </style>\n        <img class="background" src="./image/splash-bg.png">\n        <div class="image">\n            <img src="./image/splash.png">\n        </div>\n        <div class="info">\n            <div class="progress">\n                <div class="bar"></div>\n            </div>\n            <div class="describe">Wait a moment...</div>\n            <div class="message"></div>    \n        </div>\n        ',this.$describe=this.shadowRoot.querySelector(".describe"),this.$message=this.shadowRoot.querySelector(".message"),this.$bar=this.shadowRoot.querySelector(".bar")}show(i,e){this.$describe.innerHTML=i,this.$message.innerHTML=e,this.removeAttribute("hidden"),this.timeId||(this.time=0,this.progress=0,this.timeId=setInterval(()=>{let i=.01;this.time<30?i=2:this.time<60?i=1:this.time<120&&(i=.1),this.progress+=i,this.time++,this.progress>100&&(this.progress=100,clearInterval(this.timeId),this.timeId=void 0),this.$bar.style.width=`${this.progress}%`},1e3))}hide(){let i=!1;this.timeId&&(i=!0,clearInterval(this.timeId),this.timeId=void 0),this.progress=100,this.$bar.style.width=`${this.progress}%`,setTimeout(()=>{this.setAttribute("hidden","")},i?300:0)}}window.customElements.get("editor-mask")||window.customElements.define("editor-mask",EditorMaskElement);const $mask=document.querySelector("#task-sync-mask"),info={title:"",describe:"",message:""};function show(i,e,t){if($mask)if(window.__MAIN__)if(info.title=i||"",info.describe=e||"",info.message=t||"",i?(e=e?e&&e.startsWith("i18n:")?i18n.translation(info.describe.substr(5)):e:i,info.message&&(t=info.message)):e="",e)$mask.show(e,t||"");else{if("__InitializationTime__"in window)try{const i=window.__InitializationTime__;window.__InitializationTimeEnd__=Date.now();const e=window.__InitializationTimeEnd__-i;console.debug(`main-window:Initialization: ${e}`),Editor.Metrics.trackTimeEnd("main-window:Initialization",{value:e}),Editor.Metrics.trackTimeStart("main-window:ready")}catch(i){console.debug(i)}$mask.hide()}else $mask.hide()}exports.show=show;