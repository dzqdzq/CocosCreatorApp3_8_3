"use strict";var __awaiter=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,s){function i(e){try{a(o.next(e))}catch(e){s(e)}}function c(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}a((o=o.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeListener=exports.emit=exports.once=exports.on=exports.sync=exports.removeSyncTask=exports.hasSyncTask=exports.updateSyncTask=exports.addSyncTask=void 0;const ipc=require("@base/electron-base-ipc"),events_1=require("events"),emmitter=new events_1.EventEmitter,dom_1=require("./dom");function addSyncTask(e,t,n){ipc.sendSync("editor-lib-task:call-protected","addSyncTask",e,t,n)}function updateSyncTask(e,t,n){ipc.sendSync("editor-lib-task:call-protected","updateSyncTask",e,t,n)}function hasSyncTask(){return __awaiter(this,void 0,void 0,function*(){return ipc.sendSync("editor-lib-task:call-protected","hasSyncTask")})}function removeSyncTask(e){ipc.sendSync("editor-lib-task:call-protected","removeSyncTask",e)}function sync(){ipc.send("editor-lib-task:query").callback((e,t,n,o)=>{(0,dom_1.show)(t,n,o)})}function on(e,t){return emmitter.on(e,t)}function once(e,t){return emmitter.once(e,t)}function emit(e,...t){return emmitter.emit(e,...t)}function removeListener(e,t){return emmitter.removeListener(e,t)}(0,dom_1.show)("wait","i18n:startup.wait"),exports.addSyncTask=addSyncTask,exports.updateSyncTask=updateSyncTask,exports.hasSyncTask=hasSyncTask,exports.removeSyncTask=removeSyncTask,exports.sync=sync,exports.on=on,exports.once=once,exports.emit=emit,exports.removeListener=removeListener,"__MAIN__"in window&&(ipc.on("editor-lib-task:show",(e,t,n,o)=>{t?(0,dom_1.show)(t,n,o):(0,dom_1.show)()}),ipc.on("editor-lib-task:emit",(e,t,...n)=>{module.exports.emit(t,...n)}));