"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sendGetRequest=exports.sendPostRequest=void 0;const url_1=require("url"),querystring_1=require("querystring"),https_1=require("https");function sendPostRequest(e,t){return new Promise((r,s)=>{let n=(0,url_1.parse)(e);t=(0,querystring_1.stringify)(t||{});let o={"Content-Type":"application/x-www-form-urlencoded","Content-Length":Buffer.byteLength(t),"User-Agent":Editor.App.userAgent},u={method:"POST",host:n.hostname,port:n.port||443,path:n.pathname,headers:o,ciphers:"ALL"},d="",a=(0,https_1.request)(u,e=>{if(!(e.statusCode>=200&&e.statusCode<300))return s(new Error(`Connect Failed. Status Code: ${e.statusCode}`)),void e.resume();e.on("data",e=>{d+=e}).on("end",()=>{var e=null;try{e=JSON.parse(d)}catch(e){return void s(e)}r(e)})}).on("error",e=>{s(e)}).setTimeout(8e3,()=>{s(new Error("timeout"))});a.write(t),a.end()})}function sendGetRequest(e,t){return new Promise((r,s)=>{var n=(0,url_1.parse)(e);t=(0,querystring_1.stringify)(t||{});var o={"User-Agent":Editor.App.userAgent},u={method:"GET",host:n.hostname,port:n.port||443,path:n.pathname+"?"+t,headers:o,ciphers:"ALL"},d="";(0,https_1.request)(u,e=>{if(!(e.statusCode>=200&&e.statusCode<300))return s(new Error(`Connect Failed. Status Code: ${e.statusCode}`)),void e.resume();e.on("data",e=>{d+=e}).on("end",()=>{var e=null;try{e=JSON.parse(d)}catch(e){return s(e)}r(e)})}).on("error",e=>{s(e)}).setTimeout(8e3,()=>{s(new Error("timeout"))}).end()})}exports.sendPostRequest=sendPostRequest,exports.sendGetRequest=sendGetRequest;