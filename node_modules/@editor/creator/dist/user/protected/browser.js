"use strict";var __awaiter=this&&this.__awaiter||function(e,i,n,t){return new(n||(n=Promise))(function(r,c){function a(e){try{l(t.next(e))}catch(e){c(e)}}function o(e){try{l(t.throw(e))}catch(e){c(e)}}function l(e){var i;e.done?r(e.value):(i=e.value,i instanceof n?i:new n(function(e){e(i)})).then(a,o)}l((t=t.apply(e,i||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.queryLicenseByName=exports.queryLicenseByPluginName=exports.nextInit=exports.init=void 0;const ipc=require("@base/electron-base-ipc"),license_1=require("./license"),flag_protected="editor-lib-user-protected",flag="editor-lib-user";let _initCallback=null;function init(){return new Promise(e=>{_initCallback?(ipc.broadcast(`${flag}:init`),_initCallback=e):e()})}function nextInit(){_initCallback&&_initCallback(),_initCallback=void 0}function queryLicenseByPluginName(e){return __awaiter(this,void 0,void 0,function*(){return license_1.licenseManager.queryLicenseByPluginName(e)})}function queryLicenseByName(e){return __awaiter(this,void 0,void 0,function*(){return license_1.licenseManager.queryLicenseByName(e)})}exports.init=init,exports.nextInit=nextInit,exports.queryLicenseByPluginName=queryLicenseByPluginName,exports.queryLicenseByName=queryLicenseByName,ipc.on(`${flag_protected}:call`,(e,i,...n)=>__awaiter(void 0,void 0,void 0,function*(){const t=module.exports[i];let r;try{r=yield t(...n)}catch(i){return void e.reply(i,null)}e.reply(null,r)}));