"use strict";var __awaiter=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(i,n){function p(e){try{a(o.next(e))}catch(e){n(e)}}function s(e){try{a(o.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(p,s)}a((o=o.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=exports.open=exports.create=exports.getLastEditorVersion=exports.tmpDir=exports.name=exports.uuid=exports.path=exports.type=void 0;const path_1=require("path"),fs_extra_1=require("fs-extra"),path_2=require("path"),ipc=require("@base/electron-base-ipc"),setting=require("@editor/setting");exports.type="3d",exports.path="",exports.uuid="",exports.name="",exports.tmpDir="";const pkgJsonFile=(0,path_1.join)(setting.PATH.PROJECT,"package.json"),pkgJson=(0,fs_extra_1.readJSONSync)(pkgJsonFile);function getLastEditorVersion(){return new Promise((e,t)=>{ipc.send("editor3d-lib-project:call","getLastEditorVersion").callback((r,o)=>{if(r)return t(r);e(o)})})}function create(){ipc.send("editor3d-lib-project:call","create")}function open(e){return __awaiter(this,void 0,void 0,function*(){ipc.send("editor3d-lib-project:call","open",e)})}function add(e){ipc.send("editor3d-lib-project:call","add",e)}exports.path=(0,path_2.normalize)(setting.PATH.PROJECT),exports.uuid=pkgJson.uuid,exports.name=pkgJson.name||"",exports.tmpDir=(0,path_1.join)(exports.path,"temp"),(0,fs_extra_1.ensureDirSync)(exports.tmpDir),exports.getLastEditorVersion=getLastEditorVersion,exports.create=create,exports.open=open,exports.add=add,ipc.on("editor3d-lib-project:update",e=>{module.exports.emit("update")});