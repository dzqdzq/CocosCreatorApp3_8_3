"use strict";var __awaiter=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))(function(i,n){function u(e){try{a(r.next(e))}catch(e){n(e)}}function l(e){try{a(r.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(u,l)}a((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.setImportProjectModuleDelegate=exports.removeCache=exports.importProjectModule=exports.requireFile=void 0;const path_1=require("path"),utils_1=require("./utils");let globalImportProjectModuleDelegate=e=>__awaiter(void 0,void 0,void 0,function*(){throw new Error(`Can not import ${e}. Current environment disallow such imports.`)});function requireFile(e,t){return t&&t.root&&(e=(0,path_1.join)(t.root,e)),e=require.resolve(e),require(e)}function importProjectModule(e){return __awaiter(this,void 0,void 0,function*(){return yield globalImportProjectModuleDelegate(e)})}function removeCache(e){(0,utils_1.removeModuleCache)(e)}function setImportProjectModuleDelegate(e){globalImportProjectModuleDelegate=e}exports.requireFile=requireFile,exports.importProjectModule=importProjectModule,exports.removeCache=removeCache,exports.setImportProjectModuleDelegate=setImportProjectModuleDelegate;