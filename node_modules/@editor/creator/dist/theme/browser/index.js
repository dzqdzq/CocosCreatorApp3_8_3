"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const events_1=require("events"),Metric=require("../../metrics/protected/browser"),Profile=require("@base/electron-profile"),ipc=require("@base/electron-base-ipc"),ps=require("path"),fs=require("fs"),window=require("../../windows"),profile=Profile.load("global://editor/theme.json");class Theme extends events_1.EventEmitter{constructor(){super(),this._name=profile.get("theme")||"default",Metric.trackEvent({category:"Editor",action:"Theme - Init",label:this._name})}getList(){return fs.readdirSync(ps.join(__dirname,"../../../static/theme")).map(e=>{const t=ps.extname(e);return e.replace(t,"")})}use(e){if(!e)return profile.get("theme");let t=ps.join(__dirname,`../../../static/theme/${e}.js`);if(!fs.existsSync(t))return void console.log(`The theme does not exist. Use the default theme.\n  name: ${e}\n  path: ${t}`);profile.get("theme")!==e&&(profile.set("theme",e),profile.save(),ipc.broadcast("editor3d-lib-theme:use",e))}}module.exports=new Theme,module.exports.use(""),ipc.on("editor3d-lib-theme:use",(e,t)=>{module.exports.use(t)});