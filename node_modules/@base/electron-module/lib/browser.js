"use strict";const{EventEmitter:EventEmitter}=require("events"),{ipcMain:ipcMain}=require("electron"),pkg=require("../package.json"),ipcFlag=`${pkg.name}@${pkg.version}`;class Extends extends EventEmitter{constructor(){super(),this._map={}}register(e,r){this._map[e]=r}unregister(e){this._map[e]&&(delete require.cache[this._map[e]],delete this._map[e])}require(e){if(!this._map[e])return null;try{return require(this._map[e])}catch(e){return console.error(e),null}}}module.exports=new Extends,ipcMain.on(`${ipcFlag}:call`,(e,r,...t)=>{module.exports[r](...t)}),ipcMain.on(`${ipcFlag}:file`,(e,r)=>{e.returnValue=module.exports._map[r]});