'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
exports.ObjectRecycler = void 0;
/**
 * 对象回收池
 */
class ObjectRecycler {
    constructor(option) {
        this.objectPool = [];
        this.option = option;
    }
    /**
     * 从对象池获取对象
     * @returns
     */
    acquireObject() {
        if (this.objectPool.length > 0) {
            const object = this.objectPool.pop();
            // 重新初始化对象
            object.initialize();
            return object;
        }
        else {
            // 如果对象池为空，创建一个新对象并初始化
            const obj = this.option.generate();
            obj.initialize();
            return obj;
        }
    }
    /**
     * 回收对象到对象池
     * @param object
     */
    recycleObject(object) {
        // 执行销毁操作，如果需要的话
        if (object.destroy) {
            object.destroy();
        }
        // 放入对象池
        const index = this.objectPool.indexOf(object);
        if (index === -1) {
            this.objectPool.push(object);
        }
    }
}
exports.ObjectRecycler = ObjectRecycler;
