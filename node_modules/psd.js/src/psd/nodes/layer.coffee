_    = require 'lodash'
Node = require '../node.coffee'

module.exports = class Layer extends Node
  type: 'layer'

  hasMask: ->
    if !@layer.adjustments then return false;
    vectorMask = @layer.adjustments.vectorMask;
    vectorStroke = @layer.adjustments.vectorStroke;
    return vectorMask || vectorStroke;

  isEmpty: -> (@width is 0 or @height is 0) and not @hasMask();

  export: ->
    _.merge super(),
      type: 'layer'
      mask: @layer.mask.export()
      text: @get('typeTool')?.export()
      image: {}
