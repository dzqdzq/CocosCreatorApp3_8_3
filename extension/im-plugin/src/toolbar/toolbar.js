const _0x8cfb=["send","-vip-btn","style","join","generateStyle","call","methods","openPanelBtn","isVip","close","innerText","classList","showToolbar","add","addEventListener","newMsgCount","save-toolbar-info","show-panel","click","toString","toolbar","removeBroadcastListener","title",":update-toolbar","path","utf8","contains","readFileSync","Message","setAttribute","__importDefault","-msg-counter","_onUpdateToolbar","./style-generator","remove","ready","removeEventListener","-non-vip-btn-double-digits-msgs","msgCounter","defineProperty","get-saved-toolbar-info","buttonTitle","-non-vip-btn","-toolbar","-hide","./toolbar.html","default"],_0x2be6=(!function(e){for(var t=384;--t;)e.push(e.shift())}(_0x8cfb),function(e,t){return e-=185,_0x8cfb[e]}),_0x5aa042=_0x2be6;var __importDefault=this&&this[_0x5aa042(208)]||function(e){return e&&e.__esModule?e:{default:e}};Object[_0x5aa042(217)](exports,"__esModule",{value:!0}),exports[_0x5aa042(187)]=exports[_0x5aa042(213)]=exports.methods=exports.$=exports[_0x5aa042(227)]=exports.template=void 0;const fs_1=__importDefault(require("fs")),path_1=__importDefault(require(_0x5aa042(202))),style_generator_1=require(_0x5aa042(211)),namespace_1=require("../constant/namespace"),template=fs_1[_0x5aa042(224)][_0x5aa042(205)](path_1.default[_0x5aa042(228)](__dirname,_0x5aa042(223)),_0x5aa042(203)),style=(exports.template=template,style_generator_1[_0x5aa042(229)]()),selector=(exports.style=style,{toolbar:"."+namespace_1.ns+_0x5aa042(221),openPanelBtn:"."+namespace_1.ns+"-btn",msgCounter:"."+namespace_1.ns+_0x5aa042(209)}),methods=(exports.$=selector,{updateToolbar(e={}){var t=_0x5aa042,a=(void 0!==e[t(190)]&&setElementVisibility(this.$[t(198)],e[t(190)]),void 0!==e[t(219)]&&this.$[t(185)][t(207)](t(200),e.buttonTitle),void 0!==e.isVip&&(e[t(186)]?(this.$[t(185)][t(189)][t(212)](namespace_1.ns+t(220)),this.$[t(185)][t(189)][t(191)](namespace_1.ns+t(226))):(this.$[t(185)].classList[t(212)](namespace_1.ns+t(226)),this.$[t(185)][t(189)][t(191)](namespace_1.ns+t(220)))),e[t(193)]),e=(void 0!==a&&(this.$[t(198)][t(189)][t(212)](namespace_1.ns+"-non-vip-btn-single-digit-msgs"),this.$[t(198)][t(189)][t(212)](namespace_1.ns+t(215)),0===a?(setElementVisibility(this.$[t(216)],!1),this.$.msgCounter[t(188)]="0"):(setElementVisibility(this.$[t(216)],!0),this.$[t(216)][t(188)]=99<a?"99":a[t(197)](),e[t(186)]||(10<=a?this.$[t(198)][t(189)][t(191)](namespace_1.ns+t(215)):this.$[t(198)].classList[t(191)](namespace_1.ns+"-non-vip-btn-single-digit-msgs")))),{showToolbar:getElementVisibility(this.$.toolbar),isVip:this.$[t(185)].classList[t(204)](namespace_1.ns+"-vip-btn"),newMsgCount:parseInt(this.$[t(216)][t(188)])||0});Editor[t(206)][t(225)](namespace_1.ns,t(194),e)}});async function ready(){const a=_0x5aa042;this[a(210)]=e=>{var t=a;methods.updateToolbar[t(230)](this,e)},Editor[a(206)].addBroadcastListener(namespace_1.ns+a(201),this[a(210)]),this.$[a(185)][a(192)](a(196),onClickShowPanel);var e=await Editor[a(206)].request(namespace_1.ns,a(218));e&&this._onUpdateToolbar(e)}function close(){var e=_0x5aa042;Editor[e(206)][e(199)](namespace_1.ns+e(201),this._onUpdateToolbar),this.$[e(185)][e(214)]("click",onClickShowPanel)}function setElementVisibility(e,t){var a=_0x5aa042;t?e[a(189)].remove(namespace_1.ns+a(222)):e[a(189)][a(191)](namespace_1.ns+"-hide")}function getElementVisibility(e){var t=_0x5aa042;return!e[t(189)][t(204)](namespace_1.ns+t(222))}function onClickShowPanel(){var e=_0x5aa042;Editor.Message.send(namespace_1.ns,e(195))}exports[_0x5aa042(231)]=methods,exports.ready=ready,exports[_0x5aa042(187)]=close;