"use strict";const _0x1bcce5=_0x58ca;function _0x58ca(t,e){const r=_0x4f54();return(_0x58ca=function(t,e){return t-=177,r[t]})(t,e)}!function(){for(var t=_0x58ca,e=_0x4f54();;)try{if(144359==-parseInt(t(234))+parseInt(t(182))/2*(parseInt(t(197))/3)+parseInt(t(226))/4+-parseInt(t(236))/5+-parseInt(t(231))/6*(parseInt(t(220))/7)+parseInt(t(191))/8+parseInt(t(222))/9*(parseInt(t(216))/10))break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const _0x3f5bda=_0x5a79;function _0x4f54(){const t=["__esModule","upgrade","278698BsdauG","then","817205DIvJjs","download","406170AqHHlZ","sendMsg","./file","complete","name","fs-extra","existsSync","status","1275350dTnnqI","10DWJWcR","getLang","defineProperty","default","46arGcwO","contents","unlinkSync","mkdirs","installed","15348630jULVrD","getCreatorHomePath","progress","push","1359320xKDUUp","710433ypNEDx","35sAlSWZ","path","__importDefault","4578762mpKimy","1623gnJmIO","./util","close-popup","open-popup","basename","require","match","../builtin","shift","getServiceHomePath","join","replace","i18n/en.js","getServicePluginInfo","i18n/zh.js","unzip","package.json",".zip","service-","20ZKFNQR","catch","version","registerI18n","63rpdfzG","1359932gKXeWy","2584593QKWTUf","popup","downloading","author","15492PmPGGM","fail","main","plugin","11fDzwWG","116058tcYoQV"];return(_0x4f54=function(){return t})()}function _0x5a79(t,e){const r=_0x1a90();return(_0x5a79=function(t,e){return t-=471,r[t]})(t,e)}!function(){for(var e=_0x58ca,t=_0x5a79,r=_0x1a90();;)try{if(422113==+parseInt(t(488))*(parseInt(t(506))/2)+-parseInt(t(516))/3+-parseInt(t(511))/4*(-parseInt(t(475))/5)+parseInt(t(492))/6+parseInt(t(505))/7*(parseInt(t(510))/8)+-parseInt(t(512))/9+-parseInt(t(479))/10*(parseInt(t(482))/11))break;r[e(190)](r[e(205)]())}catch(t){r[e(190)](r.shift())}}();var __importDefault=this&&this[_0x3f5bda(497)]||function(t){var e=_0x3f5bda;return t&&t[e(508)]?t:{default:t}};function _0x1a90(){const t=_0x58ca,e=[t(177),t(240),t(232),t(211),"144856mzrzvz",t(221),t(192),t(202),t(214),t(244),t(238),t(186),"./http",t(204),t(198),t(215),t(183),"join","builder",t(203),t(229),t(213),t(201),"default",t(212),t(178),t(210),t(206),t(199),t(187),t(242),t(219),t(230),t(243),t(235),t(188),t(225),t(185),"1HtodWY",t(189),t(194),t(241),t(196),t(239),t(233),t(179),t(217),t(195),"readJson",t(223),t(184),"./editor",t(237),t(209),t(208),t(193)];return(_0x1a90=function(){return e})()}Object[_0x1bcce5(180)](exports,_0x3f5bda(508),{value:!0});const fs_extra_1=require(_0x3f5bda(483)),path_1=require(_0x3f5bda(490)),file_1=__importDefault(require(_0x3f5bda(507))),editor_1=__importDefault(require(_0x3f5bda(501))),util_1=__importDefault(require(_0x3f5bda(520))),http_1=__importDefault(require(_0x3f5bda(518)));exports[_0x3f5bda(473)]={pluginExists:function(t){var e=_0x1bcce5,r=_0x3f5bda;return(0,fs_extra_1[r(515)])((0,path_1[r(523)])(editor_1[r(473)][r(477)](),t[r(504)](r(521),"")))||(0,fs_extra_1[r(515)])((0,path_1[e(207)])("../builtin",t))},getServicePluginInfo:function(e){var r=_0x1bcce5,n=_0x3f5bda;let a=(0,path_1[n(523)])(editor_1[n(473)][n(477)](),e[r(208)](n(521),""));(0,fs_extra_1[n(515)])(a)||(a=(0,path_1[n(523)])(__dirname,n(519),e));e=(0,path_1[n(523)])(a,n(471));if((0,fs_extra_1[n(515)])(e)){var _,e=file_1.default[n(498)](e);if(e[n(480)]===n(521)+(0,path_1[n(472)])(a)||e[n(480)]===(0,path_1[n(472)])(a)){let t="";return e[r(233)]&&(0,fs_extra_1[r(244)])((0,path_1[n(523)])(a,e.upgrade))&&(_=util_1[n(473)][n(513)](a,e[n(494)]),t="zh"===editor_1[n(473)][n(495)]()?_.zh:_.en),{path:a,name:e[n(480)],version:e[r(218)],author:e[n(486)],contents:e[n(522)],builder:e[n(524)],upgrade:t}}}},installPlugin:function(t,r,o){const n=_0x1bcce5,f=_0x3f5bda;let u=editor_1[f(473)][f(477)](),e=(0,path_1[n(207)])(editor_1[f(473)][f(485)](),f(502)),p=((0,fs_extra_1[f(515)])(u)||file_1[f(473)][f(487)](u),(0,fs_extra_1[f(515)])(e)||file_1[f(473)][n(185)](e),(0,path_1[f(523)])(e,t+f(514))),c=0;return new Promise((a,e)=>{const _=n,i=f;let s=(t=_(227))=>{o&&o(t,!0),e(t)};if(!r[i(525)](/^(http|https):\/\/[^\s]*.zip$/))return s();http_1[i(473)][i(502)](r,p,(t,e)=>{const r=_,n=i;if(t||null===e)return s();t=editor_1[n(473)].tr(r(224))+" "+e[n(489)]+"%";if(c!==e[n(489)]&&(c=e[r(189)],o)&&o(t,!1),n(491)===e[r(245)]){if(100!==e[n(489)])return s();file_1[n(473)][n(474)](p,u)[n(484)](()=>{var t=n;(0,fs_extra_1[t(515)])(p)&&(0,fs_extra_1[t(500)])(p),o&&o(editor_1[t(473)].tr(t(517)),!0),a(!0)})[n(496)](()=>s())}})})},openPopup:function(t,e){var r=_0x1bcce5,n=_0x3f5bda,a=this[n(476)](t);void 0!==a&&null!=(a=null==(a=a.contents)?void 0:a[n(499)])&&a[r(228)]&&editor_1[n(473)][n(493)](editor_1[r(181)][n(526)],r(200),t,e)},closePopup:function(t){var e=_0x1bcce5,r=_0x3f5bda,n=this[r(476)](t);void 0!==n&&null!=(n=null==(n=n[r(522)])?void 0:n[r(499)])&&n[e(228)]&&editor_1[r(473)][r(493)](editor_1[r(473)][r(526)],r(478),t)},registerI18n:function(t){var e=_0x1bcce5,r=_0x3f5bda,n=this[e(210)](t);void 0!==n&&((0,fs_extra_1[r(515)])((0,path_1[r(523)])(n[r(490)],r(509)))&&editor_1[r(473)][r(481)]("zh",t,util_1[r(473)][r(513)](n[r(490)],r(509))),(0,fs_extra_1[r(515)])((0,path_1[e(207)])(n[r(490)],r(503))))&&editor_1[r(473)][r(481)]("en",t,util_1[e(181)][r(513)](n[e(194)],r(503)))}};