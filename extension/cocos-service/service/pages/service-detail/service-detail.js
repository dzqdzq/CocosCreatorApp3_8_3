"use strict";function _0x29f9(i,t){var e=_0x5d7b();return(_0x29f9=function(i,t){return e[i-=162]})(i,t)}var _0x5422f1=_0x29f9;function _0x5d7b(){var i=["csUtil","removeAllListeners","__setModuleDefault","writable","enable-service","readFile","opening_service","realname_company_tips","7sLKCGR","getServicePluginInfo","high_verify_tips","292885znzGWx","getUrl","price","all","isUpdate","$root","csLogger","../../../vue","$refs","sample","reloadPlugin","service_dev_url","certificate","isInstall","2990628LsSSrf","pluginReady","configDevUrl","description","service_sample_url","15236586hsmgfy","close","call","openServiceRequestServer","service_component_name","jump","__esModule","guide","gotoSampleUrl","verification_status","8fZlWfk","__importDefault","push","detail","gotoGuideUrl","openService","hasUpdate","debug","package_download_url","name","csAnalytics","hide-loading","service:switch-version","shift","clacVersion","verify_person_tips","realname","41437BkoEMC","version","9152712zGYgAt","cocos_personal_verify_url","disables","dialog_title","shadowRoot","/../../assets/","platform","service_type","not_installed","30awRjFe","cocos_service_open_url","failureOpenService","./service-detail.html","56fRpnUW","indexOf","10093503OrQKtn","service_name","serviceVersion","csEvent","plugin_version","checkServiceWithGame","calcShows","closing_service","41102EulBnG","service_price","extend","corporation_id","doOpenService","getUserInfo","4144344YSeIhU","uninstallPlugin","openCocosUrl","5aQXclB","checkServiceOnGame","servicePlugin","readServiceParam","srv","service_id","installed","emit","afterOpenService","createInnterHTML","then","service_guide_url","Cancel Open!","default","show-confirm","installPlugin","1202284gMNKsI","hasOwnProperty","enable","realname_person_tips","../../../utils","game","29158GrjQJn","service_version_warnning","shows","replaceAppIdOnUrl","is_mobile_company"," - ","pluginExists","UNKNOW","csEditor","enableService","create","service","getGameDetail","app_id","ready","cocos_mobile_bind_company_url","get","hasSwitch","compareVersion","update","getServicePlugin","find","cocos_mobile_bind_personal_url","csProtocol","getOwnPropertyDescriptor","1236928zsXHVt","c_id","warn","require_verify","target","param","checked","32678yHcwxm","btn_cancel","disableService","dialogMsgBox","beforeOpenService","serviceInfo","fail","__createBinding","prototype","show-bind-game","service_protocol","csFile","defineProperty","beforeClickGotoLink","contents","catch"];return(_0x5d7b=function(){return i})()}!function(){for(var i=_0x29f9,t=_0x5d7b();;)try{if(953918==+parseInt(i(224))*(parseInt(i(297))/2)+-parseInt(i(240))/3+parseInt(i(259))/4+-parseInt(i(243))/5*(-parseInt(i(211))/6)+parseInt(i(226))/7+-parseInt(i(290))/8+-parseInt(i(182))/9)break;t.push(t.shift())}catch(i){t.push(t.shift())}}();var _0x57143c=_0x5687,__createBinding=(!function(){for(var t=_0x29f9,i=_0x5687,e=_0x4540();;)try{if(178368==+parseInt(i(217))+parseInt(i(209))/2*(parseInt(i(152))/3)+parseInt(i(185))/4*(parseInt(i(254))/5)+parseInt(i(174))/6+parseInt(i(238))/7*(-parseInt(i(149))/8)+parseInt(i(187))/9+-parseInt(i(213))/10*(parseInt(i(130))/11))break;e[t(194)](e[t(205)]())}catch(i){e.push(e[t(205)]())}}(),this&&this[_0x57143c(216)]||(Object[_0x57143c(137)]?function(i,t,e,s){var r=_0x29f9,a=_0x57143c,n=(void 0===s&&(s=e),Object[r(289)](t,e));n&&!(a(147)in n?!t[r(188)]:n[a(265)]||n[a(229)])||(n={enumerable:!0,get:function(){return t[e]}}),Object[a(129)](i,s,n)}:function(i,t,e,s){i[s=void 0===s?e:s]=t[e]})),__setModuleDefault=this&&this[_0x57143c(240)]||(Object[_0x57143c(137)]?function(i,t){var e=_0x57143c;Object[_0x29f9(309)](i,e(245),{enumerable:!0,value:t})}:function(i,t){i[_0x57143c(245)]=t}),__importStar=this&&this[_0x57143c(153)]||function(i){var t=_0x57143c;if(i&&i[t(205)])return i;var e={};if(null!=i)for(var s in i)t(245)!==s&&Object[t(207)][t(230)][t(175)](i,s)&&__createBinding(e,i,s);return __setModuleDefault(e,i),e},__importDefault=this&&this[_0x57143c(210)]||function(i){return i&&i[_0x57143c(205)]?i:{default:i}};function _0x4540(){var i=_0x29f9,t=[i(171),"1941240pVAVqp","require_verify",i(282),i(220),"__importStar","$data","../../core",i(276),"checkAllowOpenService",i(216),i(314),i(187),i(274),i(179),i(223),i(247),i(272),i(322),i(270),i(311),i(165),i(222),"download_failed",i(181),i(313),"1246704RwlEJv",i(184),i(225),i(291),"switchVersion",i(221),i(242),i(301),"open_service_btn",i(300),i(237),i(192),i(180),i(177),i(167),"version",i(204),"cocos_company_verify_url",i(298),i(195),i(294),i(249),i(246),i(164),i(199),i(207),i(302),i(208),"show-loading",i(186),i(258),i(188),i(295),i(305),i(200),i(234),i(193),"openService",i(264),"1250OXUTRh","length",i(280),i(304),i(265),i(232),i(198),"reloadPlugin","attachShadow",i(250),i(229),i(191),i(206),i(219),i(217),i(266),"configurable",i(260),"app_id",i(162),i(286),i(169),i(296),i(279),i(175),i(321),i(287),i(315),i(202),"switch",i(230),i(172),i(256),i(239),"service_id",i(319),i(168),i(174),i(320),"pluginClose","catch",i(163),i(196),i(215),i(307),i(261),"csEditor",i(228),i(201),"$emit","readPluginInfo",i(166),i(316),i(203),i(310),i(299),"servicePlugin",i(251),"enable-service",i(214),i(284),i(285),i(271),i(253),"shows",i(268),"show-verm",i(309),i(209),"csConfig",i(318),i(263),i(288),i(231),i(292),i(275),i(308),i(257),i(252),i(176),i(189),i(254),i(241),i(190),"verify_tips",i(281)];return(_0x4540=function(){return t})()}function _0x5687(i,t){var e=_0x4540();return(_0x5687=function(i,t){return e[i-=115]})(i,t)}Object[_0x5422f1(309)](exports,_0x57143c(205),{value:!0});const vue_1=__importDefault(require(_0x5422f1(170))),core_1=__importDefault(require(_0x57143c(155))),plugin_1=__importDefault(require("../../core/plugin")),utils_1=__importStar(require(_0x57143c(133)));exports.default=vue_1[_0x5422f1(256)][_0x5422f1(236)]({template:utils_1[_0x57143c(138)][_0x57143c(132)](__dirname,_0x57143c(163)),props:{game:{type:Object,default:()=>({app_id:_0x57143c(165),name:utils_1[_0x57143c(259)].tr("unknow_game"),c_id:"0"})},service:{type:Object}},data(){var i=_0x5422f1,t=_0x57143c;return{enable:!1,srv:this[t(156)],serviceInfo:void 0,servicePlugin:void 0,service_price:this[t(156)][i(235)],param:{},serviceVersion:"",hasUpdate:!1,hasSwitch:!0,shows:{all:!0,name:!0,version:!0,description:!0,jump:!0,price:!0,platform:!0}}},watch:{async game(i){this[_0x57143c(162)]()}},async created(){var i=_0x5422f1,t=_0x57143c;this[t(164)][t(258)]&&(this.enable=this[i(247)][i(261)]&&plugin_1[t(245)][i(271)](this[i(247)][t(203)])),await this[t(263)]();try{this[t(206)]=await utils_1[t(131)][t(196)](this[t(164)][t(247)])}catch(i){utils_1[t(234)][t(198)](i)}this[t(218)](),this[t(262)](t(120),this[t(164)][t(247)],this[t(258)]),this[t(225)](),utils_1[t(223)][t(159)](t(190)),utils_1[t(223)].on(t(190),this[t(178)]),this[t(162)]()},async mounted(){await this[_0x5422f1(178)]()},async destroyed(){await this[_0x57143c(252)]()},methods:{async pluginReady(){var i=_0x5422f1,t=_0x57143c;if(await plugin_1[i(256)][i(173)](this[t(164)][i(186)]),this[i(245)]=plugin_1[i(256)][i(285)](this[t(164)][t(203)],t(193)),this[t(118)]){var e=this[t(148)][t(193)];if(e[t(256)]||(e[t(221)]({mode:"open"}),e.shadowRoot&&plugin_1.default[t(140)](this[t(118)],e[t(256)],this[t(164)][t(203)],t(193))),this[i(245)][t(236)])try{await this[t(118)][t(236)]({game:this[t(212)],service:this[t(164)],param:await utils_1[t(131)][t(196)](this[t(164)][t(247)])})}catch(i){utils_1[t(234)][t(198)](i)}}},async pluginClose(){var i,t=_0x5422f1,e=_0x57143c;null!=(i=this[e(118)])&&i[t(183)]&&await this[e(118)].close()},async readPluginInfo(){var i=_0x5422f1,t=_0x57143c;this[t(200)]=plugin_1[t(245)][t(166)](this[t(156)][t(203)]),this[t(118)]=plugin_1[t(245)][t(123)](this.service[t(203)],t(193)),this[t(260)]=this[i(302)]?this[i(302)][i(210)]:utils_1[t(259)].tr(t(226))},getRealPath:i=>__dirname+_0x57143c(158)+i,configDevUrl(){var i=_0x5422f1,t=_0x57143c;this[t(164)][t(250)]=utils_1[i(313)][t(127)](this[t(164)][i(174)],this[t(212)][t(231)])},calcShows(){var i,t=_0x5422f1,e=_0x57143c;this[e(200)]&&this[t(302)][e(168)]&&this[e(200)][e(168)][e(193)]&&(i=this[e(200)][e(168)][e(193)][t(213)],this[t(267)][e(264)]=void 0===(null==i?void 0:i[t(286)](i=>e(264)===i)),this.shows[e(261)]=void 0===(null==i?void 0:i[e(233)](i=>e(261)===i)),this[e(126)][t(210)]=void 0===(null==i?void 0:i[e(233)](i=>e(189)===i)),this[e(126)].description=void 0===(null==i?void 0:i[e(233)](i=>e(186)===i)),this[e(126)][e(160)]=void 0===(null==i?void 0:i[e(233)](i=>e(160)===i)),this[e(126)][e(169)]=void 0===(null==i?void 0:i[e(233)](i=>e(169)===i)),this[e(126)][e(227)]=void 0===(null==i?void 0:i[e(233)](i=>e(227)===i)))},versionClick(){var i=_0x57143c;utils_1[i(223)][i(222)](i(128),i(242))},updateClick(){var i=_0x57143c;utils_1[i(223)][i(222)](i(128),i(122))},async switchVersion(i,t){var e=_0x5422f1,s=_0x57143c,r=this[e(261)];this[s(161)](!1),plugin_1[s(245)][s(188)]=!0,this.hasSwitch=!1,await plugin_1[s(245)][s(144)](this[s(164)][s(203)]),this[s(151)]=!0;try{await this[s(204)](this[e(247)][s(203)],i)}catch(i){return void utils_1[s(223)][s(222)](s(115))}r?setTimeout(async()=>{var i=e,t=s;await this[t(161)](!0),utils_1[t(223)][t(222)](t(115)),plugin_1[i(256)][t(188)]=!1},1e3):utils_1[s(223)][s(222)](e(203))},clacVersion(){var i,t,e=_0x5422f1,s=_0x57143c;this[s(200)]?(i=plugin_1[s(245)].getPluginVerByURL(this[s(164)][s(208)]),t=this[s(200)][s(189)],this[e(198)]=1===utils_1[s(173)][e(283)](i,t),this[s(206)][s(243)]&&this[e(295)].plugin_version!==this[s(200)][e(210)]&&this[s(258)]&&utils_1[s(234)][s(136)](this[s(164)][e(227)]+s(167)+utils_1[s(259)].tr(s(228)))):this[s(219)]=!1},async checkServiceOnGame(){var i=_0x5422f1,t=_0x57143c;return"0"===this[t(164)].service_type||0<=(await utils_1[t(134)][i(277)](this[i(264)][t(231)])).service[t(176)](this[i(247)][t(247)])},async checkAllowOpenService(){var c=_0x5422f1,l=_0x57143c;if(l(165)===this[c(264)][l(231)]&&"0"!==this[l(164)][c(218)])return utils_1[l(223)][c(250)](c(306),l(193)),!1;if(!this[l(249)][l(135)](this.game,this[l(164)]))return!1;if(0===this[c(247)][c(293)])return!0;{let i=await utils_1[c(288)][l(246)](),t=1==(1&i[l(224)]),e=2==(2&i[c(191)]),s=4==(4&i[l(224)]),r="",a="",n="",_=!0;return"0"!==this[l(212)][l(177)]?1===this[l(164)][l(150)]&&0===i[c(269)]?(r=await core_1[l(245)][l(197)](l(215)),a=utils_1[l(259)].tr(l(251)),n=utils_1[l(259)].tr(l(201)),_=!1):2!==this[l(164)][l(150)]||e?3!==this[l(164)][l(150)]||s||(r=await core_1[l(245)].getUrl(l(191),{corporation_id:i[l(184)],verifyLevel:1}),a=utils_1[l(259)].tr(l(232)),n=utils_1.csEditor.tr(c(175)),_=!1):(r=await core_1[l(245)][c(164)](l(191),{corporation_id:i[l(184)]}),a=utils_1[c(273)].tr(l(146)),n=utils_1.csEditor.tr(l(237)),_=!1):1===this[l(156)][c(293)]&&0===i.is_mobile?(r=await core_1[l(245)][c(164)](l(239)),a=utils_1[c(273)].tr(c(262)),n=utils_1[l(259)].tr(l(201)),_=!1):1===this[l(156)][c(293)]||t||(r=await core_1[c(256)][l(197)](c(212)),a=utils_1[l(259)].tr(l(199)),n=utils_1[l(259)].tr(l(237)),_=!1),!!_||(0===await utils_1[l(259)][l(183)](l(136),a,utils_1[l(259)].tr(l(121)),[n,utils_1[c(273)].tr(l(192))],0)&&utils_1[l(245)][l(180)](r),!1)}},async installPlugin(l,i){return new Promise((r,a)=>{var n=_0x29f9,_=_0x5687;let c=utils_1[n(273)].tr(_(195));plugin_1[n(256)][_(141)]=!0,plugin_1[_(245)][_(204)](l,i,async(i,t)=>{var e=n,s=_;if(utils_1.csEvent[s(222)](s(202),i),!t&&e(303)===i)return utils_1[s(234)][e(292)](utils_1[s(259)].tr(s(171))),a(i);i===c&&(await plugin_1[s(245)][s(220)](l),await this[s(263)](),await this[e(178)](),this[e(206)](),r(!0)),plugin_1[e(256)][s(141)]=!1})[n(312)](i=>(utils_1[_(234)].warn(utils_1[_(259)].tr(_(171))),a(i)))})},async enableService(a){return new Promise((e,i)=>{var s=_0x29f9,r=_0x5687;this[r(262)](s(317),this[s(247)][r(247)],a,!0,()=>{var i=s,t=r;a?utils_1.csAnalytics[i(274)]():utils_1[t(241)][t(117)](),this[t(258)]=a,e()})})},async doOpenService(){var i=_0x5422f1,e=_0x57143c;return utils_1[e(241)][i(197)](),new Promise((t,s)=>{var r=i,a=e;utils_1[r(288)][a(211)](this[a(212)][r(278)],this[a(164)][r(248)])[a(125)](i=>{t()})[a(253)](async i=>{var t=r,e=a;this[e(118)]&&this[t(245)][e(170)]&&await(null==(t=this[t(245)])?void 0:t[e(170)]({service:this[e(164)],reason:i})),s(i)})})},async openServiceRequestServer(){return new Promise((s,r)=>{var a=_0x29f9,n=_0x5687;0!==this[a(247)][a(307)][n(214)]?utils_1[n(223)][n(222)](n(139),utils_1[n(259)].tr(n(257)),this[n(164)].service_protocol,[utils_1[n(259)].tr(n(182)),utils_1[a(273)].tr(n(192))],0,i=>{var t=a,e=n;if(0!==i)return r(new Error(t(255)));utils_1[e(223)].emit(e(202),utils_1[t(273)].tr(t(319))),this[t(238)]()[e(125)](s)[t(312)](r)}):this[a(238)]()[a(253)](s)[n(253)](r)})},async handleEnabelService(i){var t=_0x5422f1,e=_0x57143c;if(i[e(194)][e(235)]=this[e(258)],this[e(258)])utils_1[e(223)][e(222)](e(202),utils_1[e(259)].tr(t(233))),await this[e(161)](!1),utils_1[e(223)].emit(e(115));else if(await this[e(157)]()){if(!plugin_1[e(245)][e(124)](this[e(164)][e(203)]))try{await this[e(204)](this[e(164)][t(186)],this[e(164)][e(208)]),utils_1[e(223)][e(222)](e(115))}catch(i){return void utils_1[e(223)][e(222)](e(115))}if(null==(i=this[e(118)])||!i[t(301)]||await(null==(i=this[e(118)])?void 0:i[e(181)](this[e(164)]))){if(await this[t(244)]())utils_1[e(223)][t(250)](e(202),utils_1[e(259)].tr(e(248)));else try{await this[t(185)]()}catch(i){return void utils_1[e(223)][e(222)](e(115))}await this[e(161)](!0),null!=(i=this[e(118)])&&i[e(119)]&&await(null==(t=this[e(118)])?void 0:t[e(119)](this[e(164)])),utils_1[e(223)][e(222)](e(115))}}},async handleGotoLink(i){var t,e=_0x5422f1,s=_0x57143c;switch(i){case s(142):t=this[s(156)][s(143)],utils_1.csAnalytics[s(255)](t);break;case"dev":t=this[e(276)][s(250)],utils_1[s(241)].gotoDashboardUrl(t);break;case s(244):t=this[s(156)][s(172)],utils_1[s(241)][s(145)](t)}this[s(118)]&&this[s(118)][e(310)]&&!await(null==(i=this[s(118)])?void 0:i[s(116)](t))||utils_1[s(245)][s(180)](t)},async gotoService(){var i=_0x5422f1,t=_0x57143c,e=this[t(249)][t(154)][i(264)][i(278)],s=this.$root[t(154)][t(212)][i(291)]||0;utils_1[t(245)][i(242)](await core_1[t(245)][t(197)](t(179),{app_id:e,target:s}))}}});