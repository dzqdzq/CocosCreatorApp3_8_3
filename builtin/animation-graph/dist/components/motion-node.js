"use strict";function data(){return{}}function mounted(){this.resize()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mounted=exports.methods=exports.watch=exports.computed=exports.components=exports.data=exports.props=exports.template=void 0,exports.template=`
    <div class="state"
        :style="style"
        @mousedown="mouseDown($event)"
        @dragenter="dragEnter($event)"
        @dragleave="dragLeave($event)"
        @drop="drop($event)"
    >
        <ui-label ref="name" class="name"
            :value="dump.name"
        ></ui-label>
        <motion-prop
            :dump=dump
        ></motion-prop>
    </div>
`,exports.props=["dump"],exports.data=data,exports.components={"motion-prop":require("./motion-prop")},exports.computed={style(){return{top:this.dump.top+"px",left:this.dump.left+"px"}}},exports.watch={dump(){this.resize()}},exports.methods={resize(){const t=this;window.requestAnimationFrame(()=>{t.setPosition()})},mouseDown(t){const a=this;function o(t){var e,o,n,i;a.mouseDownPoint&&"right"!==a.mouseDownPoint.button&&(t.stopPropagation(),t.preventDefault(),{clientX:n,clientY:i,left:e,top:o}=a.mouseDownPoint,n=t.clientX-n,t=t.clientY-i,Math.abs(n)<4&&Math.abs(t)<4||(a.mouseDownPoint.hasMoved=!0,i=a.$parent.$parent.graph,a.dump.left=e+n/i.scale,a.dump.top=o+t/i.scale))}t.stopPropagation(),a.mouseDownPoint={hasMoved:!1,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,button:0===t.button?"left":"right",left:a.dump.left,top:a.dump.top},document.addEventListener("mousemove",o),document.addEventListener("mouseup",function t(e){a.mouseDownPoint&&("right"===a.mouseDownPoint.button?a.mouseDownPoint.hasMoved||a.contextMenu(a.mouseDownPoint):a.mouseDownPoint.hasMoved?a.$root.moveMotion(a.dump.level,{editorData:a.getCenterXY()}):a.$parent.select(a.dump)),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",t),a.mouseDownPoint=null})},contextMenu(){const t=this;var e=[];const o=t.getCenterXY(),n=(o.centerX+=50,o.centerY+=50,t.$root.queryData.envType);t.dump.type!==n.AnimationBlend1D&&t.dump.type!==n.AnimationBlend2D||e.push({label:Editor.I18n.t("animation-graph.motion.addAnim"),click(){t.$root.addMotionToMotion(t.dump.level,{type:n.ClipMotion,editorData:o})}},{label:Editor.I18n.t("animation-graph.motion.add1D"),click(){t.$root.addMotionToMotion(t.dump.level,{type:n.AnimationBlend1D,editorData:o})}},{label:Editor.I18n.t("animation-graph.motion.add2D"),click(){t.$root.addMotionToMotion(t.dump.level,{type:n.AnimationBlend2D,editorData:o})}}),0<e.length&&e.push({type:"separator"}),1!==t.dump.level.length&&e.push({label:Editor.I18n.t("animation-graph.motion.remove"),click(){t.$root.removeMotionInMotion(t.dump.level)}}),Editor.Menu.popup({menu:e})},getCenter(){var t=this,e=t.$el.offsetWidth,o=t.$el.offsetHeight;return{left:t.dump.left+e/2,top:t.dump.top+o/2}},setPosition(){var t=this,e=(t.dump.width=t.$el.offsetWidth,t.dump.height=t.$el.offsetHeight,t.$parent.getPosition({width:t.dump.width,height:t.dump.height,centerX:t.dump.editorData.centerX,centerY:t.dump.editorData.centerY}));t.dump.top=e.top,t.dump.left=e.left},getCenterXY(){var t=this;return t.$parent.getCenterXY({width:t.dump.width,height:t.dump.height,left:t.dump.left,top:t.dump.top})},changeMotionValue(t,e,o){var n=this,i=n.$root.queryData.envType,a=t.target.value;switch(e.type){case i.ClipMotion:n.$root.changeClipMotionInMotion(e.level,a);break;case i.AnimationBlend1D:n.$root.changeAnimationBlend1DInMotion(e.level,o,a);break;case i.AnimationBlend2D:n.$root.changeAnimationBlend2DInMotion(e.level,o,i.animationBlendValue,a)}},dragEnter(t){},dragLeave(t){},drop(t){}},exports.mounted=mounted;