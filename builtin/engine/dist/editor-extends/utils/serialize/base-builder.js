"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Builder=void 0;const serialization_1=require("cc/editor/serialization");class Builder{constructor(i){this._mainBufferBuilder=new serialization_1.BufferBuilder,this.minify=!!i.minify,this.stringify=!("stringify"in i&&!i.stringify),this._useCCON=null!=(i=i.useCCON)&&i}dump(){return this._useCCON?this._dumpAsCCON():this._dumpAsJson()}get hasBinaryBuffer(){return this._useCCON}get mainBufferBuilder(){return this._mainBufferBuilder}_dumpAsJson(){var i=this.finalizeJsonPart();return this.stringify?JSON.stringify(i,null,this.minify?0:2):i}_dumpAsCCON(){var i=this.finalizeJsonPart(),e=this["_mainBufferBuilder"],e=0===e.byteLength?[]:[e.get()];return new serialization_1.CCON(i,e)}}exports.Builder=Builder;