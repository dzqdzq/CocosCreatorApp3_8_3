"use strict";module.exports=function(t){const{Widget:e,UITransform:c,Label:g}=t,l=global.cc,o={TOP:1,MID:2,BOT:4,LEFT:8,CENTER:16,RIGHT:32};e.prototype.setLockTop=function(t){this._setLock(o.TOP,t)},e.prototype.getLockTop=function(){return this._lockFlags&o.TOP},e.prototype.setLockBottom=function(t){this._setLock(o.BOT,t)},e.prototype.getLockBottom=function(){return this._lockFlags&o.BOT},e.prototype.setLockLeft=function(t){this._setLock(o.LEFT,t)},e.prototype.getLockLeft=function(){return this._lockFlags&o.LEFT},e.prototype.setLockRight=function(t){this._setLock(o.RIGHT,t)},e.prototype.getLockRight=function(){return this._lockFlags&o.RIGHT},e.prototype.setLockHorizontalCenter=function(t){this._setLock(o.CENTER,t)},e.prototype.getLockHorizontalCenter=function(){return this._lockFlags&o.CENTER},e.prototype.setLockVerticalCenter=function(t){this._setLock(o.MID,t)},e.prototype.getLockVerticalCenter=function(){return this._lockFlags&o.MID},e.prototype._setLock=function(t,e){e!==0<(this._lockFlags&t)&&(e?this._lockFlags|=t:this._lockFlags&=~t)},e.prototype._adjustWidgetToAllowMovingInEditor=function(e){if(e&l.internal.TransformBit.POSITION&&!l._widgetManager.isAligning){var e=this,o=e.node.getPosition(),i=this._lastPos,o=new l.Vec3(o);o.subtract(i);let t=e.node.parent;var n,s,i=new l.Vec3(1,1,1);e.target&&(t=e.target,l.internal.computeInverseTransForTarget(e.node,t,new l.Vec3,i)),t&&(n=l.internal.getReadonlyNodeSize(t),s=new l.Vec3,0!==n.width&&0!==n.height&&l.Vec3.set(s,o.x/n.width,o.y/n.height,s.z),e.isAlignTop&&!e.getLockTop()&&(e._top-=(e._isAbsTop?o:s).y*i.y),e.isAlignBottom&&!e.getLockBottom()&&(e._bottom+=(e._isAbsBottom?o:s).y*i.y),e.isAlignLeft&&!e.getLockLeft()&&(e._left+=(e._isAbsLeft?o:s).x*i.x),e.isAlignRight&&!e.getLockRight()&&(e._right-=(e._isAbsRight?o:s).x*i.x),e.isAlignHorizontalCenter&&!e.getLockHorizontalCenter()&&(e._horizontalCenter+=(e._isAbsHorizontalCenter?o:s).x*i.x),e.isAlignVerticalCenter&&!e.getLockVerticalCenter()&&(e._verticalCenter+=(e._isAbsVerticalCenter?o:s).y*i.y),this._recursiveDirty(),e.node.getPosition(e._lastPos))}},e.prototype._adjustWidgetToAllowResizingInEditor=function(){if(!l._widgetManager.isAligning){var e=this,o=e.node.getComponent(c);if(o){var i=o.contentSize,n=this._lastSize,i=new l.Vec3(i.width-n.width,i.height-n.height,0);let t=e.node.parent;var s,r,n=new l.Vec3(1,1,1);e.target&&(t=e.target,l.internal.computeInverseTransForTarget(e.node,t,new l.Vec3,n)),t&&(r=l.internal.getReadonlyNodeSize(t),s=new l.Vec3,0!==r.width&&0!==r.height&&l.Vec3.set(s,i.x/r.width,i.y/r.height,s.z),r=o.anchorPoint,e.isAlignTop&&!e.getLockTop()&&(e._top-=(e._isAbsTop?i:s).y*(1-r.y)*n.y),e.isAlignBottom&&!e.getLockBottom()&&(e._bottom-=(e._isAbsBottom?i:s).y*r.y*n.y),e.isAlignLeft&&!e.getLockLeft()&&(e._left-=(e._isAbsLeft?i:s).x*r.x*n.x),e.isAlignRight&&!e.getLockRight()&&(e._right-=(e._isAbsRight?i:s).x*(1-r.x)*n.x),(o=e.node.getComponent(g))&&0===o.overflow&&e.isAlignRight&&e.isAlignLeft||this._recursiveDirty())}}}};