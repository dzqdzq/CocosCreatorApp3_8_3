"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.update=exports.methods=exports.$=exports.template=exports.listeners=void 0;const Chroma=require("chroma-js");function update(e){var a=this,t=(a._dump=e,a.$this.renderInfo.panel),r=a.$.label;t.setLabel(e,r),a.updateGradient()}function ready(){}exports.listeners={change(e){var a=this,{alpha:e,color:t}=e.target.value;const r=(e||[]).map(e=>({time:e.progress,alpha:Math.round(255*e.value)})),o=(t||[]).map(e=>{let a;try{a=Chroma(e.value).rgb()}catch(e){a=[255,255,255]}return{time:e.progress,color:a}});a._dump.value.alphaKeys=r,a._dump.value.colorKeys=o,"values"in a._dump&&a._dump.values.forEach(e=>{e.alphaKeys=r,e.colorKeys=o})},cancel(e){exports.listeners.change.call(this,e)}},exports.template=`
<ui-label slot="label"></ui-label>
<ui-gradient slot="content"></ui-gradient>
`,exports.$={label:"ui-label",gradient:"ui-gradient"},exports.methods={updateGradient(){var e=this,a=(e._dump.value.alphaKeys||[]).map(e=>(void 0===e.time&&(e.time=0),void 0===e.alpha&&(e.alpha=255),{progress:e.time,value:e.alpha/255})),t=(e._dump.value.colorKeys||[]).map(e=>{void 0===e.time&&(e.time=0),void 0===e.color&&(e.color=[255,255,255]);let a="";try{a=Chroma(e.color).hex()}catch(e){a="#ffffff"}return{progress:e.time,value:a}});e.$.gradient.value={color:t,alpha:a}}},exports.update=update,exports.ready=ready;