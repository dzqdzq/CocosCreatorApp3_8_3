"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.update=exports.methods=exports.$=exports.template=void 0;const modeTransformMap={"0 -> 3":["constant","constantMin"],"3 -> 0":["constantMin","constant"],"1 -> 2":["spline","splineMin"],"2 -> 1":["splineMin","spline"]},ChangeToCurveRange="change-to-curve-range";function update(e){var a=this,t=(a._dump=e,a.$this.renderInfo.panel),n=a.$.label;t.setLabel(e,n),a.updateProps()}function ready(){const n=this;n.$.mode.addEventListener("click",()=>{Editor.Menu.popup({menu:n._dump.value.mode.enumList.map(t=>({label:t.name,type:"radio",enabled:!n._dump.readonly,checked:t.value===n._dump.value.mode.value,click(){const a=modeTransformMap[n._dump.value.mode.value+" -> "+t.value];n._dump.value.mode.value=t.value,a&&(n._dump.value[a[1]].value=n._dump.value[a[0]].value),"values"in n._dump&&(n._dump.values.forEach(e=>{e.mode.value=t.value,a&&(e[a[1]].value=e[a[0]].value)}),n._dump.value.mode.values=n._dump.value.mode.values.map(e=>t.value)),n.$.mode.dump=n._dump.value.mode,n.updateProps();var e=document.createEvent("HTMLEvents");e.initEvent("change-dump",!0,!0),a&&Array.from(n.$.section.querySelectorAll("ui-prop"))[0].dispatchEvent(e),n.$.mode.dispatchEvent(e)}}))})})}exports.template=`
<ui-label slot="label"></ui-label>
<section slot="content" style="--ui-prop-label-width-min: 90px;"></section>
<ui-icon value="arrow-triangle" slot="content" style="flex: none;"></ui-icon>
`,exports.$={label:"ui-label",section:"section",mode:"ui-icon"},exports.methods={updateProps(){var e=this;const a=e._dump;if(a.values&&a.values.some(e=>e.mode.value!==a.value.mode.value))e.$.section.innerText="Cannot edit different types";else{var t={min:a.min,max:a.max,radian:a.radian,multiplier:a.value.multiplier.value},n={multiplier:a.value.multiplier.value,min:null!=(i=a.min)?i:Number.NEGATIVE_INFINITY,max:null!=(i=a.max)?i:Number.POSITIVE_INFINITY,radian:a.radian},l=Array.from(e.$.section.children),i=(l.length||(e.$.section.innerText=""),a.path&&a.path.match(/^__comps__\.[0-9]*\.(.*)/));i?i[1]:a.path||a.name;switch(a.value.mode.value){case 0:Object.assign(a.value.constant,n),e.renderPropData(a.value.constant,l[0],!1),l[1]&&e.$.section.removeChild(l[1]);break;case 1:Object.assign(a.value.spline.value,t,{multiplier:a.value.multiplier.value,type:"curve"});var u=e.renderPropData(a.value.spline,l[0],!1);this.bindEventListener(u,a.value.spline.path),l[1]&&e.$.section.removeChild(l[1]);break;case 2:Object.assign(a.value.splineMin.value,t),Object.assign(a.value.splineMax.value,t);var u=e.renderPropData(a.value.splineMin,l[0],!0),s=e.renderPropData(a.value.splineMax,l[1],!0);s.style.marginTop="4px",this.bindEventListener(u,a.value.splineMin.path),this.bindEventListener(s,a.value.splineMax.path);break;case 3:Object.assign(a.value.constantMin,n),Object.assign(a.value.constantMax,n),e.renderPropData(a.value.constantMin,l[0],!0),e.renderPropData(a.value.constantMax,l[1],!0).style.marginTop="4px"}}},bindEventListener(e,a){if(!e.__bind){const n=this.$this;e.addEventListener(ChangeToCurveRange,e=>{var a=e.detail["value"];const t=this._dump;t.value.multiplier.value=a.multiplier,t.values&&t.values.forEach((e,a)=>{0!==a&&(t.values[a]=JSON.parse(JSON.stringify(t.value)))}),e.stopPropagation(),e.preventDefault(),n.dispatch("change")}),e.__bind=!0}},renderPropData(e,a,t){return a||((a=document.createElement("ui-prop")).setAttribute("type","dump"),a.setAttribute(ChangeToCurveRange,""),this.$.section.appendChild(a)),t?a.removeAttribute("no-label"):a.setAttribute("no-label",""),a.render(e),a}},exports.update=update,exports.ready=ready;