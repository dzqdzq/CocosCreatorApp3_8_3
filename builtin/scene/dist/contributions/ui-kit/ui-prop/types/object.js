"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.close=exports.ready=exports.update=exports.methods=exports.$=exports.style=exports.template=void 0;const i18nPrefix="i18n:";function update(o){const i=this,n=i.$this.renderInfo.panel;var e=i.$.label,e=(n.setLabel(o,e),i.$.type.value=": "+o.type,i.$this);e.setAttribute("no-label","");let t="root",r=e.parentElement;for(;r;){if(r.hasAttribute("cache-expand")){t=r.getAttribute("cache-expand")||"";break}r=r.parentElement}var a,p=o.path||o.name+":"+o.type,p=(i.$.container.setAttribute("cache-expand",t+"-"+p),e.hasAttribute("ui-section-config")&&i.$.container.setAttribute("class","config"),i.$.help),e=(o.help&&(p.value=o.help,p.style.display="flex",null!=(e=o.editor))&&e.help&&(p.helpData=o.editor),Object.keys(i.$propList));const l=[];Object.keys(o.value).forEach((t,r)=>{var a,p,s=o.value[t];if(s.visible){l.push(t);let e=i.$propList[t];e?e.isConnected&&e.parentElement||(s.group&&o.groups?({id:a="default",name:p}=s.group,i.appendChildByDisplayOrder(i.$groups[a].names[p],e)):i.appendChildByDisplayOrder(i.$.container,e)):((e=document.createElement("ui-prop")).setAttribute("type","dump"),i.$propList[t]=e,t=null!=(p=null==(a=s.group)?void 0:a.displayOrder)?p:s.displayOrder,e.displayOrder=void 0===t?r:Number(t),s.group&&o.groups?({id:a="default",name:p}=s.group,!i.$groups[a]&&o.groups[a]&&("tab"===o.groups[a].style?i.$groups[a]=i.createTabGroup(o.groups[a]):"section"===o.groups[a].style&&(i.$groups[a]=i.createGroup(o.groups[a]))),i.$groups[a]&&(i.$groups[a].isConnected||i.appendChildByDisplayOrder(i.$.container,i.$groups[a]),"tab"===o.groups[a].style?i.appendToTabGroup(i.$groups[a],p):"section"===o.groups[a].style&&i.appendToGroup(i.$groups[a],p)),"tab"===o.groups[a].style?i.appendChildByDisplayOrder(i.$groups[a].tabs[p],e):"section"===o.groups[a].style&&i.appendChildByDisplayOrder(i.$groups[a].names[p],e)):i.appendChildByDisplayOrder(i.$.container,e)),e.render(s),n.setReadonly(s,e)}});for(const s of e)l.includes(s)||(a=i.$propList[s])&&a.parentElement&&a.parentElement.removeChild(a);i.toggleGroup(i.$groups)}function ready(){this.$propList={},this.$groups={},this.$.help.addEventListener("click",e=>{e.stopPropagation()})}function close(){for(const e in this.$groups)this.$groups[e].remove();this.$groups={}}exports.template=`
<ui-section expand>
    <div slot="header" style="overflow: hidden;">
        <ui-label name style="white-space: nowrap;"></ui-label>
        <ui-label type style="white-space: nowrap;opacity: 0.55;margin-left: 4px;flex:auto;font-weight:normal;"></ui-label>
        <ui-link style="display: none" tooltip="i18n:scene.menu.help_url">
            <ui-icon value="help"><ui-icon>
        </ui-link>
    </div>
</ui-section>
`,exports.style=`
:host { margin-left: 0; }
`,exports.$={container:"ui-section",label:"ui-label[name]",type:"ui-label[type]",help:"ui-link"},exports.methods={createGroup(e){var t=document.createElement("div");return t.setAttribute("class","ui-prop-group"),t.dump=e,t.names={},t.displayOrder=e.displayOrder,t},createTabGroup(e){const r=document.createElement("div");function t(e){const t=Object.keys(r.tabs)[e];r.childNodes.forEach(e=>{e.classList.contains("tab-content")&&(e.getAttribute("name")===t?e.style.display="block":e.style.display="none")})}return r.setAttribute("class","tab-group"),r.dump=e,r.tabs={},r.displayOrder=e.displayOrder,r.$header=document.createElement("ui-tab"),r.$header.setAttribute("class","tab-header"),r.appendChild(r.$header),r.$header.addEventListener("change",e=>{t(e.target.value)}),setTimeout(()=>{t(0)}),r},appendToGroup(a,p){if(!a.names[p]){var s=document.createElement("ui-section");s.setAttribute("class","ui-prop-group-content"),s.setAttribute("expand","");let e="ui-prop-group-content",t=a;for(;t;){if(t.hasAttribute("cache-expand")){e=t.getAttribute("cache-expand");break}t=t.parentElement}s.setAttribute("cache-expand",e+"-"+p);var o=document.createElement("ui-label");o.setAttribute("slot","header");let r=p;r=r.startsWith(i18nPrefix)?this.getName({displayName:p}):this.getName({name:p}),o.setAttribute("value",r),s.appendChild(o),a.appendChild(s),a.names[p]=s}},appendToTabGroup(t,r){if(!t.tabs[r]){var a=document.createElement("div"),a=((t.tabs[r]=a).setAttribute("class","tab-content"),a.setAttribute("name",r),t.appendChild(a),document.createElement("ui-label"));let e=r;e=e.startsWith(i18nPrefix)?this.getName({displayName:r}):this.getName({name:r}),a.setAttribute("value",e);var p=document.createElement("ui-button");p.setAttribute("name",r),p.appendChild(a),t.$header.appendChild(p)}},appendChildByDisplayOrder(e,t){const r=t.displayOrder||0;var a=Array.from(e.children).find(e=>e.dump&&e.displayOrder>r?e:null);a?a.before(t):e.appendChild(t)},toggleGroup(e){for(const t in e)"section"===e[t].dump.style&&e[t].querySelectorAll(".ui-prop-group-content").forEach(e=>{Array.from(e.querySelectorAll(":scope > ui-prop")).some(e=>"none"!==getComputedStyle(e).display)?e.removeAttribute("hidden"):e.setAttribute("hidden","")}),"tab"===e[t].dump.style&&(Array.from(e[t].querySelectorAll(".tab-content > ui-prop")).some(e=>"none"!==getComputedStyle(e).display)?e[t].removeAttribute("hidden"):e[t].setAttribute("hidden",""))},getName(e){return this.$this.renderInfo.panel.getName(e)||""}},exports.update=update,exports.ready=ready,exports.close=close;