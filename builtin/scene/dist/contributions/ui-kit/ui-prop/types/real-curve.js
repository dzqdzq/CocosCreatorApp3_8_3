"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const defaultCurveConfig={xRange:[0,1],yRange:[0,1],precisionX:4,precisionY:4,showPreWrapMode:!(exports.ready=exports.update=exports.$=exports.style=exports.template=void 0),showPostWrapMode:!0,type:"hermit",negative:!1},ChangeToCurveRange="change-to-curve-range";function update(e){var t=this,a=(t.dump=e,t.$this.renderInfo.panel),n=t.$.label,a=(a.setLabel(e,n),t.$this),n=JSON.parse(JSON.stringify(defaultCurveConfig)),t=t.$.curve;let r=!1;a.hasAttribute(ChangeToCurveRange)?(n.yRange=[null!=(a=e.value.min)?a:-1,null!=(a=e.value.max)?a:1],void 0!==e.value.min&&null!==e.value.min||(r=!0)):(n.yRange=[null!=(a=e.min)?a:-1,null!=(a=e.max)?a:1],void 0!==e.min&&null!==e.min||(r=!0)),n.negative=!(0<=n.yRange[0]&&!1===r),t._config=n,t.setAttribute("label",e.displayName||e.name),t.value=changeDumpValueToCurveValue(e.value)}function changeDumpValueToCurveValue(e){e.radian&&(e.multiplier=1===e.multiplier?180:e.multiplier);let t;return t=Array.isArray(e.keyFrames)?e.keyFrames.map(e=>({inTangent:e.inTangent,outTangent:e.inTangent,point:{x:e.time,y:e.value},interpMode:e.interpMode,tangentWeightMode:e.tangentWeightMode,outTangentWeight:e.outTangentWeight,inTangentWeight:e.inTangentWeight})):[],{postWrapMode:e.postExtrap,preWrapMode:e.preExtrap,keys:t,multiplier:e.multiplier}}function changeCurveValueToDumpValue(e){e.radian&&(e.multiplier=e.multiplier||1);let t;return t=Array.isArray(e.keys)?e.keys.map(e=>({inTangent:e.inTangent,outTangent:e.inTangent,time:e.point.x,value:e.point.y,interpMode:e.interpMode,tangentWeightMode:e.tangentWeightMode,outTangentWeight:e.outTangentWeight,inTangentWeight:e.inTangentWeight})):[],{postExtrap:e.postWrapMode,preExtrap:e.preWrapMode,keyFrames:t,multiplier:e.multiplier}}function ready(){const n=this,r=n.$this;var e=n.$.curve;e.hasBindListener||(e.addEventListener("change",e=>{var t=e.target.value,a=n.dump;t.keys.sort((e,t)=>e.point.x-t.point.x),a.value=changeCurveValueToDumpValue(t),r.hasAttribute(ChangeToCurveRange)?r.dispatch(ChangeToCurveRange,{detail:{value:t,path:a.path,type:a.type}}):r.dispatch("change"),e.stopPropagation(),e.preventDefault()}),e.hasBindListener=!0)}exports.template=`
<ui-label slot="label"></ui-label>
<ui-curve slot="content"></ui-curve>
`,exports.style=`
:host .content::slotted(ui-curve) {
    height: 20px;
    border: var(--color-normal-border) 1px solid;
    box-sizing: border-box;
    background: var(--color-normal-fill-emphasis);
    cursor: pointer;
}
`,exports.$={curve:"ui-curve",label:"ui-label"},exports.update=update,exports.ready=ready;