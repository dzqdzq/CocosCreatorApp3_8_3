"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getName=exports.setVecInput=exports.setLabel=exports.setReadonly=exports.setInvalid=exports.update=exports.ready=exports.listeners=exports.template=void 0,exports.template="",exports.listeners={change(e){var t=this;t.__info__&&t.__info__.listeners&&t.__info__.listeners.change&&t.__info__.listeners.change.call(t.__infoThis__,e),t.$this.dump&&t.$this.dispatch("change-dump",{detail:e.detail}),e.stopPropagation(),e.preventDefault()},confirm(e){var t=this;t.__info__&&t.__info__.listeners&&t.__info__.listeners.confirm&&t.__info__.listeners.confirm.call(t.__infoThis__,e),t.$this.dump&&t.$this.dispatch("confirm-dump"),e.stopPropagation(),e.preventDefault()},cancel(e){var t=this;t.__info__.listeners&&t.__info__.listeners.cancel&&t.__info__.listeners.cancel.call(t.__infoThis__,e),t.$this.dump&&t.$this.dispatch("change-dump"),e.stopPropagation(),e.preventDefault()},preview(e){var t,i;this.$this.dump&&({method:t,value:i}=e.detail,this.$this.dispatch("preview-dump",{detail:{method:t,value:i}})),e.stopPropagation(),e.preventDefault()},create(e){this.$this.dump&&this.$this.dispatch("create-dump"),e.stopPropagation(),e.preventDefault()},reset(e){this.$this.dump&&this.$this.dispatch("reset-dump"),e.stopPropagation(),e.preventDefault()}};const elements={objectOptionalTypes:require("./types/object-optional-types"),Array:require("./types/array"),Unknown:require("./types/unknown"),Null:require("./types/null"),Number:require("./types/number"),Float:require("./types/number"),Integer:require("./types/number"),Boolean:require("./types/boolean"),String:require("./types/string"),Enum:require("./types/enum"),BitMask:require("./types/bit-mask"),"cc.Object":require("./types/object"),"cc.Color":require("./types/color"),"cc.Size":require("./types/size"),"cc.Vec2":require("./types/vec2"),"cc.Vec3":require("./types/vec3"),"cc.Vec4":require("./types/vec4"),"cc.Quat":require("./types/vec4"),"cc.Rect":require("./types/rect"),"cc.Mat4":require("./types/mat4"),"cc.AnimationCurve":require("./types/real-curve"),"cc.RealCurve":require("./types/real-curve"),"cc.CurveRange":require("./types/curve-range"),"cc.Gradient":require("./types/gradient"),"cc.GradientRange":require("./types/gradient-range"),"cc.SkeletalAnimation.Socket":require("./types/animation-socket"),"sp.Skeleton.SpineSocket":require("./types/animation-socket"),"dragonBones.ArmatureDisplay.DragonBoneSocket":require("./types/animation-socket"),"cc.ClickEvent":require("./types/click-event"),"cc.Node":require("./types/node"),"cc.Asset":require("./types/asset"),"cc.Component":require("./types/component")},checkValueMatchType={basicStackTypes:["Array","Object","Map","WeakMap","Set","WeakSet"],basicTypesLegalCCTypes:{Number:["Number","Float","Integer","BitMask","Enum"],Boolean:["Boolean","Enum"],String:["String","Enum"]},isLegal(e){var t=this.getBasicType(e.value),i="Null"===t,r="Object"===t,s=this.basicTypesLegalCCTypes[t];if(s&&!s.includes(e.type))return!1;if(void 0!==e.default){var n=this.getBasicType(e.default),a="Null"===n,o="Object"===n;if(a&&s)return!1;s=this.basicTypesLegalCCTypes[n];if(s&&!s.includes(e.type))return!1;if((this.basicStackTypes.includes(t)||this.basicStackTypes.includes(n))&&n!==t)return a&&r||i&&o}return!0},getBasicType(e){e=Object.prototype.toString.call(e).match(/\s([^\]]+)]/);return e&&e[1]||""}};function getElementType(e){let t=e.type;return t="Unknown"===t||(e.isArray?(t="Array",Array.isArray(e.value)&&(t="Array",void 0===e.default||Array.isArray(e.default))||(t="Unknown")):!Array.isArray(e.value)&&checkValueMatchType.isLegal(e)?e.extends&&(e.extends.includes("cc.Node")?t="cc.Node":e.extends.includes("cc.Asset")?t="cc.Asset":e.extends.includes("cc.Component")&&(t="cc.Component")):t="Unknown",(t=e.optionalTypes?"objectOptionalTypes":t)in elements)?t:null===e.value?"Null":"cc.Object"}const i18nPrefix="i18n:";function ready(){}function update(e){var t=this,i=getElementType(e),r=(t.$this.setAttribute("dump",i),e.readonly?t.$this.setAttribute("readonly",!0):t.$this.removeAttribute("readonly"),elements[i]);if("false"!==t.$this.getAttribute("html")){if(t.__info__!==r){r.style=r.style||"";i=t.$this.shadowRoot.querySelector("#custom-style");r.style&&i.innerHTML!==r.style?i.innerHTML=r.style:i.innerHTML="";let e="";r.template&&(e+=r.template),e&&(t.$this.innerHTML=e);var s={$this:t.$this,$:{}};if(r.methods)for(const a in r.methods)s[a]=r.methods[a];if(r.$)for(const o in r.$){var n=t.$this.querySelectorAll(r.$[o]);s.$[o]=1<n.length?n:n[0]||null}r.ready.call(s),t.__infoThis__=s,t.__info__=r}r.update.call(t.__infoThis__,e)}t.$this.dump=e}function setInvalid(e,t){let i=e.value;const r=null!==e.value&&"object"==typeof e.value;r&&(i=JSON.stringify(e.value)),e.values&&e.values.some(e=>r?JSON.stringify(e)!==i:e!==i)?t.setAttribute("invalid",""):t.removeAttribute("invalid")}function setReadonly(e,t){e&&e.readonly?t.setAttribute("readonly",""):t.removeAttribute("readonly")}function setLabel(t,i){var r,s=getName(t);if(i.value=s,t.tooltip){let e=!0;t.tooltip.startsWith(i18nPrefix)&&(r=t.tooltip.substring(i18nPrefix.length),Editor.I18n.t(r)||(e=!1)),e&&(r=`<div style="font-weight:bold;"><ui-label value="${s}"></ui-label></div><ui-label value="${t.tooltip}"></ui-label>`,i.setAttribute("tooltip",r))}}exports.ready=ready,exports.update=update,exports.setInvalid=setInvalid,exports.setReadonly=setReadonly,exports.setLabel=setLabel;const vecAttrs=["min","max","step"];function setVecInput(t,i){const r=i.getAttribute("local"),s=t.value;var e=t.values;r&&s&&void 0!==s[r]&&(i.setAttribute("value",s[r].toString()),e&&e.some(e=>e[r]!==s[r])?i.setAttribute("invalid",""):i.removeAttribute("invalid"),vecAttrs.forEach(e=>{e in t?i.setAttribute(e,t[e]):i.removeAttribute(e)}),setReadonly(t,i),i.removeAttribute("warn"),i.removeAttribute("hidden"),t.lock)&&(e=t.lock[r])&&(i.setAttribute("readonly",""),i.setAttribute("warn",""),e.default===s[r]&&i.setAttribute("hidden",""),e.message)&&i.setAttribute("tooltip",e.message)}function getName(e){if("string"==typeof e.displayName){var t=e.displayName.trim();if(t.startsWith(i18nPrefix)){var i=t.substring(i18nPrefix.length);if(Editor.I18n.t(i))return t}else if(t)return t}let r=e.name||"";return(r=(r=(r=(r=r.trim().replace(/^\S/,e=>e.toUpperCase())).replace(/_/g," ")).replace(/ \S/g,e=>" "+e.toUpperCase())).replace(/([a-z])([A-Z])/g,"$1 $2")).trim()}exports.setVecInput=setVecInput,exports.getName=getName;