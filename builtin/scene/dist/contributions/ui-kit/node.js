"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.element=void 0;const utils_1=require("./utils");class element extends Editor.UI.__protected__.DragObject{constructor(){super(),this._nodeInfo=null,this.missStateShowText="Missing Node",this.selectIconValue="drag-node",this.shadowRoot&&(this.shadowRoot.querySelector("#custom-style").innerHTML=".type ui-icon { color: var(--color-success-fill-normal); }")}get filter(){try{return JSON.parse(this.getAttribute("filter"))}catch(e){console.error(e)}return null}set filter(e){"object"==typeof e?this.setAttribute("filter",JSON.stringify(e)):this.setAttribute("filter",e)}get nodeInfo(){return this._nodeInfo}_onAreaClick(){Editor.Message.broadcast("ui-kit:touch-node",this.$root.value)}_onSelectClick(){this.$root.disabled||this.$root.readonly||(Date.now(),Editor.Panel.__protected__.openKit("ui-kit.searcher",{elem:this.$root,params:[{type:"node",value:this.$root.value,droppable:"cc.Node",filterOptions:this.$root.filter}],listeners:{confirm:e=>{e&&(this.$root.value=e.value,this.$root._nodeInfo=e.info,this.$root.dispatch("confirm"))},change:e=>{e&&(this.$root.value=e.value,this.$root._nodeInfo=e.info,this.$root.dispatch("change"))},cancel:e=>{e&&(this.$root.value=e.value,this.$root._nodeInfo=e.info,this.$root.dispatch("cancel"))}}}))}async _onTranslationName(e){if(e){e=await Editor.Message.request((0,utils_1.getMessageProtocolScene)(this),"query-node",e);if(e&&e.name)return e.name.value}return null}}exports.element=element;