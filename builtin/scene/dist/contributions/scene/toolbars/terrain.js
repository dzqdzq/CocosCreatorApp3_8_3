"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,o,r){void 0===r&&(r=o);var n=Object.getOwnPropertyDescriptor(t,o);n&&("get"in n?t.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,r,n)}:function(e,t,o,r){e[r=void 0===r?o:r]=t[o]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&__createBinding(t,e,o);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.close=exports.update=exports.ready=exports.$=exports.template=exports.position=exports.vm=void 0;const terrain_1=__importDefault(require("../public/terrain")),Vue=require("vue/dist/vue.js");Vue.config.productionTip=!1,Vue.config.devtools=!1;let $scene=null,panel=null;exports.vm=null;const Listeners={changeIs2D(e){exports.vm&&(exports.vm.is2d=e)},changeMode(e){exports.vm&&(exports.vm.mode=e)},component(e){exports.vm&&(e&&e.value._asset.value.uuid?exports.vm.show=!0:(exports.vm.changeToolMode(0),exports.vm.show=!1))}},vueTemplate=`
<div class="terrain-tools"
    v-if="show"
    :is2d="is2d"
>
    <ui-button type="icon" class="tool transparent" tooltip="i18n:scene.terrain.manage"
        :active="mode === 0"
        @click="changeToolMode(0)"
    >
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200">
            <path d="M931.22327389 67.36925499c12.70373557 0 25.40747115 12.70373557 25.40747112 25.40747112v832.09467999c0 19.05560336-12.70373557 31.75933893-31.75933891 31.75933891h-381.11206717c-19.05560336 0-31.75933893-12.70373557-31.75933893-31.75933891V512h317.5933893V194.4066107h-317.5933893v317.5933893H99.1285939c-19.05560336 0-31.75933893-12.70373557-31.75933891-31.75933893v-381.11206717c0-19.05560336 12.70373557-31.75933893 31.75933891-31.75933891h832.09467999zM80.07299055 810.53778595c57.16681007-69.87054566 69.87054566-69.87054566-12.70373556-152.44482688V639.03735573l69.87054563-69.87054566c6.35186779-6.35186779 12.70373557-6.35186779 19.05560336 0 82.57428122 82.57428122 76.22241343 63.51867785 152.44482687 12.70373559 12.70373557-12.70373557 31.75933893-12.70373557 44.46307451 0l57.16681007 63.51867785c6.35186779 6.35186779 6.35186779 12.70373557 0 19.05560336l-254.07471145 254.07471143-6.35186778 6.3518678c-6.35186779 0-6.35186779 0-6.35186779-6.3518678l-57.16681007-57.16681007c-6.35186779-6.35186779-12.70373557-12.70373557-12.70373557-25.40747114s0-19.05560336 6.35186778-25.40747114z m374.76019938-38.11120673l6.35186778 6.35186779c0 6.35186779 0 6.35186779-6.35186778 6.35186778L296.03649529 956.63074501l-6.3518678 6.3518678c-6.35186779 0-6.35186779 0-6.35186778-6.3518678l-38.11120672-38.11120671 177.852298-177.85229801 31.75933894 31.75933893z"></path>
        </svg>
    </ui-button>
    <ui-button type="icon" class="tool transparent bigger" tooltip="i18n:scene.terrain.bulge"
        :active="mode === 1"
        @click="changeToolMode(1)"
    >
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200">
            <path d="M402.77333333 280.17197227l75.78993174-75.78993174v265.26476267c0 17.8329248 15.60380907 33.43673493 33.43673493 33.43673387s33.43673493-15.60380907 33.43673493-33.43673387v-267.4938784l75.78993174 75.7899328c6.6873472 6.6873472 15.60380907 8.91646293 24.520272 8.91646187s17.8329248-2.22911573 24.520272-8.91646187c13.3746944-13.3746944 13.3746944-33.43673493 0-46.81142933l-133.74693867-133.74693867c-13.3746944-13.3746944-33.43673493-13.3746944-46.81142827 0l-133.74693866 133.74693867c-13.3746944 13.3746944-13.3746944 33.43673493 0 46.81142933 11.14557867 13.3746944 33.43673493 13.3746944 46.81142826 2.22911467z" p-id="852"></path><path d="M964.51047573 447.35564587l-258.5774144-86.93550934c-17.8329248-6.6873472-35.66585067 4.45823147-42.35319786 20.06204054-6.6873472 17.8329248 4.45823147 35.66585067 20.0620416 42.3531968l167.1836736 55.7278912L512 598.9355104 173.17442133 478.56326507l167.1836736-55.7278912c17.8329248-6.6873472 26.74938773-24.520272 20.0620416-42.3531968-6.6873472-17.8329248-24.520272-26.74938773-42.35319786-20.06204054L59.48952427 447.35564587c-13.3746944 4.45823147-22.29115627 17.8329248-22.29115734 31.2076192 0 13.3746944 8.91646293 26.74938773 22.29115734 31.2076192l441.36489706 156.03809493c4.45823147 2.22911573 6.6873472 2.22911573 11.14557867 2.22911573s6.6873472 0 11.14557867-2.22911573l441.36489706-156.03809493c13.3746944-4.45823147 22.29115627-17.8329248 22.29115734-31.2076192 0-15.60380907-8.91646293-26.74938773-22.29115734-31.2076192zM512 728.2242176c-17.8329248 0-33.43673493 15.60380907-33.43673493 33.43673493v167.1836736c0 17.8329248 15.60380907 33.43673493 33.43673493 33.43673494s33.43673493-15.60380907 33.43673493-33.43673494v-167.1836736c0-17.8329248-15.60380907-33.43673493-33.43673493-33.43673493z"></path>
        </svg>
    </ui-button>
    <ui-button type="icon" class="tool transparent bigger" tooltip="i18n:scene.terrain.sunken"
        :active="mode === 2"
        @click="changeToolMode(2)"
    >
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200">
            <path d="M628.50844445 759.28322958l-80.84259386 80.84259385 1e-8-282.94908018c0-19.02178646-16.64406301-35.66585059-35.6658506-35.66584946s-35.66585059 16.64406301-35.6658506 35.66584946l1e-8 285.32680363-80.84259386-80.84259499c-7.13317035-7.13317035-16.64406301-9.51089379-26.1549568-9.51089266s-19.02178645 2.37772345-26.1549568 9.51089266c-14.26634069 14.26634069-14.26634069 35.66585059 0 49.93219129l142.66340125 142.66340125c14.26634069 14.26634069 35.66585059 14.26634069 49.93219015 0l142.66340124-142.66340126c14.26634069-14.26634069 14.26634069-35.66585059 0-49.93219128-11.88861725-14.26634069-35.66585059-14.26634069-49.93219014-2.37772231z" p-id="1443"></path><path d="M29.32215922 580.95397774l275.81590869 92.73120996c19.02178645 7.13317034 38.04357405-4.75544691 45.17674439-21.39950991 7.13317034-19.02178645-4.75544691-38.04357405-21.39951104-45.17674326l-178.32925184-59.44308394L512 419.26878891 873.41395058 547.66585059l-178.32925184 59.44308394c-19.02178645 7.13317034-28.53268025 26.1549568-21.39951104 45.17674326 7.13317034 19.02178645 26.1549568 28.53268025 45.17674439 21.39950991L994.67784078 580.95397774c14.26634069-4.7554469 23.77723335-19.02178645 23.77723449-33.28812715 0-14.26634069-9.51089379-28.53268025-23.77723449-33.28812714l-470.78922353-166.4406346c-4.7554469-2.37772345-7.13317035-2.37772345-11.88861725-2.37772344s-7.13317035 0-11.88861725 2.37772344l-470.78922353 166.4406346c-14.26634069 4.7554469-23.77723335 19.02178645-23.77723449 33.28812714 0 16.64406301 9.51089379 28.53268025 23.77723449 33.28812715zM512 281.36083457c19.02178646 0 35.66585059-16.64406301 35.6658506-35.6658506l-1e-8-178.32925184c0-19.02178646-16.64406301-35.66585059-35.66585059-35.6658506s-35.66585059 16.64406301-35.66585059 35.6658506l-1e-8 178.32925184c0 19.02178646 16.64406301 35.66585059 35.6658506 35.6658506z"></path>
        </svg>
    </ui-button>
    <ui-button type="icon" class="tool transparent bigger" tooltip="i18n:scene.terrain.smooth"
        :active="mode === 3"
        @click="changeToolMode(3)"
    >
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200">
            <path d="M504.26796563 756.60583822c1.84228978 3.97949155 4.70038755 6.30723318 7.73203437 6.30723319 3.03164682-0.00364089 5.88974459-2.33502341 7.73931615-6.30723319l183.92799763-229.75829333c2.69183052-5.75867259 2.70639408-13.76256 0.06310874-19.56735052-2.6420717-5.79750875-7.307264-7.96505125-11.38627319-5.30598874l-121.79501511 21.63294815 0.01092267-420.23382281C570.55034785 94.4495123 566.18856297 87.22962963 560.78791111 87.22962963h-97.583104c-5.40429275 0-9.76243675 7.21988267-9.77335941 16.14370134l0.01092267 420.23382281-121.79744237-21.62202548c-4.08143645-2.66027615-8.74420148-0.49516089-11.37535052 5.29506607-1.31921541 2.88237037-1.96972089 6.30723318-1.96972089 9.71995971 0 3.56200297 0.71118697 7.01720652 2.02312059 9.84739081l183.94498845 229.75829333zM159.2403437 791.88847882L-14.61695525 936.77037037h879.37661155l173.85729895-144.88189155z"></path>
        </svg>
    </ui-button>
    <ui-button type="icon" class="tool transparent" tooltip="i18n:scene.terrain.paint"
        :active="mode === 4"
        @click="changeToolMode(4)"
    >
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200">
            <path d="M290.154379 996.477156c-90.108251 0-157.651576-30.15581-200.753233-89.629343-36.832883-50.822502-55.508221-123.242905-55.508221-215.245296l0-28.931936 23.956621 16.223496c4.366448 2.956332 10.549264 7.500834 18.377556 13.255908 13.666254 10.044774 32.383548 23.803125 49.342802 34.719756 26.349111 16.959254 33.997302 17.700127 34.782178 17.727757 7.058766 0 12.540617-3.640923 15.011902-9.988492 23.170722-60.489676 54.076616-99.586113 97.232508-122.960473 44.586474-24.150026 99.846032-29.643134 152.919808-31.981389l9.813506-0.432859 4.503571 8.729825c24.503067 47.494711 51.991118 68.593238 108.934015 83.612303l11.266601 2.970658 0.710175 49.559742c0.813528 38.768979-5.114484 75.423807-17.623379 108.844987-12.259208 32.760125-30.54876 61.698201-54.358025 86.011956-24.286126 24.800849-53.602825 44.077891-87.137593 57.295937C367.588983 989.67524 330.08481 996.477156 290.154379 996.477156zM65.349357 722.234165c3.596921 70.76981 20.004613 126.71396 48.909943 166.599366 37.001729 51.057863 96.181573 76.94444 175.895079 76.94444 70.805626 0 133.549645-24.25338 176.674838-68.292386 42.814108-43.721781 64.676022-103.487979 63.22088-172.836417l-0.38067-26.536376c-27.40414-8.118911-47.75463-17.786085-64.979944-30.747281-18.434861-13.872962-33.659611-31.993668-47.430242-56.564273-113.952308 6.02318-172.543751 28.579919-213.257012 134.865617-7.124258 18.305925-23.850198 29.629831-43.679825 29.629831C142.069693 775.296685 112.590288 756.695025 65.349357 722.234165z"></path><path d="M586.016761 645.708258c-97.464799 0-148.982126-52.446489-148.982126-151.668305 0-47.713698 19.724227-93.097328 54.115502-124.512828l340.671936-309.222667c23.160489-21.131273 51.492768-32.783661 79.749322-32.783661 28.303626 0 46.160319 2.032286 59.446927 12.752442 16.777105 13.536294 19.088754 36.529985 19.088754 59.360969 0 32.686447-13.004175 62.628386-25.724895 87.60729l-0.099261 0.191358c-53.617152 101.719706-185.4282 344.830653-251.4161 405.605831C675.441443 627.988688 632.762411 645.708258 586.016761 645.708258zM911.571395 58.221006c-20.581758 0-41.566698 8.803503-59.086723 24.789593L511.818875 392.226103c-28.003797 25.580608-44.085054 62.702064-44.085054 101.81385 0 82.529645 37.585013 120.969119 118.28294 120.969119 38.72907 0 74.369801-14.951527 105.933681-44.440142l0.085958-0.078795c64.177672-59.050907 203.709565-318.870398 245.039879-397.275095 11.051707-21.711488 22.331611-47.422056 22.331611-73.579809 0-19.978007-2.436492-31.248701-7.66661-35.469839C945.624978 59.232033 931.259806 58.221006 911.571395 58.221006z"></path>
        </svg>
    </ui-button>
    <ui-button type="icon" class="tool transparent" tooltip="i18n:scene.terrain.select"
        :active="mode === 5"
        @click="changeToolMode(5)"
    >
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200">
            <path d="M281.611519 767.961602l-204.789761 0c-42.340283 0-76.79616-34.455877-76.79616-76.79616l0-614.369282c0-42.340283 34.455877-76.79616 76.79616-76.79616l716.764162 0c42.340283 0 76.79616 34.455877 76.79616 76.79616l0 358.382081c0 14.130493-11.468227 25.59872-25.59872 25.59872s-25.59872-11.468227-25.59872-25.59872l0-358.382081c0-14.130493-11.468227-25.59872-25.59872-25.59872l-716.764162 0c-14.130493 0-25.59872 11.468227-25.59872 25.59872l0 614.369282c0 14.130493 11.468227 25.59872 25.59872 25.59872l204.789761 0c14.130493 0 25.59872 11.468227 25.59872 25.59872s-11.468227 25.59872-25.59872 25.59872z"></path><path d="M665.59232 1023.948803c-10.137093 0-19.762212-6.092495-23.755612-16.075996l-86.882056-217.179541-151.698015 173.354532c-7.014049 8.037998-18.277486 10.853857-28.260987 7.116444s-16.587971-13.311334-16.587971-23.960402l0-767.961602c0-10.137093 5.9901-19.301435 15.256837-23.39723s20.069397-2.355082 27.59542 4.454177l563.171841 511.974401c7.833208 7.116444 10.495475 18.328684 6.655667 28.158592s-13.311334 16.383181-23.858007 16.383181l-218.152292 0 88.366782 220.865757c5.273336 13.106545-1.126344 28.005-14.284086 33.278336l-127.9936 51.19744c-3.123044 1.228739-6.348483 1.843108-9.522724 1.843108zM563.19744 716.764162c1.433528 0 2.867057 0.102395 4.300585 0.358382 8.80596 1.484726 16.127194 7.474826 19.455027 15.717614l92.872156 232.231588 80.482376-32.20319-92.872156-232.231588c-3.174241-7.884406-2.20149-16.843958 2.559872-23.858007s12.696965-11.263437 21.19574-11.263437l189.788911 0-471.374831-428.522574 0 641.964702 134.342083-153.541123c4.914954-5.580521 11.929004-8.754762 19.250237-8.754762z"></path>
        </svg>
    </ui-button>
</div>
`,SceneTerrainVM=Vue.extend({name:"SceneTerrainVM",data(){return{show:!1,align:!1,mode:0,is2d:!1}},methods:{changeToolMode(e){terrain_1.default.changeMode(e)}},template:vueTemplate});function ready(e){close(),panel=this,$scene=e.nextElementSibling,terrain_1.default.init($scene),null!==exports.vm&&void 0!==exports.vm&&exports.vm.$destroy(),exports.vm=new SceneTerrainVM,exports.vm.$mount(panel.$.container),terrain_1.default.on("mode-changed",Listeners.changeMode),terrain_1.default.on("component-changed",Listeners.component),Editor.Message.__protected__.addBroadcastListener("scene:dimension-changed",Listeners.changeIs2D)}function update(e,t,o){-1!==t.indexOf("cc.Terrain")&&1===e.nodes.length?(t=o["cc.Terrain"][0],terrain_1.default.select(t.uuid)):(exports.vm&&(exports.vm.show=!1),terrain_1.default.close())}function close(){terrain_1.default.off("mode-changed",Listeners.changeMode),terrain_1.default.off("component-changed",Listeners.component),Editor.Message.__protected__.removeBroadcastListener("scene:dimension-changed",Listeners.changeIs2D),terrain_1.default.close(),null!==exports.vm&&void 0!==exports.vm&&exports.vm.$destroy(),exports.vm=null,panel=null,$scene=null}exports.position="left",exports.template=`
<style>
    .terrain-tools { 
        display: flex;
        margin: 0 8px;
        overflow: hidden; 
        font-size: 0; 
        border-radius: calc(var(--size-normal-radius) * 2px);
        line-height: 24px;
        background-color: var(--color-default-fill-emphasis);
        box-shadow: inset 0 0 0 calc(var(--size-normal-border) * 1px) var(--color-default-border-normal);
    }
    
    .terrain-tools[is2d]{
        margin-left: 8px;
    }
    
    .terrain-tools > .tool { 
        cursor: pointer;
        border-radius: 0;

    }
    
    .terrain-tools > .tool > svg { 
        fill: var(--color-normal-contrast); 
        width: 22px; 
        height: 14px;
        vertical-align: middle;
    }
    .terrain-tools > .tool.bigger > svg { 
        height: 16px;
    }
    .terrain-tools > .tool[active] > svg { 
        fill: var(--color-focus-contrast-emphasis); 
    }
</style>

<div class="terrain-tools"></div>
`,exports.$={container:".terrain-tools"},exports.ready=ready,exports.update=update,exports.close=close,exports.default=__importStar(require("./terrain"));