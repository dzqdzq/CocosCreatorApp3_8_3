"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnimVec3=void 0;const cc_1=require("cc"),math_1=__importDefault(require("../../../utils/math"));class AnimateValueBase{constructor(t){this._speed=0,this.defaultSpeed=2,this._isAnimating=!1,this._lerpPos=0,this._start=t,this._target=t}get start(){return this._start}get target(){return this._target}set target(t){t!==this._target&&this.startAnimating(t,this.value)}get lerpPos(){var t=1-this._lerpPos;return 1-Math.pow(t,4)}get value(){return 1<=this.lerpPos?this.target:this.getValue()}set value(t){this.stopAnimating(t)}get isAnimating(){return this._isAnimating}startAnimating(t,e,s=this.defaultSpeed){this._speed=s,this._start=t,this._target=e,this._isAnimating=!0,this._lerpPos=0}stopAnimating(t){this._target=t,this._start=t,this._lerpPos=1,this._isAnimating=!1}update(t){this._isAnimating&&(this._lerpPos=math_1.default.clamp01(this._lerpPos+t*this._speed),1<=this.lerpPos)&&(this._isAnimating=!1)}getValue(){return this._start}}class AnimVec3 extends AnimateValueBase{constructor(t){super(null!=t?t:cc_1.Vec3.ZERO),this._value=new cc_1.Vec3}getValue(){return cc_1.Vec3.lerp(this._value,this.start,this.target,this.lerpPos),this._value}}exports.AnimVec3=AnimVec3;