"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Ruler=void 0;class Ruler{constructor(){this.rulerLen=0,this.isShow=!1}init(){var e=document.querySelector("#hLabels"),t=document.querySelector("#vLabels"),{width:e,height:t}=(this.hRulerCanvas=e,this.vRulerCanvas=t,this.hRulerCtx=this.hRulerCanvas.getContext("2d"),this.vRulerCtx=this.vRulerCanvas.getContext("2d"),cc.screen.windowSize);this.hRulerCanvas.width=e,this.hRulerCanvas.height=this.rulerLen,this.vRulerCanvas.width=this.rulerLen,this.vRulerCanvas.height=t}show(e){this.isShow=e}updateTicks(h){var{width:e,height:t}=cc.screen.windowSize;if(null!=(i=this.hRulerCtx)&&i.clearRect(0,0,e,this.rulerLen),null!=(i=this.vRulerCtx)&&i.clearRect(0,0,this.rulerLen,t),this.isShow){const r=12*cc.screen.devicePixelRatio+"px Arial",s="gray";var e=h.hTicks.levelForStep(50),i=h.hTicks.ticksAtLevel(e,!1),t=(this.hRulerCtx.beginPath(),i.forEach((e,t)=>{e=Math.floor(10*e)/10;var i=Math.floor(this.valueToPixelH(e,h))+5;this.hRulerCtx.font=r,this.hRulerCtx.fillStyle=s,this.hRulerCtx.textBaseline="bottom",this.hRulerCtx.fillText(e.toString(),i,this.rulerLen)}),this.hRulerCtx.closePath(),h.vTicks.levelForStep(50)),e=h.vTicks.ticksAtLevel(t,!1);this.vRulerCtx.beginPath(),e.forEach((e,t)=>{e=Math.floor(10*e)/10;var i=Math.floor(this.valueToPixelV(e,h))-5;this.vRulerCtx.font=r,this.vRulerCtx.fillStyle=s,this.vRulerCtx.fillText(e.toString(),0,i)}),this.vRulerCtx.closePath()}}valueToPixelH(e,t){return e*t.xAxisScale+t.xAxisOffset}valueToPixelV(e,t){var i=cc.screen.windowSize["height"];return-e*t.yAxisScale+i+t.yAxisOffset}resize(e,t){this.rulerLen=35*cc.screen.devicePixelRatio,this.hRulerCanvas.width=e,this.hRulerCanvas.height=this.rulerLen,this.vRulerCanvas.width=this.rulerLen,this.vRulerCanvas.height=t}}exports.Ruler=Ruler;