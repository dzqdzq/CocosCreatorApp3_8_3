"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,i,r,t){void 0===t&&(t=r);var n=Object.getOwnPropertyDescriptor(i,r);n&&("get"in n?i.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return i[r]}}),Object.defineProperty(e,t,n)}:function(e,i,r,t){e[t=void 0===t?r:t]=i[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,i){Object.defineProperty(e,"default",{enumerable:!0,value:i})}:function(e,i){e.default=i}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(i,e,r);return __setModuleDefault(i,e),i};Object.defineProperty(exports,"__esModule",{value:!0}),exports.previewMgr=exports.PreviewManager=void 0;const material_preview_1=require("../material-preview"),mesh_preview_1=require("../mesh-preview"),mini_preview_1=require("../mini-preview"),model_preview_1=require("../model-preview"),skeleton_preview_1=require("../skeleton-preview"),motion_1=require("../animation-graph-preview/motion"),transition_1=require("../animation-graph-preview/transition"),scene_preview_1=require("./scene-preview");class PreviewManager{constructor(){this._previewMgrMap=new Map,this.scenePreview=scene_preview_1.scenePreview,this.materialPreview=new material_preview_1.MaterialPreview,this.miniPreview=new mini_preview_1.MiniPreview,this.modelPreview=new model_preview_1.ModelPreview,this.meshPreview=new mesh_preview_1.MeshPreview,this.skeletonPreview=new skeleton_preview_1.SkeletonPreview,this.motionPreview=new motion_1.MotionPreview,this.transitionPreview=new transition_1.TransitionPreview,this._electronIPC=null}init(){this.initPreview("scene:preview","query-preview-data",this.scenePreview),this.initPreview("scene:mini-preview","query-mini-preview-data",this.miniPreview),isPreviewProcess||(this.initPreview("scene:material-preview","query-material-preview-data",this.materialPreview),this.initPreview("scene:model-preview","query-model-preview-data",this.modelPreview),this.initPreview("scene:mesh-preview","query-mesh-preview-data",this.meshPreview),this.initPreview("scene:skeleton-preview","query-skeleton-preview-data",this.skeletonPreview),this.initPreview("scene:motion-preview","query-motion-preview-data",this.motionPreview),this.initPreview("scene:transition-preview","query-transition-preview-data",this.transitionPreview))}async initPreview(e,i,r){this._previewMgrMap.set(e,r),r.init(e,i),this._electronIPC=await Promise.resolve().then(()=>__importStar(require("@base/electron-base-ipc"))),isPreviewProcess||this._register(e,i)}async queryPreviewData(e,i){return this._previewMgrMap.has(e)?null==(e=this._previewMgrMap.get(e))?void 0:e.queryPreviewData(i):null}async callPreviewFunction(e,i,...r){if(this._previewMgrMap.has(e)){e=this._previewMgrMap.get(e);if(e[i])return e[i](...r)}return!1}_register(t,e){this._electronIPC.registerChannel(t),this._electronIPC.on(e,async(e,i)=>{var r;this._previewMgrMap.has(t)&&null!=(r=this._previewMgrMap.get(t))&&r.queryPreviewDataQueue(i,e)})}}const previewMgr=new(exports.PreviewManager=PreviewManager);exports.previewMgr=previewMgr;