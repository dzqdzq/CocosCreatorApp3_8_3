"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const set_util_1=__importDefault(require("../gizmos/utils/set-util"));class GizmoSelectionLogic{constructor(){this.buffer=new set_util_1.default,this.selected=new set_util_1.default,this.lastSelects=new set_util_1.default}process(e,t=!1){var e=new set_util_1.default(e),s=(this.buffer.addAll(e),this.buffer.intersection(e)),e=this.buffer.difference(e);let l,i;return i=t?(l=s.difference(this.lastSelects).union(e),e.difference(this.lastSelects).union(s.intersection(this.lastSelects))):(l=s,e.union(this.lastSelects.difference(s))),l=l.difference(i).difference(this.selected),i=i.intersection(this.selected),{shouldSelects:l,shouldUnselects:i}}select(e){this.selected.addAll(e)}clear(){this.selected.clear(),this.lastSelects.clear(),this.buffer.clear()}confirm(){this.lastSelects.clear(),this.lastSelects.addAll(this.selected)}}exports.default=GizmoSelectionLogic;