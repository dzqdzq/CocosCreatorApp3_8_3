"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const base_1=__importDefault(require("./base")),controller_shape_1=__importDefault(require("../utils/controller-shape")),controller_utils_1=__importDefault(require("../utils/controller-utils")),engine_1=__importDefault(require("../utils/engine")),external_1=__importDefault(require("../utils/external")),{getModel,updatePositions,AttributeName,updateBoundingBox,setNodeOpacity}=engine_1.default,EditorCamera=external_1.default.EditorCamera,NodeUtils=external_1.default.NodeUtils,v3_up=cc.v3(0,1,0);class TerrainController extends base_1.default{constructor(e,t={}){super(e),this._quadNode=null,this._quadMR=null,this._size=10,this.initShape(t)}initShape(e){this.createShapeNode("TerrainController");e=controller_utils_1.default.quad(cc.v3(),this._size,this._size,v3_up,cc.Color.WHITE,e);e.parent=this.shape,this._quadNode=e,this._quadMR=getModel(this._quadNode),setNodeOpacity(this._quadNode,0),this.registerMouseEvents(this._quadNode,"quad")}onMouseDown(e){this.onControllerMouseDown&&this.onControllerMouseDown(e)}onMouseMove(e){this.onControllerMouseMove&&this.onControllerMouseMove(e)}onMouseUp(e){this.onControllerMouseUp&&this.onControllerMouseUp(e)}onHoverIn(e){}onHoverOut(e){this.onControllerHoverOut&&this.onControllerHoverOut(e)}onShow(){this._eventsRegistered||(this.registerCameraMovedEvent(),this._eventsRegistered=!0)}onHide(){this._eventsRegistered&&(this.unregisterCameraMoveEvent(),this._eventsRegistered=!1)}updateSize(e,t){var o=cc.v3(e/2,0,t/2),o=controller_shape_1.default.calcQuadData(o,e,t,v3_up);this._quadMR&&(updatePositions(this._quadMR,o.positions),updateBoundingBox(this._quadMR,o.minPos,o.maxPos))}}exports.default=TerrainController;