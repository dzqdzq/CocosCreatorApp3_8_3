"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const cc_1=require("cc"),base_1=__importDefault(require("./base")),controller_utils_1=__importDefault(require("../utils/controller-utils")),engine_1=__importDefault(require("../utils/engine")),external_1=__importDefault(require("../utils/external")),setMaterialProperty=engine_1.default["setMaterialProperty"],EditorCamera=external_1.default.EditorCamera,tempQuat_a=new cc_1.Quat;class QuadController extends base_1.default{constructor(e,t){super(e),this._quadNode=null,this._defaultSize=1,this._size=this._defaultSize,this._hoverColor=cc_1.Color.GREEN,this.initShape(t),this.registerCameraMovedEvent(),this._eventsRegistered=!0}get hoverColor(){return this._hoverColor}set hoverColor(e){this._hoverColor=e}initShape(e){this.createShapeNode("QuadController");let t=this._defaultSize;e&&e.size&&(t=e.size);e=controller_utils_1.default.quad(cc.v3(),this._defaultSize,this._defaultSize,cc.v3(0,0,1),cc.Color.WHITE,e);e.parent=this.shape,this._quadNode=e,this.updateSize(t),this.registerMouseEvents(this._quadNode,"quad")}onMouseDown(e){this.onControllerMouseDown&&this.onControllerMouseDown(e)}onMouseMove(e){this.onControllerMouseMove&&this.onControllerMouseMove(e)}onMouseUp(e){this.onControllerMouseUp&&this.onControllerMouseUp(e)}onHoverIn(e){}onHoverOut(){}onEditorCameraMoved(){var e=EditorCamera.camera.node,t=tempQuat_a;e.getWorldRotation(t),this._quadNode.setWorldRotation(t)}onShow(){this._eventsRegistered||(this.registerCameraMovedEvent(),this._eventsRegistered=!0),this.onEditorCameraMoved()}onHide(){this._eventsRegistered&&(this.unregisterCameraMoveEvent(),this._eventsRegistered=!1)}updateSize(e){var t=e/this._defaultSize;this._size=e,this._quadNode.setScale(cc.v3(t,t,t))}setMaterialProperty(e,t){setMaterialProperty(this._quadNode,e,t)}}exports.default=QuadController;