"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DynamicMeshPrimitive=void 0;class DynamicMeshPrimitive{constructor(i){this.boundingRadius=i.boundingRadius,this.doubleSided=i.doubleSided,this.indices=i.indices,this.maxPos=i.maxPos,this.minPos=i.minPos,this.normals=i.normals,this.positions=i.positions,this.primitiveType=i.primitiveType,this.uvs=i.uvs}transformToDynamicGeometry(){var i;return{primitiveMode:this.primitiveType,positions:flatPosition(this.positions),indices32:Uint32Array.from(null!=(i=this.indices)?i:[]),minPos:this.minPos,maxPos:this.maxPos}}}exports.DynamicMeshPrimitive=DynamicMeshPrimitive;const zeroFloat32=new Float32Array,flatPositionBitArrayPool=[];function flatPosition(t){var i;if(!t.length)return zeroFloat32;let o=null==(i=flatPositionBitArrayPool.find(i=>i&&i.key===3*t.length))?void 0:i.value;o||(o=new Float32Array(3*t.length),flatPositionBitArrayPool.unshift({key:3*t.length,value:o}),flatPositionBitArrayPool.length=4);var s;for(let i=0;i<t.length;i++)s=3*i,o[s]=t[i].x,o[1+s]=t[i].y,o[2+s]=t[i].z;return o}