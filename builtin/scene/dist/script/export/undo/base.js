"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UndoManagerBase=exports.UndoCommand=void 0;class UndoCommand{constructor(){this.toPerformUndo=!1}async perform(){this.toPerformUndo?await this.undo():await this.redo()}async undo(){}async redo(){}}exports.UndoCommand=UndoCommand;class UndoManagerBase{constructor(){this._multiCollaboration=!0,this._multiCommandArray=[],this._commandArray=[],this._index=-1,this._lastSavedCommand=null}push(t){this._index!==this._commandArray.length-1&&this._commandArray.splice(this._index+1),this._commandArray.push(t),this._multiCollaboration&&this._multiCommandArray.push(t),this._index++}async undo(){var t;return-1!==this._index&&(t=this._commandArray[this._index])?(t.toPerformUndo=!0,await t.perform(),this._index--,this._multiCollaboration&&this._multiCommandArray.push(t),t):void 0}async redo(){var t;return!(this._index>this._commandArray.length-1)&&(t=this._commandArray[this._index+1])?(this._index++,t.toPerformUndo=!1,await t.perform(),this._multiCollaboration&&this._multiCommandArray.push(t),t):void 0}reset(){this._commandArray.length=0,this._multiCommandArray.length=0,this._index=-1,this._lastSavedCommand=null}save(){this._lastSavedCommand=this._commandArray[this._index]}isDirty(){return-1!==this._index&&this._lastSavedCommand!==this._commandArray[this._index]}}exports.UndoManagerBase=UndoManagerBase;