"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.realCurveDump=void 0;class RealCurveDump{encode(e,t,n){t.value=this.encodeByObj(e,n),t.value.keyFrames.length||(t.value=t.default)}decode(e,t,n,a){n.value&&(e=e[t.key],this.decodeByDump(n,e,a))}encodeByObj(t,n){try{return{postExtrap:t.postExtrapolation,preExtrap:t.preExtrapolation,keyFrames:[...t.keyframes()].map(([e,t])=>({time:e,value:t.value,inTangent:t.leftTangent,outTangent:t.rightTangent,inTangentWeight:t.leftTangentWeight,outTangentWeight:t.rightTangentWeight,interpMode:t.interpolationMode,tangentWeightMode:t.tangentWeightMode}))}}catch(e){console.warn("Value dump failed."),console.warn(e);t=n.ctor,n=cce.Utils.serialize(new t,{stringify:!1,forceInline:!0});return delete n.__type__,n}}decodeByDump(e,t,n){var a=e.value.keyFrames.map(e=>[e.time,{value:e.value,leftTangent:e.inTangent,rightTangent:e.outTangent,interpolationMode:e.interpMode,tangentWeightMode:e.tangentWeightMode,leftTangentWeight:e.inTangentWeight,rightTangentWeight:e.outTangentWeight}]);return t.assignSorted(a),t.postExtrapolation=e.value.postExtrap,t.preExtrapolation=e.value.preExtrap,t}}exports.realCurveDump=new RealCurveDump;