"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assetDump=void 0;class AssetDump{encode(e,s,u){e=e&&e._uuid||"";s.value={uuid:e.startsWith("pm_")?"":e}}async decode(a,e,t,s){if(Array.isArray(t.value)){var u,l=[];for(let e=0;e<t.value.length;e++){const a=t.value[e];a&&a.value.uuid&&!a.value.uuid.startsWith("ui-")?(u=await new Promise(u=>{cc.assetManager.loadAny(a.value.uuid,(e,s)=>{e?(console.error("asset can't be load:"+a.value.uuid),u(null)):u(s)})}))?l[e]=u:((u=EditorExtends.serialize.asAsset(t.value.uuid,cc.js.getClassById(t.type))).initDefault(),l[e]=u):l[e]=null}a[e.key]=l}else{var i;t.value&&t.value.uuid&&!t.value.uuid.startsWith("ui-")?(i=await new Promise(u=>{cc.assetManager.loadAny(t.value.uuid,(e,s)=>{e?(console.error("asset can't be load:"+t.value.uuid),u(null)):u(s)})}))?a[e.key]=i:((i=EditorExtends.serialize.asAsset(t.value.uuid,cc.js.getClassById(t.type))).initDefault(),a[e.key]=i):a[e.key]=null}}}exports.assetDump=new AssetDump;