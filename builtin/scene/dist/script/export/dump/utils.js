"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ccClassAttrPropertyDefaultValue=exports.generatePath=exports.parsingPath=exports.getTypeInheritanceChain=exports.getTypeName=exports.getType=exports.getConstructor=exports.getDefault=void 0;const cc_1=require("cc");function getDefault(e){let t;return t="function"==typeof e.default?e.default():e.default}function getConstructor(e,t){return t&&t.ctor?t.ctor:null==e?null:e.constructor}function getType(e){return e?cc.js.getClassId(e)||e.name:"Unknown"}function getTypeName(e){return cc.js.getClassName(e)||"Unknown"}function getTypeInheritanceChain(e){return cc.Class.getInheritanceChain(e).map(e=>getTypeName(e)).filter(Boolean)}function parsingPath(e,t){t=((e=t instanceof cc_1.Node?(e=(e=(e=e.replace(/^__comps__/,"_components")).replace(/^position$/,"_lpos")).replace(/^scale$/,"_lscale")).replace(/^rotation$/,"eulerAngles"):e)||"").split("."),e=t.pop()||"";return{search:t.join("."),key:e}}function walkProps(e,t,r){var n,o=null==(o=null==e?void 0:e.constructor)?void 0:o.__props__;if(o)for(const a of o){if(e[a]===t)return r+"."+a;if(null!=(n=null==(n=e[a])?void 0:n.constructor)&&n.__props__)return walkProps(e[a],t,r+"."+a)}}function generatePath(t,e,r,n){var o=t.constructor.__props__;if(o.includes(r)&&t[r]===n)return r;walkProps(t,r,n);for(const a of o)t[a];for(let e=0;e<t.components.length;e++)walkProps(t.components[e],r,"__comps__."+e);return""}function ccClassAttrPropertyDefaultValue(e){if(void 0===e.type)return e.default?getDefault(e):null;var t={Boolean:!1,String:"",Float:0,Integer:0,BitMask:0}[e.type];if(void 0!==t)return t;switch(e.type){case"Enum":return e.enumList[0]&&e.enumList[0].value||0;case"Object":var r=e["ctor"];if(cc.js.isChildClassOf(r,cc.Asset)||cc.js.isChildClassOf(r,cc.Node)||cc.js.isChildClassOf(r,cc.Component))return null;try{return new r}catch(e){return console.error(e),null}}return null}exports.getDefault=getDefault,exports.getConstructor=getConstructor,exports.getType=getType,exports.getTypeName=getTypeName,exports.getTypeInheritanceChain=getTypeInheritanceChain,exports.parsingPath=parsingPath,exports.generatePath=generatePath,exports.ccClassAttrPropertyDefaultValue=ccClassAttrPropertyDefaultValue,exports.default={getDefault:getDefault,getConstructor:getConstructor,getType:getType,getTypeName:getTypeName,getTypeInheritanceChain:getTypeInheritanceChain,parsingPath:parsingPath,generatePath:generatePath,ccClassAttrPropertyDefaultValue:ccClassAttrPropertyDefaultValue};