"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MMat4=void 0;const cc_1=require("cc"),utils_1=require("./utils"),vec3_1=require("./vec3"),quat_1=require("./quat");let _a00=0,_a01=0,_a02=0,_a03=0,_a10=0,_a11=0,_a12=0,_a13=0,_a20=0,_a21=0,_a22=0,_a23=0,_a30=0,_a31=0,_a32=0,_a33=0;const v3_1=new cc_1.Vec3,m3_1=new cc_1.Mat3;class MMat4{static clone(m){return new cc_1.Mat4(m.m00,m.m01,m.m02,m.m03,m.m04,m.m05,m.m06,m.m07,m.m08,m.m09,m.m10,m.m11,m.m12,m.m13,m.m14,m.m15)}static copy(m,a){return m.m00=a.m00,m.m01=a.m01,m.m02=a.m02,m.m03=a.m03,m.m04=a.m04,m.m05=a.m05,m.m06=a.m06,m.m07=a.m07,m.m08=a.m08,m.m09=a.m09,m.m10=a.m10,m.m11=a.m11,m.m12=a.m12,m.m13=a.m13,m.m14=a.m14,m.m15=a.m15,m}static set(m,a,_,t,r,s,e,M,h,c,n,i,u,o,b,x,v){return m.m00=a,m.m01=_,m.m02=t,m.m03=r,m.m04=s,m.m05=e,m.m06=M,m.m07=h,m.m08=c,m.m09=n,m.m10=i,m.m11=u,m.m12=o,m.m13=b,m.m14=x,m.m15=v,m}static identity(m){return m.m00=1,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=1,m.m06=0,m.m07=0,m.m08=0,m.m09=0,m.m10=1,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static transpose(m,a){var _,t,r,s,e,M;return m===a?(_=a.m01,t=a.m02,r=a.m03,s=a.m06,e=a.m07,M=a.m11,m.m01=a.m04,m.m02=a.m08,m.m03=a.m12,m.m04=_,m.m06=a.m09,m.m07=a.m13,m.m08=t,m.m09=s,m.m11=a.m14,m.m12=r,m.m13=e,m.m14=M):(m.m00=a.m00,m.m01=a.m04,m.m02=a.m08,m.m03=a.m12,m.m04=a.m01,m.m05=a.m05,m.m06=a.m09,m.m07=a.m13,m.m08=a.m02,m.m09=a.m06,m.m10=a.m10,m.m11=a.m14,m.m12=a.m03,m.m13=a.m07,m.m14=a.m11,m.m15=a.m15),m}static invert(m,a){_a00=a.m00,_a01=a.m01,_a02=a.m02,_a03=a.m03,_a10=a.m04,_a11=a.m05,_a12=a.m06,_a13=a.m07,_a20=a.m08,_a21=a.m09,_a22=a.m10,_a23=a.m11,_a30=a.m12,_a31=a.m13,_a32=a.m14,_a33=a.m15;var a=_a00*_a11-_a01*_a10,_=_a00*_a12-_a02*_a10,t=_a00*_a13-_a03*_a10,r=_a01*_a12-_a02*_a11,s=_a01*_a13-_a03*_a11,e=_a02*_a13-_a03*_a12,M=_a20*_a31-_a21*_a30,h=_a20*_a32-_a22*_a30,c=_a20*_a33-_a23*_a30,n=_a21*_a32-_a22*_a31,i=_a21*_a33-_a23*_a31,u=_a22*_a33-_a23*_a32,o=a*u-_*i+t*n+r*c-s*h+e*M;return 0!=o&&(o=1/o,m.m00=(_a11*u-_a12*i+_a13*n)*o,m.m01=(_a02*i-_a01*u-_a03*n)*o,m.m02=(_a31*e-_a32*s+_a33*r)*o,m.m03=(_a22*s-_a21*e-_a23*r)*o,m.m04=(_a12*c-_a10*u-_a13*h)*o,m.m05=(_a00*u-_a02*c+_a03*h)*o,m.m06=(_a32*t-_a30*e-_a33*_)*o,m.m07=(_a20*e-_a22*t+_a23*_)*o,m.m08=(_a10*i-_a11*c+_a13*M)*o,m.m09=(_a01*c-_a00*i-_a03*M)*o,m.m10=(_a30*s-_a31*t+_a33*a)*o,m.m11=(_a21*t-_a20*s-_a23*a)*o,m.m12=(_a11*h-_a10*n-_a12*M)*o,m.m13=(_a00*n-_a01*h+_a02*M)*o,m.m14=(_a31*_-_a30*r-_a32*a)*o,m.m15=(_a20*r-_a21*_+_a22*a)*o),m}static determinant(m){_a00=m.m00,_a01=m.m01,_a02=m.m02,_a03=m.m03,_a10=m.m04,_a11=m.m05,_a12=m.m06,_a13=m.m07,_a20=m.m08,_a21=m.m09,_a22=m.m10,_a23=m.m11,_a30=m.m12,_a31=m.m13,_a32=m.m14,_a33=m.m15;var m=_a00*_a11-_a01*_a10,a=_a00*_a12-_a02*_a10,_=_a00*_a13-_a03*_a10,t=_a01*_a12-_a02*_a11,r=_a01*_a13-_a03*_a11,s=_a02*_a13-_a03*_a12,e=_a20*_a31-_a21*_a30,M=_a20*_a32-_a22*_a30,h=_a20*_a33-_a23*_a30,c=_a21*_a32-_a22*_a31,n=_a21*_a33-_a23*_a31;return m*(_a22*_a33-_a23*_a32)-a*n+_*c+t*h-r*M+s*e}static multiply(m,a,_){_a00=a.m00,_a01=a.m01,_a02=a.m02,_a03=a.m03,_a10=a.m04,_a11=a.m05,_a12=a.m06,_a13=a.m07,_a20=a.m08,_a21=a.m09,_a22=a.m10,_a23=a.m11,_a30=a.m12,_a31=a.m13,_a32=a.m14,_a33=a.m15;var a=_.m00,t=_.m01,r=_.m02,s=_.m03;return m.m00=a*_a00+t*_a10+r*_a20+s*_a30,m.m01=a*_a01+t*_a11+r*_a21+s*_a31,m.m02=a*_a02+t*_a12+r*_a22+s*_a32,m.m03=a*_a03+t*_a13+r*_a23+s*_a33,a=_.m04,t=_.m05,r=_.m06,s=_.m07,m.m04=a*_a00+t*_a10+r*_a20+s*_a30,m.m05=a*_a01+t*_a11+r*_a21+s*_a31,m.m06=a*_a02+t*_a12+r*_a22+s*_a32,m.m07=a*_a03+t*_a13+r*_a23+s*_a33,a=_.m08,t=_.m09,r=_.m10,s=_.m11,m.m08=a*_a00+t*_a10+r*_a20+s*_a30,m.m09=a*_a01+t*_a11+r*_a21+s*_a31,m.m10=a*_a02+t*_a12+r*_a22+s*_a32,m.m11=a*_a03+t*_a13+r*_a23+s*_a33,a=_.m12,t=_.m13,r=_.m14,s=_.m15,m.m12=a*_a00+t*_a10+r*_a20+s*_a30,m.m13=a*_a01+t*_a11+r*_a21+s*_a31,m.m14=a*_a02+t*_a12+r*_a22+s*_a32,m.m15=a*_a03+t*_a13+r*_a23+s*_a33,m}static transform(m,a,_){var t=_.x,r=_.y,_=_.z;return a===m?(m.m12=a.m00*t+a.m04*r+a.m08*_+a.m12,m.m13=a.m01*t+a.m05*r+a.m09*_+a.m13,m.m14=a.m02*t+a.m06*r+a.m10*_+a.m14,m.m15=a.m03*t+a.m07*r+a.m11*_+a.m15):(_a00=a.m00,_a01=a.m01,_a02=a.m02,_a03=a.m03,_a10=a.m04,_a11=a.m05,_a12=a.m06,_a13=a.m07,_a20=a.m08,_a21=a.m09,_a22=a.m10,_a23=a.m11,_a30=a.m12,_a31=a.m13,_a32=a.m14,_a33=a.m15,m.m00=_a00,m.m01=_a01,m.m02=_a02,m.m03=_a03,m.m04=_a10,m.m05=_a11,m.m06=_a12,m.m07=_a13,m.m08=_a20,m.m09=_a21,m.m10=_a22,m.m11=_a23,m.m12=_a00*t+_a10*r+_a20*_+a.m12,m.m13=_a01*t+_a11*r+_a21*_+a.m13,m.m14=_a02*t+_a12*r+_a22*_+a.m14,m.m15=_a03*t+_a13*r+_a23*_+a.m15),m}static translate(m,a,_){return a===m?(m.m12+=_.x,m.m13+=_.y,m.m14+=_.y):(m.m00=a.m00,m.m01=a.m01,m.m02=a.m02,m.m03=a.m03,m.m04=a.m04,m.m05=a.m05,m.m06=a.m06,m.m07=a.m07,m.m08=a.m08,m.m09=a.m09,m.m10=a.m10,m.m11=a.m11,m.m12+=_.x,m.m13+=_.y,m.m14+=_.z,m.m15=a.m15),m}static scale(m,a,_){var t=_.x,r=_.y,_=_.z;return m.m00=a.m00*t,m.m01=a.m01*t,m.m02=a.m02*t,m.m03=a.m03*t,m.m04=a.m04*r,m.m05=a.m05*r,m.m06=a.m06*r,m.m07=a.m07*r,m.m08=a.m08*_,m.m09=a.m09*_,m.m10=a.m10*_,m.m11=a.m11*_,m.m12=a.m12,m.m13=a.m13,m.m14=a.m14,m.m15=a.m15,m}static rotate(m,a,_,t){var r=t.x,s=t.y,t=t.z,e=Math.sqrt(r*r+s*s+t*t);if(Math.abs(e)<utils_1.EPSILON)return null;r*=e=1/e,s*=e,t*=e;var e=Math.sin(_),_=Math.cos(_),M=1-_,h=(_a00=a.m00,_a01=a.m01,_a02=a.m02,_a03=a.m03,_a10=a.m04,_a11=a.m05,_a12=a.m06,_a13=a.m07,_a20=a.m08,_a21=a.m09,_a22=a.m10,_a23=a.m11,r*r*M+_),c=s*r*M+t*e,n=t*r*M-s*e,i=r*s*M-t*e,u=s*s*M+_,o=t*s*M+r*e,b=r*t*M+s*e,s=s*t*M-r*e,r=t*t*M+_;return m.m00=_a00*h+_a10*c+_a20*n,m.m01=_a01*h+_a11*c+_a21*n,m.m02=_a02*h+_a12*c+_a22*n,m.m03=_a03*h+_a13*c+_a23*n,m.m04=_a00*i+_a10*u+_a20*o,m.m05=_a01*i+_a11*u+_a21*o,m.m06=_a02*i+_a12*u+_a22*o,m.m07=_a03*i+_a13*u+_a23*o,m.m08=_a00*b+_a10*s+_a20*r,m.m09=_a01*b+_a11*s+_a21*r,m.m10=_a02*b+_a12*s+_a22*r,m.m11=_a03*b+_a13*s+_a23*r,a!==m&&(m.m12=a.m12,m.m13=a.m13,m.m14=a.m14,m.m15=a.m15),m}static rotateX(m,a,_){var t=Math.sin(_),_=Math.cos(_),r=a.m04,s=a.m05,e=a.m06,M=a.m07,h=a.m08,c=a.m09,n=a.m10,i=a.m11;return a!==m&&(m.m00=a.m00,m.m01=a.m01,m.m02=a.m02,m.m03=a.m03,m.m12=a.m12,m.m13=a.m13,m.m14=a.m14,m.m15=a.m15),m.m04=r*_+h*t,m.m05=s*_+c*t,m.m06=e*_+n*t,m.m07=M*_+i*t,m.m08=h*_-r*t,m.m09=c*_-s*t,m.m10=n*_-e*t,m.m11=i*_-M*t,m}static rotateY(m,a,_){var t=Math.sin(_),_=Math.cos(_),r=a.m00,s=a.m01,e=a.m02,M=a.m03,h=a.m08,c=a.m09,n=a.m10,i=a.m11;return a!==m&&(m.m04=a.m04,m.m05=a.m05,m.m06=a.m06,m.m07=a.m07,m.m12=a.m12,m.m13=a.m13,m.m14=a.m14,m.m15=a.m15),m.m00=r*_-h*t,m.m01=s*_-c*t,m.m02=e*_-n*t,m.m03=M*_-i*t,m.m08=r*t+h*_,m.m09=s*t+c*_,m.m10=e*t+n*_,m.m11=M*t+i*_,m}static rotateZ(m,a,_){var t=Math.sin(_),_=Math.cos(_),r=a.m00,s=a.m01,e=a.m02,M=a.m03,h=a.m04,c=a.m05,n=a.m06,i=a.m07;return a!==m&&(m.m08=a.m08,m.m09=a.m09,m.m10=a.m10,m.m11=a.m11,m.m12=a.m12,m.m13=a.m13,m.m14=a.m14,m.m15=a.m15),m.m00=r*_+h*t,m.m01=s*_+c*t,m.m02=e*_+n*t,m.m03=M*_+i*t,m.m04=h*_-r*t,m.m05=c*_-s*t,m.m06=n*_-e*t,m.m07=i*_-M*t,m}static fromTranslation(m,a){return m.m00=1,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=1,m.m06=0,m.m07=0,m.m08=0,m.m09=0,m.m10=1,m.m11=0,m.m12=a.x,m.m13=a.y,m.m14=a.z,m.m15=1,m}static fromScaling(m,a){return m.m00=a.x,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=a.y,m.m06=0,m.m07=0,m.m08=0,m.m09=0,m.m10=a.z,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static fromRotation(m,a,_){var t=_.x,r=_.y,_=_.z,s=Math.sqrt(t*t+r*r+_*_);if(Math.abs(s)<utils_1.EPSILON)return null;t*=s=1/s,r*=s,_*=s;var s=Math.sin(a),a=Math.cos(a),e=1-a;return m.m00=t*t*e+a,m.m01=r*t*e+_*s,m.m02=_*t*e-r*s,m.m03=0,m.m04=t*r*e-_*s,m.m05=r*r*e+a,m.m06=_*r*e+t*s,m.m07=0,m.m08=t*_*e+r*s,m.m09=r*_*e-t*s,m.m10=_*_*e+a,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static fromXRotation(m,a){var _=Math.sin(a),a=Math.cos(a);return m.m00=1,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=a,m.m06=_,m.m07=0,m.m08=0,m.m09=-_,m.m10=a,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static fromYRotation(m,a){var _=Math.sin(a),a=Math.cos(a);return m.m00=a,m.m01=0,m.m02=-_,m.m03=0,m.m04=0,m.m05=1,m.m06=0,m.m07=0,m.m08=_,m.m09=0,m.m10=a,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static fromZRotation(m,a){var _=Math.sin(a),a=Math.cos(a);return m.m00=a,m.m01=_,m.m02=0,m.m03=0,m.m04=-_,m.m05=a,m.m06=0,m.m07=0,m.m08=0,m.m09=0,m.m10=1,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static fromRT(m,a,_){var t=a.x,r=a.y,s=a.z,a=a.w,e=t+t,M=r+r,h=s+s,c=t*e,n=t*M,t=t*h,i=r*M,r=r*h,s=s*h,e=a*e,M=a*M,a=a*h;return m.m00=1-(i+s),m.m01=n+a,m.m02=t-M,m.m03=0,m.m04=n-a,m.m05=1-(c+s),m.m06=r+e,m.m07=0,m.m08=t+M,m.m09=r-e,m.m10=1-(c+i),m.m11=0,m.m12=_.x,m.m13=_.y,m.m14=_.z,m.m15=1,m}static getTranslation(m,a){return m.x=a.m12,m.y=a.m13,m.z=a.m14,m}static getScaling(m,a){var _=m3_1.m00=a.m00,t=m3_1.m01=a.m01,r=m3_1.m02=a.m02,s=m3_1.m03=a.m04,e=m3_1.m04=a.m05,M=m3_1.m05=a.m06,h=m3_1.m06=a.m08,c=m3_1.m07=a.m09,a=m3_1.m08=a.m10;return m.x=Math.sqrt(_*_+t*t+r*r),m.y=Math.sqrt(s*s+e*e+M*M),m.z=Math.sqrt(h*h+c*c+a*a),cc_1.Mat3.determinant(m3_1)<0&&(m.x*=-1),m}static getRotation(m,a){var _=a.m00+a.m05+a.m10;let t=0;return 0<_?(t=2*Math.sqrt(_+1),m.w=.25*t,m.x=(a.m06-a.m09)/t,m.y=(a.m08-a.m02)/t,m.z=(a.m01-a.m04)/t):a.m00>a.m05&&a.m00>a.m10?(t=2*Math.sqrt(1+a.m00-a.m05-a.m10),m.w=(a.m06-a.m09)/t,m.x=.25*t,m.y=(a.m01+a.m04)/t,m.z=(a.m08+a.m02)/t):a.m05>a.m10?(t=2*Math.sqrt(1+a.m05-a.m00-a.m10),m.w=(a.m08-a.m02)/t,m.x=(a.m01+a.m04)/t,m.y=.25*t,m.z=(a.m06+a.m09)/t):(t=2*Math.sqrt(1+a.m10-a.m00-a.m05),m.w=(a.m01-a.m04)/t,m.x=(a.m08+a.m02)/t,m.y=(a.m06+a.m09)/t,m.z=.25*t),m}static toRTS(m,a,_,t){t.x=vec3_1.MVec3.set(v3_1,m.m00,m.m01,m.m02).length(),m3_1.m00=m.m00/t.x,m3_1.m01=m.m01/t.x,m3_1.m02=m.m02/t.x,t.y=vec3_1.MVec3.set(v3_1,m.m04,m.m05,m.m06).length(),m3_1.m03=m.m04/t.y,m3_1.m04=m.m05/t.y,m3_1.m05=m.m06/t.y,t.z=vec3_1.MVec3.set(v3_1,m.m08,m.m09,m.m10).length(),m3_1.m06=m.m08/t.z,m3_1.m07=m.m09/t.z,m3_1.m08=m.m10/t.z,cc_1.Mat3.determinant(m3_1)<0&&(t.x*=-1,m3_1.m00*=-1,m3_1.m01*=-1,m3_1.m02*=-1),quat_1.MQuat.fromMat3(a,m3_1),vec3_1.MVec3.set(_,m.m12,m.m13,m.m14)}static fromRTS(m,a,_,t){var r=a.x,s=a.y,e=a.z,a=a.w,M=r+r,h=s+s,c=e+e,n=r*M,i=r*h,r=r*c,u=s*h,s=s*c,e=e*c,M=a*M,h=a*h,a=a*c,c=t.x,o=t.y,t=t.z;return m.m00=(1-(u+e))*c,m.m01=(i+a)*c,m.m02=(r-h)*c,m.m03=0,m.m04=(i-a)*o,m.m05=(1-(n+e))*o,m.m06=(s+M)*o,m.m07=0,m.m08=(r+h)*t,m.m09=(s-M)*t,m.m10=(1-(n+u))*t,m.m11=0,m.m12=_.x,m.m13=_.y,m.m14=_.z,m.m15=1,m}static fromRTSOrigin(m,a,_,t,r){var s=a.x,e=a.y,M=a.z,a=a.w,h=s+s,c=e+e,n=M+M,i=s*h,u=s*c,s=s*n,o=e*c,e=e*n,M=M*n,h=a*h,c=a*c,a=a*n,n=t.x,b=t.y,t=t.z,x=r.x,v=r.y,r=r.z;return m.m00=(1-(o+M))*n,m.m01=(u+a)*n,m.m02=(s-c)*n,m.m03=0,m.m04=(u-a)*b,m.m05=(1-(i+M))*b,m.m06=(e+h)*b,m.m07=0,m.m08=(s+c)*t,m.m09=(e-h)*t,m.m10=(1-(i+o))*t,m.m11=0,m.m12=_.x+x-(m.m00*x+m.m04*v+m.m08*r),m.m13=_.y+v-(m.m01*x+m.m05*v+m.m09*r),m.m14=_.z+r-(m.m02*x+m.m06*v+m.m10*r),m.m15=1,m}static fromQuat(m,a){var _=a.x,t=a.y,r=a.z,a=a.w,s=_+_,e=t+t,M=r+r,_=_*s,h=t*s,t=t*e,c=r*s,n=r*e,r=r*M,s=a*s,e=a*e,a=a*M;return m.m00=1-t-r,m.m01=h+a,m.m02=c-e,m.m03=0,m.m04=h-a,m.m05=1-_-r,m.m06=n+s,m.m07=0,m.m08=c+e,m.m09=n-s,m.m10=1-_-t,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static frustum(m,a,_,t,r,s,e){var M=1/(_-a),h=1/(r-t),c=1/(s-e);return m.m00=2*s*M,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=2*s*h,m.m06=0,m.m07=0,m.m08=(_+a)*M,m.m09=(r+t)*h,m.m10=(e+s)*c,m.m11=-1,m.m12=0,m.m13=0,m.m14=e*s*2*c,m.m15=0,m}static perspective(m,a,_,t,r){var a=1/Math.tan(a/2),s=1/(t-r);return m.m00=a/_,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=a,m.m06=0,m.m07=0,m.m08=0,m.m09=0,m.m10=(r+t)*s,m.m11=-1,m.m12=0,m.m13=0,m.m14=2*r*t*s,m.m15=0,m}static ortho(m,a,_,t,r,s,e){var M=1/(a-_),h=1/(t-r),c=1/(s-e);return m.m00=-2*M,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=-2*h,m.m06=0,m.m07=0,m.m08=0,m.m09=0,m.m10=2*c,m.m11=0,m.m12=(a+_)*M,m.m13=(r+t)*h,m.m14=(e+s)*c,m.m15=1,m}static lookAt(m,a,_,t){var r=a.x,s=a.y,a=a.z,e=t.x,M=t.y,t=t.z,h=r-_.x,c=s-_.y,_=a-_.z,n=1/Math.sqrt(h*h+c*c+_*_),i=M*(_*=n)-t*(c*=n),t=t*(h*=n)-e*_,e=e*c-M*h,M=(i*=n=1/Math.sqrt(i*i+t*t+e*e),c*(e*=n)-_*(t*=n)),n=_*i-h*e,u=h*t-c*i;return m.m00=i,m.m01=M,m.m02=h,m.m03=0,m.m04=t,m.m05=n,m.m06=c,m.m07=0,m.m08=e,m.m09=u,m.m10=_,m.m11=0,m.m12=-(i*r+t*s+e*a),m.m13=-(M*r+n*s+u*a),m.m14=-(h*r+c*s+_*a),m.m15=1,m}static inverseTranspose(m,a){_a00=a.m00,_a01=a.m01,_a02=a.m02,_a03=a.m03,_a10=a.m04,_a11=a.m05,_a12=a.m06,_a13=a.m07,_a20=a.m08,_a21=a.m09,_a22=a.m10,_a23=a.m11,_a30=a.m12,_a31=a.m13,_a32=a.m14,_a33=a.m15;var a=_a00*_a11-_a01*_a10,_=_a00*_a12-_a02*_a10,t=_a00*_a13-_a03*_a10,r=_a01*_a12-_a02*_a11,s=_a01*_a13-_a03*_a11,e=_a02*_a13-_a03*_a12,M=_a20*_a31-_a21*_a30,h=_a20*_a32-_a22*_a30,c=_a20*_a33-_a23*_a30,n=_a21*_a32-_a22*_a31,i=_a21*_a33-_a23*_a31,u=_a22*_a33-_a23*_a32,o=a*u-_*i+t*n+r*c-s*h+e*M;return o?(o=1/o,m.m00=(_a11*u-_a12*i+_a13*n)*o,m.m01=(_a12*c-_a10*u-_a13*h)*o,m.m02=(_a10*i-_a11*c+_a13*M)*o,m.m03=0,m.m04=(_a02*i-_a01*u-_a03*n)*o,m.m05=(_a00*u-_a02*c+_a03*h)*o,m.m06=(_a01*c-_a00*i-_a03*M)*o,m.m07=0,m.m08=(_a31*e-_a32*s+_a33*r)*o,m.m09=(_a32*t-_a30*e-_a33*_)*o,m.m10=(_a30*s-_a31*t+_a33*a)*o,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m):null}static toArray(m,a,_=0){return m[_+0]=a.m00,m[_+1]=a.m01,m[_+2]=a.m02,m[_+3]=a.m03,m[_+4]=a.m04,m[_+5]=a.m05,m[_+6]=a.m06,m[_+7]=a.m07,m[_+8]=a.m08,m[_+9]=a.m09,m[_+10]=a.m10,m[_+11]=a.m11,m[_+12]=a.m12,m[_+13]=a.m13,m[_+14]=a.m14,m[_+15]=a.m15,m}static fromArray(m,a,_=0){return m.m00=a[_+0],m.m01=a[_+1],m.m02=a[_+2],m.m03=a[_+3],m.m04=a[_+4],m.m05=a[_+5],m.m06=a[_+6],m.m07=a[_+7],m.m08=a[_+8],m.m09=a[_+9],m.m10=a[_+10],m.m11=a[_+11],m.m12=a[_+12],m.m13=a[_+13],m.m14=a[_+14],m.m15=a[_+15],m}static add(m,a,_){return m.m00=a.m00+_.m00,m.m01=a.m01+_.m01,m.m02=a.m02+_.m02,m.m03=a.m03+_.m03,m.m04=a.m04+_.m04,m.m05=a.m05+_.m05,m.m06=a.m06+_.m06,m.m07=a.m07+_.m07,m.m08=a.m08+_.m08,m.m09=a.m09+_.m09,m.m10=a.m10+_.m10,m.m11=a.m11+_.m11,m.m12=a.m12+_.m12,m.m13=a.m13+_.m13,m.m14=a.m14+_.m14,m.m15=a.m15+_.m15,m}static subtract(m,a,_){return m.m00=a.m00-_.m00,m.m01=a.m01-_.m01,m.m02=a.m02-_.m02,m.m03=a.m03-_.m03,m.m04=a.m04-_.m04,m.m05=a.m05-_.m05,m.m06=a.m06-_.m06,m.m07=a.m07-_.m07,m.m08=a.m08-_.m08,m.m09=a.m09-_.m09,m.m10=a.m10-_.m10,m.m11=a.m11-_.m11,m.m12=a.m12-_.m12,m.m13=a.m13-_.m13,m.m14=a.m14-_.m14,m.m15=a.m15-_.m15,m}static multiplyScalar(m,a,_){return m.m00=a.m00*_,m.m01=a.m01*_,m.m02=a.m02*_,m.m03=a.m03*_,m.m04=a.m04*_,m.m05=a.m05*_,m.m06=a.m06*_,m.m07=a.m07*_,m.m08=a.m08*_,m.m09=a.m09*_,m.m10=a.m10*_,m.m11=a.m11*_,m.m12=a.m12*_,m.m13=a.m13*_,m.m14=a.m14*_,m.m15=a.m15*_,m}static multiplyScalarAndAdd(m,a,_,t){return m.m00=a.m00+_.m00*t,m.m01=a.m01+_.m01*t,m.m02=a.m02+_.m02*t,m.m03=a.m03+_.m03*t,m.m04=a.m04+_.m04*t,m.m05=a.m05+_.m05*t,m.m06=a.m06+_.m06*t,m.m07=a.m07+_.m07*t,m.m08=a.m08+_.m08*t,m.m09=a.m09+_.m09*t,m.m10=a.m10+_.m10*t,m.m11=a.m11+_.m11*t,m.m12=a.m12+_.m12*t,m.m13=a.m13+_.m13*t,m.m14=a.m14+_.m14*t,m.m15=a.m15+_.m15*t,m}static strictEquals(m,a){return m.m00===a.m00&&m.m01===a.m01&&m.m02===a.m02&&m.m03===a.m03&&m.m04===a.m04&&m.m05===a.m05&&m.m06===a.m06&&m.m07===a.m07&&m.m08===a.m08&&m.m09===a.m09&&m.m10===a.m10&&m.m11===a.m11&&m.m12===a.m12&&m.m13===a.m13&&m.m14===a.m14&&m.m15===a.m15}static equals(m,a,_=utils_1.EPSILON){return Math.abs(m.m00-a.m00)<=_*Math.max(1,Math.abs(m.m00),Math.abs(a.m00))&&Math.abs(m.m01-a.m01)<=_*Math.max(1,Math.abs(m.m01),Math.abs(a.m01))&&Math.abs(m.m02-a.m02)<=_*Math.max(1,Math.abs(m.m02),Math.abs(a.m02))&&Math.abs(m.m03-a.m03)<=_*Math.max(1,Math.abs(m.m03),Math.abs(a.m03))&&Math.abs(m.m04-a.m04)<=_*Math.max(1,Math.abs(m.m04),Math.abs(a.m04))&&Math.abs(m.m05-a.m05)<=_*Math.max(1,Math.abs(m.m05),Math.abs(a.m05))&&Math.abs(m.m06-a.m06)<=_*Math.max(1,Math.abs(m.m06),Math.abs(a.m06))&&Math.abs(m.m07-a.m07)<=_*Math.max(1,Math.abs(m.m07),Math.abs(a.m07))&&Math.abs(m.m08-a.m08)<=_*Math.max(1,Math.abs(m.m08),Math.abs(a.m08))&&Math.abs(m.m09-a.m09)<=_*Math.max(1,Math.abs(m.m09),Math.abs(a.m09))&&Math.abs(m.m10-a.m10)<=_*Math.max(1,Math.abs(m.m10),Math.abs(a.m10))&&Math.abs(m.m11-a.m11)<=_*Math.max(1,Math.abs(m.m11),Math.abs(a.m11))&&Math.abs(m.m12-a.m12)<=_*Math.max(1,Math.abs(m.m12),Math.abs(a.m12))&&Math.abs(m.m13-a.m13)<=_*Math.max(1,Math.abs(m.m13),Math.abs(a.m13))&&Math.abs(m.m14-a.m14)<=_*Math.max(1,Math.abs(m.m14),Math.abs(a.m14))&&Math.abs(m.m15-a.m15)<=_*Math.max(1,Math.abs(m.m15),Math.abs(a.m15))}}(exports.MMat4=MMat4).IDENTITY=Object.freeze(new cc_1.Mat4);