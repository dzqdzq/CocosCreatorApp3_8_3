"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Pool{constructor(s,t){this._fn=s,this._idx=t-1,this._frees=new Array(t);for(let e=0;e<t;++e)this._frees[e]=s()}alloc(){this._idx<0&&this._expand(Math.round(1.2*this._frees.length)+1);var e=this._frees[this._idx];return this._frees.splice(this._idx),--this._idx,e}free(e){++this._idx,this._frees[this._idx]=e}clear(s){for(let e=0;e<=this._idx;e++)s&&s(this._frees[e]);this._frees.splice(0),this._idx=-1}_expand(t){var i=this._frees,r=(this._frees=new Array(t),t-i.length);for(let e=0;e<r;++e)this._frees[e]=this._fn();for(let e=r,s=0;e<t;++e,++s)this._frees[e]=i[s];this._idx+=r}}exports.default=Pool;