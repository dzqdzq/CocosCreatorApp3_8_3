"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);n&&("get"in n?e.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){t[i=void 0===i?r:i]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0});const isWindows=!0,util=__importStar(require("./index"));function normalizeArray(e,r){var i=[];for(let t=0;t<e.length;t++){var n=e[t];n&&"."!==n&&(".."===n?i.length&&".."!==i[i.length-1]?i.pop():r&&i.push(".."):i.push(n))}return i}function trimArray(t){var e=t.length-1;let r=0;for(;r<=e&&!t[r];r++);let i=e;for(;0<=i&&!t[i];i--);return 0===r&&i===e?t:r>i?[]:t.slice(r,i+1)}const splitDeviceRe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,splitTailRe=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,win32={};function win32SplitPath(t){var t=null!=(t=splitDeviceRe.exec(t))?t:[],e=(t[1]||"")+(t[2]||""),t=t[3]||"",t=null!=(t=splitTailRe.exec(t))?t:[];return[e,t[1],t[2],t[3]]}function win32StatPath(t){var t=null!=(t=splitDeviceRe.exec(t))?t:[],e=t[1]||"",r=!!e&&":"!==e[1];return{device:e,isUnc:r,isAbsolute:r||!!t[2],tail:t[3]}}function normalizeUNCRoot(t){return"\\\\"+t.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}win32.resolve=function(){let e="",r="",i=!1,n=!1;for(let t=arguments.length-1;-1<=t;t--){var o;if(0<=t?o=arguments[t]:e?(o=process.env["="+e])&&o.substr(0,3).toLowerCase()===e.toLowerCase()+"\\"||(o=e+"\\"):o=process.cwd(),!util.isString(o))throw new TypeError("Arguments to path.resolve must be strings");if(o){var s=win32StatPath(o),l=s.device,a=(n=s.isUnc,s.isAbsolute),s=s.tail;if((!l||!e||l.toLowerCase()===e.toLowerCase())&&(e=e||l,i||(r=s+"\\"+r,i=a),e)&&i)break}}return n&&(e=normalizeUNCRoot(e)),r=normalizeArray(r.split(/[\\\/]+/),!i).join("\\"),e+(i?"\\":"")+r||"."},win32.normalize=function(t){let e=win32StatPath(t),r=e.device,i=e.isUnc,n=e.isAbsolute,o=e.tail,s=/[\\\/]$/.test(o);return(o=(o=normalizeArray(o.split(/[\\\/]+/),!n).join("\\"))||n?o:".")&&s&&(o+="\\"),(r=i?normalizeUNCRoot(r):r)+(n?"\\":"")+o},win32.isAbsolute=function(t){return win32StatPath(t).isAbsolute},win32.join=function(){var e=[];for(let t=0;t<arguments.length;t++){var r=arguments[t];if(!util.isString(r))throw new TypeError("Arguments to path.join must be strings");r&&e.push(r)}let t=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(t=t.replace(/^[\\\/]{2,}/,"\\")),win32.normalize(t)},win32.relative=function(t,e){t=win32.resolve(t),e=win32.resolve(e);var t=t.toLowerCase(),r=e.toLowerCase(),i=trimArray(e.split("\\")),n=trimArray(t.split("\\")),o=trimArray(r.split("\\")),s=Math.min(n.length,o.length);let l=s;for(var a=0;a<s;a++)if(n[a]!==o[a]){l=a;break}if(0==l)return e;let u=[];for(a=l;a<n.length;a++)u.push("..");return(u=u.concat(i.slice(l))).join("\\")},win32._makeLong=function(t){var e;return util.isString(t)?t?(e=win32.resolve(t),/^[a-zA-Z]\:\\/.test(e)?"\\\\?\\"+e:/^\\\\[^?.]/.test(e)?"\\\\?\\UNC\\"+e.substring(2):t):"":t},win32.dirname=function(t){let e=win32SplitPath(t),r=e[0],i=e[1];return r||i?r+(i=i&&i.substr(0,i.length-1)):"."},win32.basename=function(t,e){let r=win32SplitPath(t)[2];return r=e&&r.substr(-1*e.length)===e?r.substr(0,r.length-e.length):r},win32.extname=function(t){return win32SplitPath(t)[3]},win32.format=function(t){if(!util.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e,r=t.root||"";if(util.isString(r))return r=t.dir,e=t.base||"",r?r[r.length-1]===win32.sep?r+e:r+win32.sep+e:e;throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root)},win32.parse=function(t){if(!util.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=win32SplitPath(t);if(e&&4===e.length)return{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)};throw new TypeError("Invalid path '"+t+"'")},win32.sep="\\",win32.delimiter=";";const splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,posix={};function posixSplitPath(t){return null==(t=splitPathRe.exec(t))?void 0:t.slice(1)}posix.resolve=function(){let e="",r=!1;for(let t=arguments.length-1;-1<=t&&!r;t--){var i=0<=t?arguments[t]:process.cwd();if(!util.isString(i))throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,r="/"===i[0])}return e=normalizeArray(e.split("/"),!r).join("/"),(r?"/":"")+e||"."},posix.normalize=function(t){var e=posix.isAbsolute(t),r=t&&"/"===t[t.length-1];return(t=(t=normalizeArray(t.split("/"),!e).join("/"))||e?t:".")&&r&&(t+="/"),(e?"/":"")+t},posix.isAbsolute=function(t){return"/"===t.charAt(0)},posix.join=function(){let e="";for(let t=0;t<arguments.length;t++){var r=arguments[t];if(!util.isString(r))throw new TypeError("Arguments to path.join must be strings");r&&(e?e+="/"+r:e+=r)}return posix.normalize(e)},posix.relative=function(t,e){t=posix.resolve(t).substr(1),e=posix.resolve(e).substr(1);var r=trimArray(t.split("/")),i=trimArray(e.split("/")),n=Math.min(r.length,i.length);let o=n;for(var s=0;s<n;s++)if(r[s]!==i[s]){o=s;break}let l=[];for(s=o;s<r.length;s++)l.push("..");return(l=l.concat(i.slice(o))).join("/")},posix._makeLong=function(t){return t},posix.dirname=function(t){let e=posixSplitPath(t)||[],r=e[0],i=e[1];return r||i?r+(i=i&&i.substr(0,i.length-1)):"."},posix.basename=function(t,e){let r=(posixSplitPath(t)||[])[2];return r=e&&r.substr(-1*e.length)===e?r.substr(0,r.length-e.length):r},posix.extname=function(t){return(posixSplitPath(t)||[])[3]},posix.format=function(t){if(!util.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(util.isString(e))return(t.dir?t.dir+posix.sep:"")+(t.base||"");throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root)},posix.parse=function(t){if(!util.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=posixSplitPath(t);if(e&&4===e.length)return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)};throw new TypeError("Invalid path '"+t+"'")},posix.sep="/",posix.delimiter=":",exports.default=isWindows?win32:posix;