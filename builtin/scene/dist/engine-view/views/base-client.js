"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseClient=void 0;class BaseClient{static getCrashTimeOfTenMin(t){return this.crashInfoList.filter(e=>e.day===t.day&&e.year===t.year&&e.month===t.month&&Math.abs(e.minute-t.minute)<=10).length}static async getAllCrashProfile(){var e;return null!=(e=await Editor.Profile.getConfig("scene","crash.native"))?e:[]}static async addCrashToProfile(e){this.crashInfoList.push(e),await Editor.Profile.setConfig("scene","crash.native",this.crashInfoList,"global")}static createDateInfo(){var e=new Date;return{day:e.getDay(),year:e.getFullYear(),month:e.getMonth(),minute:e.getMinutes()}}static getCrashTimesOfDay(t){return this.crashInfoList.filter(e=>e.day===t.day&&e.year===t.year&&e.month===t.month).length}constructor(){}load(e){void 0===BaseClient.crashInfoList&&(BaseClient.crashInfoList=[],BaseClient.getAllCrashProfile().then(e=>{BaseClient.crashInfoList.push(...e)})),this.webview=document.createElement("webview"),this.webview.setAttribute("webPreferences","webgl=1,nativeWindowOpen=1,contextIsolation=0,backgroundThrottling=0"),this.webview.setAttribute("contextIsolation","false"),this.webview.setAttribute("nodeintegration","true"),this.webview.setAttribute("nodeintegrationinsubframes","true"),this.webview.setAttribute("enableremotemodule","true"),this.webview.setAttribute("disablewebsecurity","true"),this.webview.setAttribute("allowpopups","true"),e.appendChild(this.webview)}unload(e){this.webview.setAttribute("src",""),this.webview.reload(),e.removeChild(this.webview)}show(){this.webview.setAttribute("style","pointer-events: none;flex:1;")}hide(){this.webview.setAttribute("style","display: none")}focus(){this.webview.focus()}reload(){this.webview.reload()}async restart(){return Promise.resolve(!0)}openDevTools(){var e;null!=(e=this.webview)&&e.parentElement?null!=(e=this.webview)&&e.openDevTools():console.warn(Editor.I18n.t("scene.game_view.devtool_invalid"))}getWebContentsId(){return this.webview.getWebContentsId()}}(exports.BaseClient=BaseClient).isCrash=!1;