"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.apply=exports.init=void 0;const ipc_1=require("../native/ipc");let $scene,$loading=null,graphicalToolsIsOpen=!1;function init(e){$scene=e.$.scene,$loading=e.$.loading}function apply(e){e["open-devtools"]=async()=>{$scene&&$scene.$scene.openDevTools()},e["open-preview-devtools"]=async()=>{var e;$scene&&null!=(e=$scene.previewClient)&&e.openDevTools()},e["quit-editor"]=async()=>{await $scene.callSceneMethod("quitEditorCommand",[])&&Editor.App.quit()},e.fullScreen=()=>{Editor.Panel.focus("scene");var e=require("@editor/panel").query("scene");"absolute"===e[0].style.position?(e[0].style.position="",e[0].style.top="",e[0].style.right="",e[0].style.bottom="",e[0].style.left="",e[0].style.zIndex=""):(e[0].style.position="absolute",e[0].style.top="0",e[0].style.right="0",e[0].style.bottom="0",e[0].style.left="0",e[0].style.zIndex="999")},e.graphicalTools=()=>{$scene.isPreviewEnabled||$scene.callNativeSceneMethod?console.warn(Editor.I18n.t("scene.messages.graphical_tools_not_support")):(graphicalToolsIsOpen=!graphicalToolsIsOpen,$scene.callSceneMethod("switchGraphicalTools",[graphicalToolsIsOpen]),$scene.$scene.webview.style.pointerEvents=graphicalToolsIsOpen?"auto":"none")},e["open-scene"]=async e=>{var n;$scene&&(await(null==(n=$scene.previewSetPlay)?void 0:n.call($scene,!1)),await $scene.callSceneMethod("openScene",[e]))},e["close-scene"]=async()=>!!$scene&&$scene.callSceneMethod("closeScene",[]),e["save-scene"]=async()=>$scene?$scene.callSceneMethod("saveScene",[]):"",e["save-as-scene"]=async()=>$scene?$scene.callSceneMethod("saveScene",[!0]):"",e["soft-reload"]=async()=>{$scene&&await $scene.callSceneMethod("softReloadScene",[])},e["set-property"]=async e=>$scene?$scene.callSceneMethod("setNodeProperty",[e]):null,e["reset-property"]=async e=>$scene?$scene.callSceneMethod("resetNodeProperty",[e]):null,e["preview-set-property"]=async e=>$scene?$scene.callSceneMethod("previewSetNodeProperty",[e]):null,e["cancel-preview-set-property"]=async e=>$scene?$scene.callSceneMethod("cancelPreviewSetNodeProperty",[e]):null,e["update-property-from-null"]=async e=>$scene?$scene.callSceneMethod("updateNodePropertyFromNull",[e]):null,e["set-node-and-children-layer"]=async e=>$scene?$scene.callSceneMethod("setNodeAndChildrenLayer",[e]):null,e["move-array-element"]=async e=>$scene?$scene.callSceneMethod("moveNodeArrayElement",[e]):null,e["remove-array-element"]=async e=>$scene?$scene.callSceneMethod("removeNodeArrayElement",[e]):null,e["generate-available-name"]=async(e,n)=>$scene?$scene.callSceneMethod("generateNodeAvailableName",[e,n]):"Node",e["select-all-nodes"]=async()=>{if($scene)return $scene.callSceneMethod("selectAllNodes",[])},e["copy-node"]=async e=>!!$scene&&$scene.callSceneMethod("copyNode",[e]),e["cut-node"]=async e=>!!$scene&&$scene.callSceneMethod("cutNode",[e]),e["duplicate-node"]=async e=>!!$scene&&$scene.callSceneMethod("duplicateNode",[e]),e["paste-node"]=async e=>!!$scene&&$scene.callSceneMethod("pasteNode",[e]),e["set-parent"]=async e=>!!$scene&&$scene.callSceneMethod("setNodeParent",[e]),e["create-node"]=async e=>{if(!$scene)return null;e.assetUuid&&Editor.Metrics._trackEventWithTimer({category:"node",id:"A100000_"+e.assetUuid,value:1});let n;null!=e&&e.snapshot&&e.parent&&(n=await $scene.callSceneMethod("beginRecording",[e.parent]));e=await $scene.callSceneMethod("createNode",[e]);return n&&await $scene.callSceneMethod("endRecording",[n]),e},e["reset-node"]=async e=>{e=e.uuid instanceof Array?e.uuid[0]:e.uuid;return e&&$scene?$scene.callSceneMethod("resetNode",[e]):null},e["restore-prefab"]=async(e,n)=>!!$scene&&$scene.callSceneMethod("restorePrefab",[e,n]),e["apply-prefab"]=async e=>!!$scene&&$scene.callSceneMethod("applyPrefab",[e]),e["apply-removed-component"]=async(e,n)=>!!$scene&&$scene.callSceneMethod("applyRemovedComponent",[e,n]),e["revert-removed-component"]=async(e,n)=>!!$scene&&$scene.callSceneMethod("revertRemovedComponent",[e,n]),e["remove-node"]=async e=>{$scene&&await $scene.callSceneMethod("removeNode",[e])},e["change-node-lock"]=(e,n,c)=>{$scene&&$scene.callSceneMethod("changeNodeLock",[e,n,c])},e["create-component"]=async e=>{$scene&&await $scene.callSceneMethod("createComponent",[e])},e["reset-component"]=async e=>{$scene&&await $scene.callSceneMethod("resetComponent",[e.uuid])},e["remove-component"]=async e=>{$scene&&await $scene.callSceneMethod("removeComponent",[e])},e["execute-component-method"]=async e=>!!$scene&&$scene.callSceneMethod("executeComponentMethod",[e]),e["execute-scene-script"]=async e=>{if($scene)return $scene.callSceneMethod("executeSceneScriptMethod",[e],!0)},e.snapshot=async()=>{$scene&&await $scene.callSceneMethod("snapshot",[])},e["snapshot-abort"]=async()=>{$scene&&await $scene.callSceneMethod("abortSnapshot",[])},e["begin-recording"]=async(e,n)=>{if($scene)return $scene.callSceneMethod("beginRecording",[e,null!=n?n:void 0])},e["end-recording"]=async e=>{$scene&&await $scene.callSceneMethod("endRecording",[e])},e["cancel-recording"]=async e=>{$scene&&await $scene.callSceneMethod("cancelRecording",[e])},e.undo=async()=>{$scene&&await $scene.callSceneMethod("undo",[])},e.redo=async()=>{$scene&&await $scene.callSceneMethod("redo",[])},e["preview-material"]=async(e,n,c)=>{if(!$scene)return null;await $scene.callSceneMethod("previewMaterial",[e,n,c])},e["apply-material"]=async(e,n)=>{await $scene.callSceneMethod("applyMaterial",[e,n])},e["change-physics-material"]=async e=>$scene?$scene.callSceneMethod("changePhysicsMaterial",[e]):null,e["apply-physics-material"]=async e=>{await $scene.callSceneMethod("applyPhysicsMaterial",[e])},e["change-animation-graph-variant"]=async e=>$scene?$scene.callSceneMethod("changeAnimationGraphVariant",[e]):null,e["apply-animation-graph-variant"]=async e=>{await $scene.callSceneMethod("applyAnimationGraphVariant",[e])},e["change-animation-mask"]=async e=>$scene?$scene.callSceneMethod("changeAnimationMask",[e]):null,e["apply-animation-mask"]=async e=>{await $scene.callSceneMethod("applyAnimationMask",[e])},e["apply-render-texture"]=async(e,n)=>{await $scene.callSceneMethod("applyRenderTexture",[e,n])},e["change-render-pipeline"]=async e=>$scene?$scene.callSceneMethod("changeRenderPipeline",[e]):null,e["apply-render-pipeline"]=async(e,n)=>{await $scene.callSceneMethod("applyRenderPipeline",[e,n])},e["light-probe-update-tetrahedron"]=async()=>{$scene&&await $scene.callSceneMethod("updateInnerTetrahedron")},e["change-gizmo-tool"]=async e=>{$scene&&await $scene.callSceneMethod("setTransformToolName",[e])},e["change-gizmo-pivot"]=async e=>{$scene&&await $scene.callSceneMethod("setPivot",[e])},e["change-gizmo-coordinate"]=async e=>{!$scene||"local"!==e&&"global"!==e||await $scene.callSceneMethod("setCoordinate",[e])},e["change-is2D"]=async e=>{$scene&&await $scene.callSceneMethod("setIs2D",[e])},e["set-icon-gizmo-3d"]=async e=>{$scene&&await $scene.callSceneMethod("setIconGizmo3D",[e])},e["set-icon-gizmo-size"]=async e=>{$scene&&await $scene.callSceneMethod("setIconGizmoSize",[e])},e["focus-camera"]=async e=>{$scene&&e&&await $scene.callSceneMethod("focus",[e])},e["align-node-to-scene-view"]=async e=>{$scene&&e&&await $scene.callSceneMethod("alignNodeToSceneView",[e])},e["set-grid-visible"]=async e=>{$scene&&await $scene.callSceneMethod("setGridVisible",[e])},e["align-with-view"]=async()=>{$scene&&await $scene.callSceneMethod("alignWithView",[])},e["align-view-with-node"]=async()=>{$scene&&await $scene.callSceneMethod("alignViewWithNode",[])},e["zoom-scene-view-down"]=async()=>{$scene&&await $scene.callSceneMethod("zoomSceneViewDown",[])},e["zoom-scene-view-up"]=async()=>{$scene&&await $scene.callSceneMethod("zoomSceneViewUp",[])},e["toggle-active-selected-node"]=async()=>{$scene&&await $scene.callSceneMethod("toggleActiveSelectedNode",[])},e["toggle-active-unselected-node"]=async()=>{$scene&&await $scene.callSceneMethod("toggleActiveUnselectedNode",[])},e["toggle-active-all-nodes"]=async()=>{$scene&&await $scene.callSceneMethod("toggleActiveAllNodes",[])},e["set-transform-snap-configs"]=async(e,n)=>{$scene&&await $scene.callSceneMethod("setTransformSnapConfigs",[e,n])},e["set-rect-snapping-configs"]=async(e,n)=>{$scene&&await $scene.callSceneMethod("setRectSnappingConfigs",[e,n])},e["record-animation"]=async(e,n,c)=>{var a;return await(null==(a=$scene.previewSetPlay)?void 0:a.call($scene,!1)),$scene.callSceneMethod("recordAnimation",[e,n,c])},e["change-animation-root"]=async(e,n)=>$scene.callSceneMethod("changeAnimationRootNode",[e,n]),e["set-edit-time"]=async e=>$scene.callSceneMethod("setCurEditTime",[e]),e["change-clip-state"]=async(e,n)=>$scene.callSceneMethod("changeClipState",[e,n]),e["change-edit-clip"]=async e=>$scene.callSceneMethod("setEditClip",[e]),e["save-clip"]=async()=>$scene.callSceneMethod("saveScene",[]),e["animation-operation"]=async(e,n)=>$scene.callSceneMethod("applyAnimationOperation",[e,n]),e["editor-preview-set-play"]=async e=>{var n=await(null==(n=$scene.previewSetPlay)?void 0:n.call($scene,e));return e||$scene.callSceneMethod("syncAfterExitEditorPreview",[]),n},e["editor-preview-change-style"]=async()=>{var e;return!$scene||null==(e=$scene.previewUpdateStyle)?void 0:e.call($scene)},e["editor-preview-change-config"]=async()=>{var e;$scene&&await(null==(e=$scene.previewUpdateConfig)?void 0:e.call($scene))},e["editor-preview-call-method"]=async(e,...n)=>{var c;return!$scene||null==(c=$scene.previewCallMethod)?void 0:c.call($scene,e,...n)},e["regenerate-polygon-2d-points"]=e=>{$scene&&$scene.callSceneMethod("regeneratePolygon2DPoints",[e])},e["export-particle-plist"]=async e=>{if($scene)return $scene.callSceneMethod("exportParticlePlist",[e])},e["unit-test"]=async e=>{if($scene)return $scene.callSceneMethod("unitTest",[e],!0)},e["change-target-resolution"]=(e,n)=>{$scene&&$scene.callSceneMethod("changeTargetResolution",[e,n])},e["set-scene-light-on"]=e=>{$scene&&$scene.callSceneMethod("setSceneLightOn",[e])},e["call-preview-function"]=(e,n,...c)=>$scene?$scene.callSceneMethod("callPreviewFunction",[e,n,c]):null,e["change-debug-view-option"]=e=>{$scene&&$scene.callSceneMethod("changeDebugOption",[e.type,e.value])},e["lod-apply-current-camera-size"]=e=>{if($scene)return $scene.callSceneMethod("applyCurrentCameraSize",[e])},e["lod-insert"]=(e,n,c)=>{$scene&&$scene.callSceneMethod("insertLOD",[e,n,c])},e["lod-erase"]=(e,n)=>{$scene&&$scene.callSceneMethod("eraseLOD",[e,n])},e["toggle-light-probe-edit-mode"]=e=>$scene?$scene.callSceneMethod("toggleLightProbeEditMode",e?[e]:[!1]):null,e["toggle-light-probe-bounding-box-edit-mode"]=e=>$scene?$scene.callSceneMethod("toggleLightProbeBoundingBoxEditMode",e?[e]:[!1]):null,e["change-native-config"]=e=>$scene.callSceneMethod("onNativeConfigChange",[e]),e["on-browser-panel"]=async(e,n,...c)=>ipc_1.PanelIpc.onBrowserToPanel(e,n,...c)}exports.init=init,exports.apply=apply;