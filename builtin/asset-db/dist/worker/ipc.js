"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let isReady=!(exports.ipcAddListener=exports.ipcSend=exports.setReady=void 0);const waitQueue=[];function waitReady(e){if(!isReady)return console.debug(`Can not execute message ${e} success`),new Promise(e=>{waitQueue.push(()=>{e()})})}function setReady(){for(isReady=!0;0<waitQueue.length;)waitQueue.shift()()}function ipcSend(e,...t){Worker.Ipc.send(e,...t)}function ipcAddListener(i,s){Worker.Ipc.on(i,async(t,...e)=>{try{await waitReady(i),t.reply(null,await s(...e))}catch(e){t.reply(e)}})}exports.setReady=setReady,exports.ipcSend=ipcSend,exports.ipcAddListener=ipcAddListener;