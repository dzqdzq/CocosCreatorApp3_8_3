"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,a,t,s){void 0===s&&(s=t);var r=Object.getOwnPropertyDescriptor(a,t);r&&("get"in r?a.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return a[t]}}),Object.defineProperty(e,s,r)}:function(e,a,t,s){e[s=void 0===s?t:s]=a[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,a){Object.defineProperty(e,"default",{enumerable:!0,value:a})}:function(e,a){e.default=a}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(a,e,t);return __setModuleDefault(a,e),a},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessageMap=void 0;const asset_db_1=require("@editor/asset-db"),plugin_1=__importDefault(require("../manager/plugin")),asset_handler_manager_1=require("../manager/asset-handler-manager"),asset_manager_1=require("../manager/asset-manager");exports.MessageMap={"save-asset-meta":async(e,a)=>{if(!e||!a)throw new Error(Editor.I18n.t("asset-db.saveAssetMeta.fail.content"));var t=asset_manager_1.assetManager.queryAsset(e);if(!t)return!1;try{var s=JSON.parse(a);return await asset_manager_1.assetManager.saveAssetMeta(e,s,t),asset_manager_1.assetManager.reimportAsset(t.uuid),!0}catch(e){return console.warn(e),!1}},"reimport-asset":async e=>asset_manager_1.assetManager.reimportAsset(e),"query-all-importer":async()=>asset_handler_manager_1.assetHandlerManager.queryAllImporter(),"query-all-asset-types":async()=>asset_handler_manager_1.assetHandlerManager.queryAllAssetTypes(),"refresh-asset":async e=>asset_manager_1.assetManager.refreshAsset(e),"refresh-all-effect":async()=>{(0,asset_db_1.forEach)(e=>{e.path2asset.forEach(e=>{e&&"effect"===e.meta.importer&&e._assetDB.reimport(e.uuid)})})},"execute-script":async e=>{Editor.Metrics.trackTimeStart("programming:execute-script");e=await plugin_1.default.executeScript(e);return Editor.Metrics.trackTimeEnd("programming:execute-script",{output:!0}),e},"change-high-quality":async e=>{var a=(await Promise.resolve().then(()=>__importStar(require("cc"))))["settings"];a.overrideSettings("rendering","highQualityMode",e)},"refresh-default-user-data":()=>asset_handler_manager_1.assetHandlerManager.refreshDefaultUserData(),"update-default-user-data":(e,a,t)=>asset_handler_manager_1.assetHandlerManager.updateDefaultUserData(e,a,t),"remove-asset":async e=>asset_manager_1.assetManager.removeAsset(e),"rename-asset":async(e,a,t)=>asset_manager_1.assetManager.renameAsset(e,a,t),"move-asset":async(e,a,t)=>asset_manager_1.assetManager.moveAsset(e,a,t),"create-asset":async e=>asset_manager_1.assetManager.createAsset(e),"create-asset-dialog":async e=>asset_manager_1.assetManager.createAssetDialog(e),"execute-custom-operation":async(e,a,...t)=>asset_handler_manager_1.assetHandlerManager.executeCustomOperation(e,a,...t),"open-asset":async e=>{e=Editor.Utils.UUID.isUUID(e)?e:asset_manager_1.assetManager.queryAssetUUID(e);return!!e&&asset_handler_manager_1.assetHandlerManager.openAsset(asset_manager_1.assetManager.queryAsset(e))}};