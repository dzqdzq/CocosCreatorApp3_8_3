"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPlatform=exports.darwin=exports.win32=void 0;const ps=require("path"),fse=require("fs-extra");async function win32(){Editor.Menu.__protected__.add("",{label:"i18n:menu.file",order:-89}),Editor.Menu.__protected__.add("",{label:"i18n:menu.edit",order:-79}),Editor.Menu.__protected__.add("",{label:"i18n:menu.node",order:-69}),Editor.Menu.__protected__.add("",{label:"i18n:menu.project",order:-59}),Editor.Menu.__protected__.add("",{label:"i18n:menu.panel",order:-49}),Editor.Menu.__protected__.add("",{label:"i18n:menu.extension",order:-29}),Editor.Menu.__protected__.add("",{label:"i18n:menu.develop",order:-19}),Editor.Menu.__protected__.add("",{label:"i18n:menu.help",role:"help",order:-9}),file(),edit(),node(),develop(),help(),extension(),projectMenu(),Editor.Menu.__protected__.add("i18n:menu.file",{label:"i18n:menu.layout",group:"layout"}),await addLayoutMenu("i18n:menu.file"),Editor.Menu.__protected__.add("i18n:menu.file",{label:"i18n:menu.close",group:"quit",role:"close"}),Editor.Menu.__protected__.add("i18n:menu.extension",{label:"i18n:menu.extension",visible:!1}),Editor.Menu.__protected__.apply()}async function darwin(){Editor.Menu.__protected__.add("",{label:"Cocos Creator",order:-99}),Editor.Menu.__protected__.add("",{label:"i18n:menu.file",order:-89}),Editor.Menu.__protected__.add("",{label:"i18n:menu.edit",order:-79}),Editor.Menu.__protected__.add("",{label:"i18n:menu.node",order:-69}),Editor.Menu.__protected__.add("",{label:"i18n:menu.project",order:-59}),Editor.Menu.__protected__.add("",{label:"i18n:menu.panel",order:-49}),Editor.Menu.__protected__.add("",{label:"i18n:menu.extension",order:-29}),Editor.Menu.__protected__.add("",{label:"i18n:menu.develop",order:-19}),Editor.Menu.__protected__.add("",{label:"i18n:menu.help",role:"help",order:-9}),Editor.Menu.__protected__.addGroup("Cocos Creator","about",0),Editor.Menu.__protected__.addGroup("Cocos Creator","layout",1),Editor.Menu.__protected__.addGroup("Cocos Creator","default",2),Editor.Menu.__protected__.addGroup("Cocos Creator","display",3),Editor.Menu.__protected__.addGroup("Cocos Creator","quit",99),file(),edit(),node(),develop(),help(),extension(),projectMenu(),Editor.Menu.__protected__.add("Cocos Creator",{label:"i18n:menu.layout",group:"layout"}),await addLayoutMenu("Cocos Creator"),Editor.Menu.__protected__.add("Cocos Creator",{label:"i18n:menu.hide",group:"display",role:"hide"}),Editor.Menu.__protected__.add("Cocos Creator",{label:"i18n:menu.hide_other",group:"display",role:"hideOthers"}),Editor.Menu.__protected__.add("Cocos Creator",{label:"i18n:menu.show_all",group:"display",role:"unhide"}),Editor.Menu.__protected__.add("Cocos Creator",{label:"i18n:menu.close",group:"quit",role:"close"}),Editor.Menu.__protected__.add("i18n:menu.extension",{label:"i18n:menu.extension",visible:!1}),Editor.Menu.__protected__.apply()}function file(){Editor.Menu.__protected__.addGroup("i18n:menu.file","project",0),Editor.Menu.__protected__.addGroup("i18n:menu.file","scene",1),Editor.Menu.__protected__.addGroup("i18n:menu.file","default",9),Editor.Menu.__protected__.addGroup("i18n:menu.file","layout",2),Editor.Menu.__protected__.addGroup("i18n:menu.file","display",3),Editor.Menu.__protected__.addGroup("i18n:menu.file","quit",99),Editor.Menu.__protected__.add("i18n:menu.file",{label:"i18n:menu.new_project",group:"project",enabled:!!process.send,click(){Editor.Project.__protected__.create()}}),Editor.Menu.__protected__.add("i18n:menu.file",{label:"i18n:menu.open_project",group:"project",enabled:!!process.send,click(){Editor.Project.__protected__.open()}})}function edit(){Editor.Menu.__protected__.addGroup("i18n:menu.edit","undo",0),Editor.Menu.__protected__.addGroup("i18n:menu.edit","edit",1),Editor.Menu.__protected__.addGroup("i18n:menu.edit","default",99)}function node(){Editor.Menu.__protected__.addGroup("i18n:menu.node","operation",0),Editor.Menu.__protected__.addGroup("i18n:menu.node","default",1),Editor.Menu.__protected__.addGroup("i18n:menu.node","create",99)}function projectMenu(){Editor.Menu.__protected__.addGroup("i18n:menu.project","preview",0),Editor.Menu.__protected__.addGroup("i18n:menu.project","setting",2),Editor.Menu.__protected__.addGroup("i18n:menu.project","build",99)}function develop(){Editor.Menu.__protected__.addGroup("i18n:menu.develop","engine",1),Editor.Menu.__protected__.addGroup("i18n:menu.develop","tools",2),Editor.Menu.__protected__.addGroup("i18n:menu.develop","default",98),Editor.Menu.__protected__.addGroup("i18n:menu.develop","operation",99),Editor.Menu.__protected__.add("i18n:menu.develop",{label:"i18n:menu.reload",group:"operaton",role:"reload"}),Editor.Menu.__protected__.add("i18n:menu.develop",{label:"i18n:menu.toggle_devtools",group:"operation",role:"toggleDevTools"}),Editor.App.dev&&Editor.Menu.__protected__.add("i18n:menu.develop",{label:"Devtron",group:"tools",click(){try{require("devtron").install()}catch(e){console.warn(e)}}})}function help(){Editor.Menu.__protected__.addGroup("i18n:menu.help","doc",1),Editor.Menu.__protected__.addGroup("i18n:menu.help","licenses",2),Editor.Menu.__protected__.addGroup("i18n:menu.help","engine",3),Editor.Menu.__protected__.addGroup("i18n:menu.help","user",9),Editor.Menu.__protected__.addGroup("i18n:menu.help","about",99);const e=require("./manual");[{label:"i18n:menu.help_menu.docs",group:"doc",click(){e.openManual()}},{label:"i18n:menu.help_menu.api",group:"doc",click(){e.openAPI()}},{label:"i18n:menu.help_menu.forum",group:"doc",click(){e.openForum()}},{label:"i18n:menu.help_menu.softwareLicenses",group:"licenses",click(){e.openSoftwareLicense()}},{label:"i18n:menu.help_menu.release_notes",group:"engine",click(){e.openReleaseNotes()}},{label:"i18n:menu.help_menu.engine_repo",group:"engine",click(){e.openEngineRepo()}}].forEach(e=>{Editor.Menu.__protected__.add("i18n:menu.help",e)})}function extension(){Editor.Menu.__protected__.addGroup("i18n:menu.extension","management",-99),Editor.Menu.__protected__.addGroup("i18n:menu.extension","help",-89),Editor.Menu.__protected__.addGroup("i18n:menu.extension","default",0),Editor.Menu.__protected__.addGroup("i18n:menu.extension","create",99)}function getPlatform(e){return"win32"!==e?darwin:win32}async function addLayoutMenu(e){Editor.Menu.__protected__.add(e+"/i18n:menu.layout",{label:"i18n:menu.default_layout",async click(){Editor.Layout.apply(await Editor.Layout.query("default"))}}),Editor.Menu.__protected__.add(e+"/i18n:menu.layout",{label:"i18n:menu.customLayout",enabled:!!await Editor.Layout.query("custom"),async click(){Editor.Layout.apply(await Editor.Layout.query("custom"))}}),Editor.Menu.__protected__.add(e+"/i18n:menu.layout",{label:"i18n:menu.saveAsCustomLayout",click(){Editor.Dialog.info(Editor.I18n.t("menu.saveAsCustomLayoutTips"),{title:Editor.I18n.t("menu.saveAsCustomLayout"),buttons:[Editor.I18n.t("menu.buttons.confirm"),Editor.I18n.t("menu.buttons.cancel")],default:0}).then(e=>{0===e.response&&Editor.Layout.__protected__.add("custom")})}})}exports.win32=win32,exports.darwin=darwin,exports.getPlatform=getPlatform;