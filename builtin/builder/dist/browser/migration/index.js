"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.migrateBuilderProfile=exports.migrateOptions=void 0;const _1_2_1_1=require("./version/1.2.1"),utils_1=require("./utils"),_1_2_2_1=require("./version/1.2.2"),_1_2_3_1=require("./version/1.2.3"),options_1=require("./options");async function migrateOptions(e,i){await(0,options_1.migrateOptions)(e,i)}async function migrateBuilderProfile(r){var e=await Editor.Profile.getConfig("builder","","local");if(e&&0!==Object.keys(e).length){e.version="object"==typeof e.version?e.version:{};const t=e.version.builder;let i=Object.keys(migrateProfileMap).sort((e,i)=>(0,utils_1.compareVersion)(e,i)?1:-1);if(0!==(i=(i=r?i.filter(e=>!(0,utils_1.compareVersion)(e,r)):i).filter(e=>(0,utils_1.compareVersion)(e,t))).length){for(const o of i)await migrateProfileMap[o](),await Editor.Profile.setConfig("builder","version.builder",o);let e=await Editor.Profile.getConfig("builder","version");(e=e&&"object"==typeof e?e:{}).builder=i[i.length-1],await Editor.Profile.setConfig("builder","version",e)}}}exports.migrateOptions=migrateOptions,exports.migrateBuilderProfile=migrateBuilderProfile;const migrateProfileMap={"1.2.1":_1_2_1_1.migrateProfile_1_2_1,"1.2.2":_1_2_2_1.migrateProfile_1_2_2,"1.2.3":_1_2_3_1.migrateProfile_1_2_3},optionsMigrates=[_1_2_1_1.migratePackagesOption,_1_2_2_1.migrateTaskName,_1_2_2_1.migrateHuaweiOption];