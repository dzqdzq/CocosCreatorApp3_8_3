"use strict";var applyContourBleed=function(e,t,i,r,o,f,d){if(0!==r.width&&0!==r.height)for(var l,a,n,p=r.x,h=r.xMax,y=r.y,g=r.yMax,c=4*i,s=0,u=o.length,x=0,m=y*c+4*p,B=y,w=0;B<g;++B,m+=c)for(x=m,w=p;w<h;++w,x+=4)if(0===t[x+3])for(s=0;s<u;s++)if(l=w+o[s],a=B+f[s],p<=l&&l<h&&y<=a&&a<g&&0<t[(n=x+d[s])+3]){e[x]=t[n],e[x+1]=t[n+1],e[x+2]=t[n+2];break}},applyPaddingBleed=function(e,t,i,r,o){if(0!==o.width&&0!==o.height){var f=o.y,d=o.yMax-1,l=o.x,o=o.xMax-1,a=4*i,n=4*l,p=4*o,h=f*a,y=d*a,g=0,c=0;if(0<=f-1)for(g=h+n,c=h+p+3;g<=c;++g)e[g-a]=t[g];if(1+d<r)for(g=y+n,c=y+p+3;g<=c;++g)e[g+a]=t[g];if(0<=l-1)for(g=h+n,c=y+n;g<=c;g+=a)e[g-4]=t[g],e[g-3]=t[g+1],e[g-2]=t[g+2],e[g-1]=t[g+3];if(1+o<i)for(g=h+p,c=y+p;g<=c;g+=a)e[g+4]=t[g],e[g+5]=t[g+1],e[g+6]=t[g+2],e[g+7]=t[g+3];if(0<=l-1&&0<=f-1)for(c=(g=h+n)+4;g<c;g++)e[g-a-4]=t[g];if(1+o<i&&0<=f-1)for(c=(g=h+p)+4;g<c;g++)e[g-a+4]=t[g];if(0<=l-1&&1+d<r)for(c=(g=y+n)+4;g<c;g++)e[g+a-4]=t[g];if(1+o<i&&1+d<r)for(c=(g=y+p)+4;g<c;g++)e[g+a+4]=t[g]}},applyBleed=function(e,t,i,r){let o=0,f=null;if(e.contourBleed){for(var d=4*t.width,l=[-1,0,1,-1,1,-1,0,1],a=[-1,-1,-1,0,0,1,1,1],n=[],p=0;p<l.length;p++)n[p]=4*l[p]+a[p]*d;for(o=0,f=null;o<t.spriteFrameInfos.length;o++)f=t.spriteFrameInfos[o].trim,applyContourBleed(r,i,t.width,cc.rect(f.x,f.y,f.rotatedWidth,f.rotatedHeight),l,a,n)}if(e.paddingBleed){for(console.time("apply padding bleed"),o=0,f=null;o<t.spriteFrameInfos.length;o++)f=t.spriteFrameInfos[o].trim,applyPaddingBleed(r,i,t.width,t.height,cc.rect(f.x,f.y,f.rotatedWidth,f.rotatedHeight));console.timeEnd("apply padding bleed")}};module.exports={applyBleed:applyBleed};