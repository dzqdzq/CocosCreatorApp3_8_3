"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.name=exports.title=void 0;const path_1=require("path"),plugin_1=require("../../../plugin");async function handle(a,e,t){let r={};try{var s=plugin_1.pluginManager.platformConfigs[a.platform].type;s&&(r={["loadPluginIn"+(s[0].toUpperCase()+s.slice(1))]:!0})}catch(t){console.error(t),console.warn("Can not find platform type for "+a.platform)}if(e.pluginScripts=await Editor.Message.request("programming","query-sorted-plugins",r),!a.preview){e.paths.polyfillsJs=(0,path_1.join)(e.paths.dir,"src","polyfills.bundle.js"),e.paths.systemJs=(0,path_1.join)(e.paths.dir,"src","system.bundle.js");s=(0,path_1.join)(e.paths.dir,""+a.buildEngineParam.engineName),s=(e.paths.engineDir=s,a.buildEngineParam.output=s,a.buildScriptParam)["importMapFormat"];let t;var i=(0,path_1.join)(e.paths.dir,"src"),s=(t=void 0===s?".json":".js",(0,path_1.join)(i,"import-map"+t));e.paths.importMap=s,a.buildScriptParam.commonDir=(0,path_1.join)(e.paths.dir,"src","chunks")}}exports.title="i18n:builder.tasks.sort_asset_bundle",exports.name="data-task/asset_script",exports.handle=handle;