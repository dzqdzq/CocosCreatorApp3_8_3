"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterAssetWithBundleConfig=exports.matchFilterConfig=exports.checkAssetWithFilterConfig=void 0;const minimatch_1=__importDefault(require("minimatch"));function checkAssetWithFilterConfig(t,e){var i;return!e||!e.length||!!(i=!(i=e.filter(e=>"include"===e.range)).length||i.some(e=>matchFilterConfig(t,e)))&&((e=e.filter(e=>"exclude"===e.range)).length?!e.some(e=>matchFilterConfig(t,e)):i)}function matchFilterConfig(e,t){var i="include"===t.range;let n=i;if("asset"===t.type&&t.assets)n=t.assets.length?t.assets.includes(e.uuid):i;else if("url"===t.type&&t.patchOption)if(t.patchOption.value)switch(t.patchOption.patchType){case"beginWith":n=new RegExp("^"+t.patchOption.value,"i").test(e.url);break;case"endWith":n=new RegExp(t.patchOption.value+"$","i").test(e.url);break;case"contain":n=new RegExp(t.patchOption.value,"i").test(e.url);break;case"glob":n=(0,minimatch_1.default)(e.url,t.patchOption.value,{nocase:!0})}else n=i;return n}function filterAssetWithBundleConfig(e,t){return e.filter(e=>checkAssetWithFilterConfig(e,t))}exports.checkAssetWithFilterConfig=checkAssetWithFilterConfig,exports.matchFilterConfig=matchFilterConfig,exports.filterAssetWithBundleConfig=filterAssetWithBundleConfig;