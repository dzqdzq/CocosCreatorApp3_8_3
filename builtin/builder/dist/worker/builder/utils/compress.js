"use strict";function compressJson(e){if("object"!=typeof e)return e;var r={};let t=e;var o=new Set;let c=[];if(Array.isArray(e)){if(collectArrayKey(e,r,o),o.size<1)return t;c=Array.from(c),t=renameArrayJson(e,c)}else{if(collectObjectKey(e,r,o),o.size<1)return t;c=Array.from(o),t=renameObjectJson(e,c)}return{keys:c,data:t}}function renameObjectJson(o,c){if(!o)return o;const n=Object.create(null);return Object.keys(o).forEach(e=>{let r=e;/^\d$/.test(e)&&c.push(e);var t=c.indexOf(e);-1!==t&&(r=t),o[e]&&"object"==typeof o[e]?Array.isArray(o[e])?n[r]=renameArrayJson(o[e],c):n[r]=renameObjectJson(o[e],c):n[r]=o[e]}),n}function renameArrayJson(e,r){return e&&e.map(e=>e&&"object"==typeof e?(Array.isArray(e)?renameArrayJson:renameObjectJson)(e,r):e)}function collectObjectKey(r,t,o){r&&Object.keys(r).forEach(e=>{null!==r[e]&&void 0!==r[e]&&(t[e]?o.add(e):t[e]=1,"object"==typeof r[e])&&(Array.isArray(r[e])?collectArrayKey:collectObjectKey)(r[e],t,o)})}function collectArrayKey(e,r,t){e&&e.forEach(e=>{e&&"object"==typeof e&&(Array.isArray(e)?collectArrayKey:collectObjectKey)(e,r,t)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compressJson=void 0,exports.compressJson=compressJson;