"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BuiltinHashType=exports.calculate=void 0;const utils_1=require("../../../share/utils"),XXH=require("xxhashjs"),UNIQUE_ID_SEP="-";function unique(t){var r={};for(let e=0;e<t.length;e++){var s=t[e],a=r[s];void 0===a?r[s]=1:(t[e]=s+UNIQUE_ID_SEP+a.toString(16),r[s]=a+1)}}function calculate(r,t){var s=XXH.h32(),a=[];for(let e=0;e<r.length;e++){let t=r[e];t=t.slice().sort(utils_1.compareUUID);for(let e=0;e<t.length;e++)s.update(t[e]);var l=s.digest().toString(16).padEnd(8,"0");a.push(l)}if(unique(a),"string"==typeof t){if(t.length<2)return console.error("hashName string length must >= 2"),a}else if(!(t="0123456789abcdef"[t]))return console.error("Invalid hashName"),a;return a.map(e=>t+e)}exports.calculate=calculate,exports.BuiltinHashType={PackedAssets:0,AutoAtlasImage:1};