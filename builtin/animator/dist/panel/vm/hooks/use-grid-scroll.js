"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useGridScrollSync=exports.useScrollVm=void 0;const vue_js_1=require("vue/dist/vue.js"),grid_ctrl_1=require("../../share/grid-ctrl");function useScrollVm(){const l=(0,vue_js_1.ref)(1),r=(0,vue_js_1.ref)(0);return{scale:l,offset:r,onChange:e=>{e=e.detail;l.value=e.scale,r.value=e.offset},onConfirm:e=>{e=e.detail;l.value=e.scale,r.value=e.offset},reset:()=>{l.value=1,r.value=0}}}function useGridScrollSync(e){const{curveElement:l,emitGlobalTransform:r}=e,s=()=>l.value?.curveCtrl,{offset:a,scale:t,onChange:u}=useScrollVm(),{offset:c,scale:o,onChange:f}=useScrollVm(),n=()=>{var e=s();grid_ctrl_1.gridCtrl.grid&&e&&(0,grid_ctrl_1.syncAxisX)(e.grid,grid_ctrl_1.gridCtrl.grid)},v=()=>{var e=s();e&&(e=e.getScroll(),t.value=e.xScale,a.value=e.xOffset,o.value=e.yScale,c.value=e.yOffset)};return{xOffset:a,xScale:t,yOffset:c,yScale:o,onTransform:()=>{n(),v(),r()},onXChange:e=>{u(e);e=s();e&&(e.setScroll({xOffset:a.value,xScale:t.value,yOffset:c.value,yScale:o.value}),n(),r())},onYChange:e=>{f(e);e=s();e&&(e.setScroll({yOffset:c.value,yScale:o.value,xScale:t.value,xOffset:a.value}),n(),r())},updateScrollFromCurve:v,updateGlobalGrid:n}}exports.useScrollVm=useScrollVm,exports.useGridScrollSync=useGridScrollSync;