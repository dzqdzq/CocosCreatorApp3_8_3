"use strict";const EditorMath=Editor.Utils.Math;class LinearTicks{constructor(){this.ticks=[],this.tickLods=[],this.tickRatios=[],this.minScale=.1,this.maxScale=1e3,this.minValueScale=1,this.maxValueScale=1,this.minValue=-500,this.maxValue=500,this.pixelRange=500,this.minSpacing=10,this.maxSpacing=80}initTicks(i,t,s){(s=s<=0?1:s)<(t=t<=0?1:t)&&(s=t),this.tickLods=i,this.minScale=t,this.maxScale=s,this.ticks=[];let h=1,a=0;this.ticks.push(h);var e=t,c=s;let l=1,n=1;for(;h*this.tickLods[a]<=c;)h*=this.tickLods[a],a=a+1>this.tickLods.length-1?0:a+1,this.ticks.push(h),l=h;for(this.minValueScale=1/l*100,a=this.tickLods.length-1,h=1;h/this.tickLods[a]>=e;)h/=this.tickLods[a],a=a-1<0?this.tickLods.length-1:a-1,this.ticks.unshift(h),n=h;return this.maxValueScale=1/n*100,this}spacing(i,t){return this.minSpacing=i,this.maxSpacing=t,this}range(i,t,s){this.minValue=Math.fround(Math.min(i,t)),this.maxValue=Math.fround(Math.max(i,t)),this.pixelRange=s,this.minTickLevel=0,this.maxTickLevel=this.ticks.length-1;for(let i=this.ticks.length-1;0<=i;i--){var h=this.ticks[i]*this.pixelRange/(this.maxValue-this.minValue);if(this.tickRatios[i]=(h-this.minSpacing)/(this.maxSpacing-this.minSpacing),1<=this.tickRatios[i]&&(this.maxTickLevel=i),h<=this.minSpacing){this.minTickLevel=i;break}}for(let i=this.minTickLevel;i<=this.maxTickLevel;i++)this.tickRatios[i]=EditorMath.clamp01(this.tickRatios[i]);return this}ticksAtLevel(t,s){var h=[],a=this.ticks[t],e=Math.floor(this.minValue/a),c=Math.ceil(this.maxValue/a);for(let i=e;i<=c;i++)(!s||t>=this.maxTickLevel||i%Math.round(this.ticks[t+1]/a)!=0)&&h.push(i*a);return h}levelForStep(t){for(let i=0;i<this.ticks.length;i++)if(t<=this.ticks[i]*this.pixelRange/Math.floor(this.maxValue-this.minValue))return i;return-1}}module.exports=LinearTicks;