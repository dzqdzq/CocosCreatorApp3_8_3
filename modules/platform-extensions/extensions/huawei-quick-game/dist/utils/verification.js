"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.verificationFunc=exports.getVerifyFuncMap=void 0;const path_1=require("path"),fs_extra_1=require("fs-extra");function getVerifyFuncMap(){const e={};return["versionName","versionCode","minPlatformVersion","package","privatePemPath","certificatePemPath","icon"].forEach(r=>{e[r]=(e,t)=>verificationFunc(r,e,t)}),e}exports.getVerifyFuncMap=getVerifyFuncMap;const MIN_PLATFORM_VERSION=1091;function verificationFunc(e,t,r){var a={error:"",newValue:t};let i="";switch(e){case"versionName":case"versionCode":t||(a.error=e+" "+Editor.I18n.t("huawei-quick-game.tips.not_empty"),a.newValue=null);break;case"minPlatformVersion":var o,n=r.packages["huawei-quick-game"].separateEngine;t?(o=t.match(/^[0-9]*$/))?(o=Number(o[0]),n&&o<MIN_PLATFORM_VERSION&&(a.error=Editor.I18n.t("huawei-quick-game.tips.support_min_platform_limit",{version:""+MIN_PLATFORM_VERSION}),a.newValue=null)):(a.error=e+" "+Editor.I18n.t("huawei-quick-game.tips.not_empty"),a.newValue=null):(a.error=e+" "+Editor.I18n.t("huawei-quick-game.tips.not_empty"),a.newValue=null);break;case"package":t?/^[a-zA-Z]+[0-9a-zA-Z_]*(\.[a-zA-Z]+[0-9a-zA-Z_]*)*$/.test(t)||(a.error=`Game package(${t})`+Editor.I18n.t("huawei-quick-game.tips.project_name_not_legal"),a.newValue=null):(a.error=`Game package(${t}) `+Editor.I18n.t("huawei-quick-game.tips.package_name_error"),a.newValue=null);break;case"privatePemPath":t?(i=Editor.UI.__protected__.File.resolveToRaw(t),".pem"===(0,path_1.extname)(i)&&(0,fs_extra_1.existsSync)(i)||(a.error=Editor.I18n.t("huawei-quick-game.tips.private_pem_path_error"))):a.error=Editor.I18n.t("huawei-quick-game.options.private_pem_path_hint");break;case"certificatePemPath":t?(i=Editor.UI.__protected__.File.resolveToRaw(t),".pem"===(0,path_1.extname)(i)&&(0,fs_extra_1.existsSync)(i)||(a.error=Editor.I18n.t("huawei-quick-game.tips.certificate_pem_path_error"))):a.error=Editor.I18n.t("huawei-quick-game.options.certificate_pem_path_hint");break;case"icon":"string"!=typeof t?a.error="Icon Path"+Editor.I18n.t("huawei-quick-game.tips.icon_not_exist"):(0,fs_extra_1.existsSync)(t)||(a.error="Icon Path"+Editor.I18n.t("huawei-quick-game.tips.icon_not_exist"))}return a}exports.verificationFunc=verificationFunc;