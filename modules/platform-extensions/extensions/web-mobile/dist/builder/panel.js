"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.update=exports.$=exports.data=exports.template=void 0;const fs_1=require("fs"),path_1=require("path"),utils_1=require("../utils"),qrcode=require("qrcode");let panel;exports.template=(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../static/view.html"),"utf8");const component={data(){return{preview_url:"",webGPUTips:"",webGPULink:"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts"}},methods:{t(e,t=""){return Editor.I18n.t("web-mobile."+t+e)},async preview(){var e=panel.options,t=Editor.UI.__protected__.File.resolveToRaw(e.buildPath),t=(0,path_1.join)(t,e.outputName);return Editor.Message.request("web-mobile","preview",t)},async init(){var e=panel.options.packages["web-mobile"].useWebGPU;this.preview_url=await(0,utils_1.getPreviewUrl)(panel.options.outputName,e),e&&!this.preview_url.startsWith("https")?this.webGPUTips="i18n:web-mobile.tips.webGPUServer":(this.webGPUTips="",this.$nextTick(()=>{qrcode.toCanvas(this.$refs.canvas,this.preview_url,{errorCorrectionLevel:"H",maskPattern:2,margin:1})}))}},mounted(){this.init()}};function update(e,t){panel=this,t&&!t.startsWith("packages."+panel.pkgName)||(panel.options=e,panel.vm.init())}function ready(e,t,r){panel=this;var i=require("vue/dist/vue.js");panel.options=e,panel.pkgName=r,panel.vm=new i(Object.assign({el:panel.$.root},component))}exports.data={vm:null,options:{}},exports.$={root:".web-mobile"},exports.update=update,exports.ready=ready;