"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.update=exports.$=exports.template=void 0;const fs_1=require("fs"),path_1=require("path"),options_1=require("./options"),lodash=require("lodash");let panel;exports.template=fs_1.readFileSync(path_1.join(__dirname,"../../static/builder/view.html"),"utf8");const methods={async onSetSDK(){Editor.Message.send("preferences","open-settings","program")},getDefaultPackageName(){return options_1.defaultOptions.packageName},async onConfirm(e){var a=e.target.value,e=e.target.getAttribute("path");await this.onUpdateOptions(e,a),this.emitChange()},async onUpdateOptions(e,a){var t;e&&(t=this,lodash.set(t.pkgOptions,e,a),a=await options_1.verificationFunc(e,a,t.options),t.$set(t.pkgErrorMap,e,a.error))},emitChange(){var e=this;panel.dispatch("update","packages."+e.pkgName,e.pkgOptions,e.pkgErrorMap)},async init(){var e=this;e.pkgOptions=lodash.get(panel.options,"packages."+panel.options.platform)||{},e.pkgErrorMap=lodash.get(panel.errorMap,"packages."+panel.options.platform)||{},e.apiLevels=await getOHOSAPILevels(),e.apiLevels.length||(e.pkgErrorMap.apiLevels="i18n:open-harmonyos.tips.apilevel_empty",e.emitChange())}};async function update(e,a){panel=this,a&&!a.startsWith("packages."+panel.pkgName)||(panel.options=e,panel.vm.init())}function ready(e,a,t,p){panel=this;var o=require("vue/dist/vue.js");panel.options=e,panel.pkgName=t,panel.errorMap=p,panel.vm=new o({el:panel.$.root,components:{"build-prop":BuildPanel.vueComps.buildProp,"template-comp":BuildPanel.vueComps.templateComp},data(){return{pkgName:t,apiLevels:[],options:panel.options,errorMap:panel.errorMap,pkgOptions:{},pkgErrorMap:{},appABIList:["armeabi-v7a","arm64-v8a","x86"]}},mounted(){this.init()},methods:methods})}async function getOHOSAPILevels(){var e=await Editor.Message.request("program","query-program-info","ohosSDK");return e&&e.path&&fs_1.existsSync(e.path)?["7"]:[]}exports.$={root:".open-harmonyos"},exports.update=update,exports.ready=ready;