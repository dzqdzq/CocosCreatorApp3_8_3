"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=void 0;const path_1=require("path"),fs_extra_1=require("fs-extra");exports.methods={async"create-build-template"(){var t=(await Editor.Message.request("engine","query-engine-info")).typescript.path,a=(0,path_1.join)(t,"templates/wechatprogram","build-template.json");if((0,fs_extra_1.existsSync)(a)){var r={},s=(Object.assign(r,(0,fs_extra_1.readJSONSync)(a)),(0,path_1.join)(Editor.Project.path,"build-templates"));let e=!1;for(const n of r.templates||[]){var o=(0,path_1.join)(t,"templates/wechatprogram",n),i=(0,path_1.join)(s,"wechatprogram",n);if((0,fs_extra_1.existsSync)(i))if(1===(await Editor.Dialog.warn(Editor.I18n.t("wechatprogram.tips.overwriteTemplate",{file:n}),{title:Editor.I18n.t("builder.create_user_template"),buttons:[Editor.I18n.t("wechatprogram.tips.overwrite"),Editor.I18n.t("wechatprogram.tips.cancel")],default:0,cancel:1})).response)continue;(0,fs_extra_1.copySync)(o,i),e=!0}if(e){var p,a=(0,path_1.join)(s,"templates-version.json");let e={wechatprogram:r.version};(0,fs_extra_1.existsSync)(a)?(p=(0,fs_extra_1.readJSONSync)(a)).wechatprogram!==r.version&&(e=Object.assign({},p,e),(0,fs_extra_1.outputJSONSync)(a,e,{spaces:4})):(0,fs_extra_1.outputJSONSync)(a,e,{spaces:4}),console.log(`wechatprogram ${Editor.I18n.t("wechatprogram.tips.createTemplateSuccess")}({link(${(0,path_1.join)(s,"wechatprogram")})})`)}}else console.error("build-template.json not exist!")}};