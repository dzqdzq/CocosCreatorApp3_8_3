"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=void 0;const path_1=require("path"),fs_extra_1=require("fs-extra");exports.methods={async"create-build-template"(){var t=(await Editor.Message.request("engine","query-engine-info")).typescript.path,i=(0,path_1.join)(t,"templates/oppo-mini-game","build-template.json");if((0,fs_extra_1.existsSync)(i)){var o={},a=(Object.assign(o,(0,fs_extra_1.readJSONSync)(i)),(0,path_1.join)(Editor.Project.path,"build-templates"));let e=!1;for(const r of o.templates||[]){var s=(0,path_1.join)(t,"templates/oppo-mini-game",r),p=(0,path_1.join)(a,"oppo-mini-game",r);if((0,fs_extra_1.existsSync)(p))if(1===(await Editor.Dialog.warn(Editor.I18n.t("oppo-mini-game.tips.overwriteTemplate",{file:r}),{title:Editor.I18n.t("builder.create_user_template"),buttons:[Editor.I18n.t("oppo-mini-game.tips.overwrite"),Editor.I18n.t("oppo-mini-game.tips.cancel")],default:0,cancel:1})).response)continue;(0,fs_extra_1.copySync)(s,p),e=!0}if(e){var n,i=(0,path_1.join)(a,"templates-version.json");let e={"oppo-mini-game":o.version};(0,fs_extra_1.existsSync)(i)?(n=(0,fs_extra_1.readJSONSync)(i))["oppo-mini-game"]!==o.version&&(e=Object.assign({},n,e),(0,fs_extra_1.outputJSONSync)(i,e,{spaces:4})):(0,fs_extra_1.outputJSONSync)(i,e,{spaces:4}),console.log(`oppo-mini-game ${Editor.I18n.t("oppo-mini-game.tips.createTemplateSuccess")}({link(${(0,path_1.join)(a,"oppo-mini-game")})})`)}}else console.error("build-template.json not exist!")}};