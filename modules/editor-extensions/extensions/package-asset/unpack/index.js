const PackageJSON=require("../package.json"),JSZip=require("../lib/jszip.min"),{join,basename}=require("path"),{writeFileSync,readdirSync,statSync,readFileSync}=require("fs-extra"),skips=[".idea","unpack",".DS_Store",".git",".idea",".gitignore","source"];function step(e,i,n,a){if(n=n||basename(e),!skips.includes(n)){var r=statSync(e);if(r.isDirectory())for(const s of readdirSync(e))step(join(e,s),a?i:i.folder(n));else r.isFile()?i.file(n,readFileSync(e)):console.error(e+" was not added to zip!")}}function unpack(){var e=join(__dirname,"../..",PackageJSON.name);const i=join(e,"unpack",PackageJSON.name+".zip");var n=new JSZip;step(e,n,PackageJSON.name,!0),n.generateAsync({type:"nodebuffer",compression:"DEFLATE",compressionOptions:{level:9}}).then(e=>{writeFileSync(i,e)})}(async()=>{unpack()})();