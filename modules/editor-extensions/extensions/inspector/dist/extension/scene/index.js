"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.emitVirtualEvent=exports.queryVirtualElement=exports.register=exports.InspectorMap=void 0;const cc_1=require("cc"),element_1=require("../element"),map=new WeakMap;function register(e,t){exports.InspectorMap[e]=exports.InspectorMap[e]||[],exports.InspectorMap[e].push(t)}function queryVirtualElement(r){var e=cc_1.js.getClassName(r)||"";if(exports.InspectorMap[e]){e=exports.InspectorMap[e];const s=new element_1.VirtualElement("inspector-root"),p=map.get(r)||[];return e.forEach((e,t)=>{e=e.decode(r,p[t]);p[t]=e,s.appendChild(e)}),map.set(r,p),(0,element_1.serialize)(s)}}function emitVirtualEvent(e,t,r,s){var p=map.get(e);if(p)for(const n of p){var o=n.queryChildByID(t);o&&(o.attrs=JSON.parse(JSON.stringify(s)),o.dispatch(r,e,o))}}exports.InspectorMap={},exports.register=register,exports.queryVirtualElement=queryVirtualElement,exports.emitVirtualEvent=emitVirtualEvent;