"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decode=void 0;const htmlparser2_1=require("htmlparser2"),element_1=require("../../element"),parser_1=require("../simple-json/parser");function decode(e,r,t){if(r&&"inspector-root"!==r.tag)throw new Error("Not a legitimate root node");var o=r||new element_1.VirtualElement("inspector-root"),s={type:"vbox",children:[]};let n=s;const i=new Map;var p=new htmlparser2_1.Parser({onopentag(e,r){var t=parser_1.parserJSONObjectMap[e],t=t?t.generate():{type:e},o=(i.set(t,n),"children"in n&&(-1!==(e=n.children.indexOf(t))&&n.children.splice(e,1),n.children.push(t)),t);for(const s in r){let e=r[s];"true"===e?e=!0:"false"===e&&(e=!1),s.startsWith("properties.")?(o.properties=o.properties||{},o.properties[s.substring(11)]=e):o[s]=e}n=t},ontext(e){},onclosetag(e){n=i.get(n)}});return p.write(e),p.end(),(0,parser_1.decode)(s,r,t),o}exports.decode=decode;