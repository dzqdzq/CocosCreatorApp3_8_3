"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.InspectorElement=exports.register=exports.createElement=void 0;const elementHandleMap=new Map,HTMLElementMap=new WeakMap;function createElement(e){let t=elementHandleMap.get(e.tag);var n=(t=t||elementHandleMap.get("*")).create(e);return t.init(e,n),n}function register(e,t){elementHandleMap.set(e,new t)}exports.createElement=createElement;class InspectorElement{create(t){const n=document.createElement(t.tag);HTMLElementMap.set(t,n);for(const e in t.attrs)n.setAttribute(e,t.attrs[e]);t.text.trim()&&(n.innerHTML=t.text);const r=n.__handle__=n.__handle__||{};return t.events.forEach(e=>{r[e]=function(){t.getRoot()?.dispatch("elem-change",t,e)},n.addEventListener(e,r[e])}),t.children.forEach((e,t)=>{e=createElement(e),t=n.children[t];t?t!==e&&n.insertBefore(e,t):n.appendChild(e)}),n}init(e,t){this.bind(e,t)}bind(r,s){r.setChangeCallback(()=>{const t=s.__handle__=s.__handle__||{};r.events.forEach(e=>{t[e]||(t[e]=function(){r.getRoot()?.dispatch("elem-change",r,e)},s.addEventListener(e,t[e]))});for(const e in t)r.events.includes(e)||(s.removeEventListener(e,t[e]),delete t[e]);for(const n in r.attrs)s.setAttribute(n,r.attrs[n]);r.text.trim()&&(s.innerHTML=r.text),r.children.forEach((e,t)=>{e=HTMLElementMap.get(e)||createElement(e),t=s.children[t];e.parentElement===s||(e.remove(),t)?t!==e&&s.insertBefore(e,t):s.appendChild(e)});for(let e=r.children.length;e<s.children.length;e++)s.children[e].remove()})}}(exports.register=register)("*",exports.InspectorElement=InspectorElement);class UIBase extends InspectorElement{init(e,t){t.addEventListener("change",()=>{e.setAttribute("value",t.value)}),super.init(e,t)}}register("ui-asset",UIBase),register("ui-checkbox",UIBase),register("ui-component",UIBase),register("ui-file",UIBase),register("ui-input",UIBase),register("ui-node",UIBase),register("ui-num-input",UIBase),register("ui-slider",UIBase),register("ui-select",UIBase),register("ui-textarea",UIBase),register("ui-tab",UIBase);class UIColor extends InspectorElement{init(e,t){t.addEventListener("change",()=>{e.setAttribute("value",JSON.stringify(t.value))}),super.init(e,t)}}register("ui-color",UIColor);