"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const fs_extra_1=require("fs-extra"),path_1=require("path");module.exports=Editor.Panel.define({template:`<div class="console-footer-right">
                <div class="console-counter">
                    <div class="icon-box" data-type="info"><ui-icon color="normal" value="info"></ui-icon><span class="info">0</span></div>
                    <div class="icon-box" data-type="warn"><ui-icon color="normal" value="warn"></ui-icon><span class="warn">0</span></div>
                    <div class="icon-box" data-type="error"><ui-icon color="normal" value="error"></ui-icon><span class="error">0</span></div>
                </div>
             </div>`,style:(0,fs_extra_1.readFileSync)((0,path_1.join)(__dirname,"../../dist/right.css"),"utf8"),$:{counter:".console-counter",iconInfo:'ui-icon[value="info"]',iconWarn:'ui-icon[value="warn"]',iconError:'ui-icon[value="error"]',info:".info",warn:".warn",error:".error"},methods:{clear(){this.updateCounter({info:0,warn:0,error:0,log:0})},updateCounter(e){this.$.info.innerText=""+e.info,this.$.warn.innerText=""+e.warn,this.$.error.innerText=""+e.error,this.$.iconInfo?.setAttribute("color",e.info?"true":"normal"),this.$.iconWarn?.setAttribute("color",e.warn?"true":"normal"),this.$.iconError?.setAttribute("color",e.error?"true":"normal")}},async ready(){this.clear=this.clear.bind(this),this.updateCounter=this.updateCounter.bind(this);var e=this.$.counter?.querySelectorAll(".icon-box");e&&(Array.from(e).forEach(e=>{e.addEventListener("click",async e=>{e=e.currentTarget?.dataset?.type;await Editor.Panel.has("console")?(Editor.Panel.focus("console"),Editor.Message.send("console","refresh",e)):Editor.Panel.open("console",e)})}),Editor.Message.__protected__.addBroadcastListener("console:logsUpdate",this.updateCounter),Editor.Logger.__protected__.on("clear",this.clear))},async close(){Editor.Logger.__protected__.removeListener("clear",this.clear),Editor.Message.__protected__.removeBroadcastListener("console:logsUpdate",this.updateCounter)}});