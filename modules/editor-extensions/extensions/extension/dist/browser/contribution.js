"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getExtensionInfoMap=exports.getInfoFromTypeID=exports.unregister=exports.register=exports.defaultDownloadTypeInfoMap=void 0;const path_1=require("path"),uuid_1=require("uuid"),downloadTypeInfoMap={},createExtensionInfoMap={};function register(e,a,o){o.download&&(downloadTypeInfoMap[e]=o.download.map(e=>({id:e.id,name:e.name,module:(0,path_1.join)(a,e.module),check:e.check,download:e.download,install:e.install}))),o.template&&0<(o=o.template.map(e=>{var o=(0,path_1.join)(a,e.path),n=e.description||"unknown",t=e.creator&&(0,path_1.join)(a,e.creator);return{...e,id:(0,uuid_1.v4)(),rawPath:e.path,path:o,description:n,creator:t}})).length&&(createExtensionInfoMap[e]??={},createExtensionInfoMap[e].templates=o)}function unregister(e){delete createExtensionInfoMap[e],delete downloadTypeInfoMap[e]}function getInfoFromTypeID(o){var n=[exports.defaultDownloadTypeInfoMap];for(const e in downloadTypeInfoMap){var t=downloadTypeInfoMap[e];if(t)for(let e=0;e<t.length;e++){var a=t[e];a.id==o&&n.splice(0,0,a)}}return n}function getExtensionInfoMap(){return createExtensionInfoMap}exports.defaultDownloadTypeInfoMap={id:-1,name:"Zip Package",module:(0,path_1.join)(__dirname,"../contributions/extension.js"),download:"downloadZip",install:"copyZip"},exports.register=register,exports.unregister=unregister,exports.getInfoFromTypeID=getInfoFromTypeID,exports.getExtensionInfoMap=getExtensionInfoMap;