"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const fs_1=require("fs"),path_1=require("path"),vue_js_1=__importDefault(require("vue/dist/vue.js")),utils_dom_1=require("../../public/utils-dom");exports.default=vue_js_1.default.extend({name:"CustomSelect",props:{value:{type:String,default:""},loading:{type:Boolean,default:!1},placeholder:{type:String,default:""},height:{type:Number,default:24},maxCount:{type:Number,default:15},errorMessage:{type:String,default:""}},data(){return{isShow:!1,curValue:"",curLabel:"",curTitle:"",options:[]}},watch:{value(){this.changeValue()},loading(t){t&&0<this.options.length&&this.$nextTick(()=>{this.$refs.options.scrollTop=this.$refs.options.scrollTop+this.$refs.loading.scrollHeight})}},mounted(){document.body.addEventListener("click",this.onDocumentClick),this.changeValue()},destroyed(){document.body.removeEventListener("click",this.onDocumentClick)},methods:{changeValue(){var t=this.options.find(t=>t.value===this.value);t&&(this.curLabel=t.label,this.curValue=t.value,this.curTitle=t.title||"",this.$emit("select",this.value))},showOption(){this.isShow=!this.isShow,this.$emit("toggleOptions",this.isShow)},select(t){this.showOption(),this.$emit("input",t)},refresh(){this.$emit("refresh")},scrollHandle(t){this.loading||this.errorMessage||(t=t.path[0]).scrollHeight-t.scrollTop-5<t.clientHeight&&this.$emit("scroll-to-bottom")},onDocumentClick(t){t=(0,utils_dom_1.getTargetFromEvent)(t);(0,utils_dom_1.elementsContains)(this.$el,t)||(this.isShow=!1,this.$emit("toggleOptions",!1))}},template:(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../../static/template/components/custom-select.html"),"utf8")});