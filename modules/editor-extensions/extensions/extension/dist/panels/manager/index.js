"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const fs_1=require("fs"),path_1=require("path"),vue_js_1=__importDefault(require("vue/dist/vue.js")),app_1=require("./app"),sdk_1=require("./sdk"),store_1=require("./store"),event_bus_1=require("./event-bus"),Panel=Editor.Panel.define({style:(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../manager.css"),"utf8"),template:'<div class="extension"></div>',$:{container:".extension"},methods:{search(e){!this.vm||"string"!=typeof e&&"boolean"!=typeof e||this.vm.$emit(event_bus_1.INTERNAL_EVENTS.search,e)},selectPackage(e){}},async ready(e={}){const{extensionPaths:s,sdk:a}=await(0,sdk_1.generateSdk)(),r=(0,store_1.createStore)(a);r.startupParams.value=e,this.vm?.$destroy();e=new vue_js_1.default({name:"ExtensionManagerProvider",setup(e,t){return(0,store_1.useProvideStore)(r),(0,sdk_1.useProvideExtensionPaths)(s),(0,sdk_1.useProvideSdk)(a),{}},render(e){return e(app_1.PanelApp,{ref:"app"})}}).$mount(this.$.container);this.vm=e},async close(){this.vm?.$destroy(),delete this.vm,app_1.updateExtensionOption.isReRegister&&(await Editor.Package.unregister(app_1.updateExtensionOption.path),await Editor.Package.register(app_1.updateExtensionOption.path),await Editor.Package.enable(app_1.updateExtensionOption.path))}});module.exports=Panel;