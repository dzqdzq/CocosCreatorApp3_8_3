{"code":"'use strict';\r\nimport App from './App.vue';\r\nlet $vm;\r\nmodule.exports = Editor.Panel.define({\r\n    template: '<div id=\"app\"></div>',\r\n    $: {\r\n        app: '#app',\r\n    },\r\n    methods: {\r\n        async start() {\r\n            applyLogsAndProgress();\r\n        },\r\n        cancel() { },\r\n        log() {\r\n            applyLogsAndProgress();\r\n        },\r\n        progress() {\r\n            applyLogsAndProgress();\r\n        },\r\n        // 烘焙库的任务结束,此时还未输出图片\r\n        finished() {\r\n            applyLogsAndProgress();\r\n        },\r\n        // 烘焙全部结束,此时已输出图片\r\n        async end() {\r\n            applyLogsAndProgress();\r\n            $vm.progress = 100;\r\n            await $vm.onBakerEnd();\r\n        },\r\n        onSceneReady(uuid) {\r\n            $vm.onSceneReady(uuid);\r\n        },\r\n    },\r\n    async ready() {\r\n        const sceneUUID = await Editor.Message.request('scene', 'query-current-scene');\r\n        $vm = new App({\r\n            el: this.$.app,\r\n        });\r\n        $vm.onSceneReady(sceneUUID);\r\n        const lightmapData = await Editor.Message.request('lightmap', 'getConfig');\r\n        if (lightmapData) {\r\n            for (const key in lightmapData) {\r\n                $vm.$data[key] = lightmapData[key];\r\n            }\r\n        }\r\n    },\r\n});\r\nasync function applyLogsAndProgress() {\r\n    const state = await Editor.Message.request('lightmap', 'unstaging');\r\n    $vm.setLogs(state.logInfos);\r\n    $vm.progress = state.progress;\r\n}\r\n","references":["/Users/mac/Documents/editor_3d/v3.8.3/app/modules/editor-extensions/extensions/lightmap/source/panel/components/manager.ts"]}
