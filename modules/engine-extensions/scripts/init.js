"use strict";const{existsSync,readFileSync,writeFileSync}=require("fs"),join=require("path")["join"],defaultConfig={};function fillConfig(n){let i=!1;return("string"!=typeof n.enginePath||defaultConfig.enginePath&&defaultConfig.enginePath!==n.enginePath)&&(n.enginePath=defaultConfig.enginePath||"",i=!0),i}process.argv.forEach(n=>{n=n.split("=");2<=n.length&&(defaultConfig[n[0].substr(2)]=n[1])});const configFile=join(__dirname,"../config.json");if(existsSync(configFile))try{const e=readFileSync(configFile),f=JSON.parse(e),g=fillConfig(f);g&&writeFileSync(configFile,JSON.stringify(f,null,4))}catch(n){console.error("config.json 格式错误，请检查文件内容"),console.error(n)}else{const i={};fillConfig(i),writeFileSync(configFile,JSON.stringify(i,null,4))}console.log("初始化配置成功");