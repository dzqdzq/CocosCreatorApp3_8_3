"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=exports.SceneImporter=void 0;const asset_db_1=require("@editor/asset-db"),migrates_1=require("./migrates"),fs_extra_1=require("fs-extra"),path_1=require("path"),utils_1=require("../../utils");class SceneImporter extends asset_db_1.Importer{get version(){return exports.version}get name(){return"scene"}get assetType(){return"cc.SceneAsset"}get migrations(){return migrates_1.migrations}get migrationHook(){return migrates_1.migrationHook}async import(e){var r=await fs_extra_1.readJSON(e.source),t=path_1.basename(e.source,path_1.extname(e.source));let s=r[0]._name!==t;s&&(r[0]._name=t);try{s=s||utils_1.removeNull(r,e.uuid)}catch(e){console.debug(e)}r[1]._id!==e.uuid&&(s=!0,r[1]._id=e.uuid),s&&(t=JSON.stringify(r,void 0,2),await fs_extra_1.writeFile(e.source,t));t=JSON.stringify(r,void 0,2),await e.saveToLibrary(".json",t),r=utils_1.getDependList(t);return e.setData("depends",r.uuids),e.setData("dependScripts",r.dependScriptUuids),!0}}exports.SceneImporter=SceneImporter,exports.version="1.1.45";