"use strict";var TCBindingValueType,__rest=this&&this.__rest||function(i,e){var n={};for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&e.indexOf(t)<0&&(n[t]=i[t]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,t=Object.getOwnPropertySymbols(i);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(i,t[a])&&(n[t[a]]=i[t[a]]);return n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.migrateAnimationGraph_3_8_0=void 0;const TYPE_ID_BINARY_CONDITION="cc.animation.BinaryCondition";function migrateAnimationGraph_3_8_0(i){migrateTransitionBindings(i)}function migrateTransitionBindings(i){const o=(()=>{let e;if(i.visitTypedObject("cc.animation.AnimationGraph",i=>{if(e)throw new Error("Migration error: the old serialized animation graph assets has more than one animation graph objects!");e=i}),e)return e;throw new Error("Migration error: the old serialized animation graph assets has no any animation graph object!")})();i.visitTypedObject(TYPE_ID_BINARY_CONDITION,i=>{var{lhs:n,rhs:a}=i,e=__rest(i,["lhs","rhs"]);if(""!==(null!=(r=a.variable)?r:""))throw new Error("Migration error: the old serialized binary condition is asserted to have only constant value but instead saw "+a.variable);let t=TCBindingValueType.FLOAT;var r=o._variables[n.variable];if(r){let i;(a=i=i||{})[a.FLOAT=0]="FLOAT";let e=!(a[a.INTEGER=3]="INTEGER");"cc.animation.PlainVariable"===r.__type__&&((a=null!=(a=r._type)?a:0)===i.FLOAT?(t=TCBindingValueType.FLOAT,e=!0):a===i.INTEGER&&(t=TCBindingValueType.INTEGER,e=!0)),e||console.debug(`The condition's lhs variable ${n.variable} was previously `+"bound to a variable with mismatched type: "+JSON.stringify(r,void 0,2))}else console.debug(`The condition's lhs variable ${n.variable} was previously not bound.`);a=Object.assign(Object.assign({},e),{lhs:n.value,lhsBinding:{__type__:"cc.animation.TCVariableBinding",type:t,variableName:n.variable},rhs:i.rhs.value});clearEntries(i),Object.assign(i,a)})}function clearEntries(i){for(const e in i)delete i[e]}exports.migrateAnimationGraph_3_8_0=migrateAnimationGraph_3_8_0,function(i){i[i.FLOAT=0]="FLOAT",i[i.INTEGER=3]="INTEGER"}(TCBindingValueType=TCBindingValueType||{});