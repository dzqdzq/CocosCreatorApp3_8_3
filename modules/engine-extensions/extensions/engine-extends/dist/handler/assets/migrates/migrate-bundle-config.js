"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeBundleConfig=void 0;const platformConfigs={native:{platforms:["android","ohos","open-harmonyos","huawei-agc","ios","windows","mac","linux","xr-meta","xr-huaweivr","xr-pico","xr-rokid","xr-monado","xr-spaces","xr-seed","ar-android","ar-ios","xr-gsxr","xr-yvr","xr-htc","xr-iqiyi","xr-skyworth","xr-ffalcon","xr-nreal","xr-inmo","xr-lenovo"],platformTypeInfo:{icon:"mobile",displayName:"i18n:builder.asset_bundle.native"},maxOptionList:{compressionType:["none","merge_dep","merge_all_json"]}},miniGame:{platforms:["alipay-mini-game","taobao-creative-app","taobao-mini-game","bytedance-mini-game","oppo-mini-game","huawei-quick-game","vivo-mini-game","xiaomi-quick-game","baidu-mini-game","wechatgame","link-sure","qtt","cocos-play"],platformTypeInfo:{icon:"mini-game",displayName:"i18n:builder.asset_bundle.minigame"},maxOptionList:{compressionType:["none","merge_dep","merge_all_json","zip","subpackage"]},minOptionList:{compressionType:["none","merge_dep","merge_all_json","zip"]}},web:{platforms:["fb-instant-games","web-desktop","web-mobile"],platformTypeInfo:{icon:"html5",displayName:"i18n:builder.asset_bundle.web"},maxOptionList:{compressionType:["none","merge_dep","merge_all_json","zip"]},minOptionList:{compressionType:["none","merge_dep","merge_all_json"]}}},platformTypeMap={};function mergeBundleConfig(r,a,e){const m={},s=(Object.keys(platformTypeMap).forEach(e=>{var o=platformTypeMap[e],i={compressionType:r[e]||"merge_dep",isRemote:a[e]||!1},n=JSON.stringify(i);m[o]?m[o][n]?m[o][n].platforms.push(e):m[o][n]={config:i,platforms:[e]}:m[o]={[n]:{config:i,platforms:[e]}}}),{displayName:e,configs:{}});return Object.keys(m).forEach(i=>{var e=Object.values(m[i]).sort((e,o)=>o.platforms.length-e.platforms.length);if(e.length){if("miniGame"!==i){var o=e.shift().config;if(s.configs[i]={preferredOptions:o},!e.length)return}else s.configs[i]={configMode:"overwrite"};const n={};e.forEach(o=>{o.platforms.forEach(e=>{"merge_dep"===o.config.compressionType&&!o.config.isRemote&&"miniGame"!==i||(n[e]=o.config)})}),s.configs[i].overwriteSettings=n}}),s}Object.keys(platformConfigs).forEach(o=>{platformConfigs[o].platforms.forEach(e=>{platformTypeMap[e]=o})}),exports.mergeBundleConfig=mergeBundleConfig;