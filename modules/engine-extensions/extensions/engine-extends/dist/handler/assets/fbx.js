"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,i)}:function(e,t,r,a){e[a=void 0===a?r:a]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGltfFilePath=exports.FbxHandler=void 0;const gltf_1=__importStar(require("./gltf")),fbx_to_gltf_1=require("./gltf/fbx-to-gltf"),fbx_converter_1=require("./utils/fbx-converter"),model_convert_routine_1=require("./utils/model-convert-routine");async function getGltfFilePath(e){var t=e.userData;void 0===t.fbx?.smartMaterialEnabled&&((t.fbx??={}).smartMaterialEnabled=await Editor.Profile.getProject("project","fbx.material.smart"));let r;if(t.legacyFbxImporter)r=await(0,fbx_to_gltf_1.fbxToGlTf)(e,e._assetDB,exports.FbxHandler.importer.version);else{var a={},a=(a.unitConversion=t.fbx?.unitConversion,a.animationBakeRate=t.fbx?.animationBakeRate,a.preferLocalTimeSpan=t.fbx?.preferLocalTimeSpan,a.smartMaterialEnabled=t.fbx?.smartMaterialEnabled??!1,a.matchMeshNames=t.fbx?.matchMeshNames??!0,(0,fbx_converter_1.createFbxConverter)(a)),a=await(0,model_convert_routine_1.modelConvertRoutine)("fbx.FBX-glTF-conv",e,e._assetDB,exports.FbxHandler.importer.version,a);if(!a)throw new Error("Failed to import "+e.source);r=a}return t.meshSimplify&&t.meshSimplify.enable?(0,gltf_1.getOptimizerPath)(e,r,t.meshSimplify):r}exports.FbxHandler={...gltf_1.default,name:"fbx"},exports.default=exports.FbxHandler,exports.getGltfFilePath=getGltfFilePath;