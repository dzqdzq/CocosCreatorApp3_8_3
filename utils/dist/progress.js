"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.quickSpawn=void 0;const child_process_1=require("child_process");function quickSpawn(t,d,l={downGradeLog:!0,onlyPrintWhenError:!0,prefix:""}){return new Promise((o,e)=>{l.prefix=l.prefix||"";var r=(0,child_process_1.spawn)(t,d,Object.assign({cwd:(null==l?void 0:l.cwd)||void 0,env:null==l?void 0:l.env},l));let n="";function i(r,o){l.onlyPrintWhenError?n+=o:("log"===r&&l.downGradeLog?r="debug":"warn"===r&&l.downGradeWaring?r="log":"error"===r&&l.downGradeError&&(r="warn"),console[r](l.prefix+o.toString()))}void 0!==l.logLevel&&0<=l.logLevel&&r.stdout.on("data",r=>{i("log",r)}),void 0!==l.logLevel&&1<=l.logLevel&&r.stderr.on("data",r=>{var o=r.toString();o&&"\n"!==o&&i("error",r)}),r.on("close",r=>{0!==r?e(l.prefix+(`Child process exit width code ${r}: ${t} `+d.toString())):o(!0)}),r.on("error",r=>{n&&console.debug(l.prefix+"child process output: ",{outputData:n}),console.error(l.prefix+(`child process error: ${t} `+d.toString())),e(r)}),r.on("exit",r=>{l.onlyPrintWhenError||console.debug(l.prefix+"Child process exit width code "+r)})})}exports.quickSpawn=quickSpawn;